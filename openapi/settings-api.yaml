openapi: 3.0.3
info:
  title: AegisX Settings API
  description: API for managing application settings, themes, and user preferences
  version: 1.0.0
  contact:
    name: AegisX Platform Team
    url: https://github.com/aegisx-platform
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:3000/api
    description: Development server
  - url: https://api.aegisx.com
    description: Production server

security:
  - bearerAuth: []

paths:
  /settings:
    get:
      tags:
        - Settings
      summary: Get all user settings
      description: Retrieve all settings for the current authenticated user
      operationId: getAllSettings
      responses:
        '200':
          description: Settings retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserSettings'
              examples:
                complete_settings:
                  summary: Complete user settings
                  value:
                    success: true
                    data:
                      theme:
                        name: "default"
                        scheme: "light"
                        customColors:
                          primary: "#1976d2"
                          accent: "#ff4081"
                          warn: "#f44336"
                        darkMode: false
                        autoTheme: false
                      layout:
                        type: "classic"
                        navigation:
                          type: "default"
                          position: "left"
                          collapsed: false
                          folded: false
                        toolbar:
                          position: "top"
                          style: "fixed"
                        footer:
                          position: "bottom"
                          style: "fixed"
                        sidebar:
                          hidden: false
                          position: "right"
                      localization:
                        language: "en"
                        dateFormat: "MM/DD/YYYY"
                        timeFormat: "12h"
                        timezone: "UTC"
                        currency: "USD"
                        numberFormat: "en-US"
                      notifications:
                        email: true
                        push: false
                        desktop: true
                        sound: true
                        types:
                          security: true
                          updates: true
                          marketing: false
                          reminders: true
                      privacy:
                        profileVisibility: "public"
                        activityTracking: true
                        analyticsOptOut: false
                        dataSharing: false
                      accessibility:
                        highContrast: false
                        fontSize: "medium"
                        reducedMotion: false
                        screenReader: false
                      performance:
                        animations: true
                        lazyLoading: true
                        caching: true
                        compression: true
                    meta:
                      timestamp: "2024-01-15T10:35:00Z"
                      version: "1.0"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      tags:
        - Settings
      summary: Update user settings
      description: Update multiple settings for the current authenticated user
      operationId: updateSettings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserSettingsUpdateRequest'
            examples:
              settings_update:
                summary: Update multiple settings
                value:
                  theme:
                    scheme: "dark"
                    darkMode: true
                  layout:
                    navigation:
                      collapsed: true
                  notifications:
                    email: false
                    desktop: true
      responses:
        '200':
          description: Settings updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserSettings'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /settings/theme:
    get:
      tags:
        - Settings
        - Theme
      summary: Get theme settings
      description: Retrieve theme-specific settings for the current user
      operationId: getThemeSettings
      responses:
        '200':
          description: Theme settings retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ThemeSettings'
              examples:
                theme_settings:
                  summary: Current theme settings
                  value:
                    success: true
                    data:
                      name: "default"
                      scheme: "light"
                      customColors:
                        primary: "#1976d2"
                        accent: "#ff4081"
                        warn: "#f44336"
                      darkMode: false
                      autoTheme: false
                      availableThemes:
                        - name: "default"
                          displayName: "Default"
                          preview: "https://api.aegisx.com/themes/default/preview.jpg"
                        - name: "dark"
                          displayName: "Dark"
                          preview: "https://api.aegisx.com/themes/dark/preview.jpg"
                        - name: "minimal"
                          displayName: "Minimal"
                          preview: "https://api.aegisx.com/themes/minimal/preview.jpg"
                    meta:
                      timestamp: "2024-01-15T10:35:00Z"
                      version: "1.0"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      tags:
        - Settings
        - Theme
      summary: Update theme settings
      description: Update theme-specific settings for the current user
      operationId: updateThemeSettings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ThemeSettingsUpdateRequest'
            examples:
              theme_update:
                summary: Switch to dark theme
                value:
                  scheme: "dark"
                  darkMode: true
                  autoTheme: false
      responses:
        '200':
          description: Theme settings updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ThemeSettings'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /settings/layout:
    get:
      tags:
        - Settings
        - Layout
      summary: Get layout settings
      description: Retrieve layout-specific settings for the current user
      operationId: getLayoutSettings
      responses:
        '200':
          description: Layout settings retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/LayoutSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      tags:
        - Settings
        - Layout
      summary: Update layout settings
      description: Update layout-specific settings for the current user
      operationId: updateLayoutSettings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LayoutSettingsUpdateRequest'
      responses:
        '200':
          description: Layout settings updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/LayoutSettings'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /settings/notifications:
    get:
      tags:
        - Settings
        - Notifications
      summary: Get notification settings
      description: Retrieve notification preferences for the current user
      operationId: getNotificationSettings
      responses:
        '200':
          description: Notification settings retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/NotificationSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      tags:
        - Settings
        - Notifications
      summary: Update notification settings
      description: Update notification preferences for the current user
      operationId: updateNotificationSettings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NotificationSettingsUpdateRequest'
      responses:
        '200':
          description: Notification settings updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/NotificationSettings'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /settings/reset:
    post:
      tags:
        - Settings
      summary: Reset settings to defaults
      description: Reset user settings to system defaults
      operationId: resetSettings
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                categories:
                  type: array
                  items:
                    type: string
                    enum: [theme, layout, notifications, localization, privacy, accessibility, performance]
                  description: Specific setting categories to reset (if not provided, all settings are reset)
                  example: ["theme", "layout"]
      responses:
        '200':
          description: Settings reset successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    ApiResponse:
      type: object
      required:
        - success
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
        meta:
          $ref: '#/components/schemas/ApiMeta'

    ApiMeta:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
          description: Timestamp of the response
        version:
          type: string
          description: API version
        requestId:
          type: string
          description: Unique request identifier

    UserSettings:
      type: object
      properties:
        theme:
          $ref: '#/components/schemas/ThemeSettings'
        layout:
          $ref: '#/components/schemas/LayoutSettings'
        localization:
          $ref: '#/components/schemas/LocalizationSettings'
        notifications:
          $ref: '#/components/schemas/NotificationSettings'
        privacy:
          $ref: '#/components/schemas/PrivacySettings'
        accessibility:
          $ref: '#/components/schemas/AccessibilitySettings'
        performance:
          $ref: '#/components/schemas/PerformanceSettings'

    ThemeSettings:
      type: object
      properties:
        name:
          type: string
          enum: [default, dark, light, minimal, enterprise]
          description: Theme name
          default: "default"
        scheme:
          type: string
          enum: [light, dark, auto]
          description: Color scheme
          default: "light"
        customColors:
          type: object
          properties:
            primary:
              type: string
              pattern: '^#[0-9A-Fa-f]{6}$'
              description: Primary color (hex)
              example: "#1976d2"
            accent:
              type: string
              pattern: '^#[0-9A-Fa-f]{6}$'
              description: Accent color (hex)
              example: "#ff4081"
            warn:
              type: string
              pattern: '^#[0-9A-Fa-f]{6}$'
              description: Warning color (hex)
              example: "#f44336"
        darkMode:
          type: boolean
          description: Enable dark mode
          default: false
        autoTheme:
          type: boolean
          description: Automatically switch theme based on system preference
          default: false
        availableThemes:
          type: array
          items:
            $ref: '#/components/schemas/ThemeOption'
          description: List of available themes

    ThemeOption:
      type: object
      properties:
        name:
          type: string
          description: Theme identifier
          example: "default"
        displayName:
          type: string
          description: Human-readable theme name
          example: "Default"
        preview:
          type: string
          format: uri
          description: Preview image URL
          example: "https://api.aegisx.com/themes/default/preview.jpg"
        description:
          type: string
          description: Theme description

    LayoutSettings:
      type: object
      properties:
        type:
          type: string
          enum: [classic, compact, enterprise, empty]
          description: Layout type
          default: "classic"
        navigation:
          $ref: '#/components/schemas/NavigationSettings'
        toolbar:
          $ref: '#/components/schemas/ToolbarSettings'
        footer:
          $ref: '#/components/schemas/FooterSettings'
        sidebar:
          $ref: '#/components/schemas/SidebarSettings'

    NavigationSettings:
      type: object
      properties:
        type:
          type: string
          enum: [default, compact, horizontal]
          description: Navigation type
          default: "default"
        position:
          type: string
          enum: [left, right, top]
          description: Navigation position
          default: "left"
        collapsed:
          type: boolean
          description: Navigation collapsed state
          default: false
        folded:
          type: boolean
          description: Navigation folded state
          default: false

    ToolbarSettings:
      type: object
      properties:
        position:
          type: string
          enum: [top, bottom, hidden]
          description: Toolbar position
          default: "top"
        style:
          type: string
          enum: [fixed, static, sticky]
          description: Toolbar style
          default: "fixed"

    FooterSettings:
      type: object
      properties:
        position:
          type: string
          enum: [bottom, hidden]
          description: Footer position
          default: "bottom"
        style:
          type: string
          enum: [fixed, static, sticky]
          description: Footer style
          default: "static"

    SidebarSettings:
      type: object
      properties:
        hidden:
          type: boolean
          description: Hide sidebar
          default: false
        position:
          type: string
          enum: [left, right]
          description: Sidebar position
          default: "right"

    LocalizationSettings:
      type: object
      properties:
        language:
          type: string
          pattern: '^[a-z]{2}$'
          description: Language code (ISO 639-1)
          example: "en"
          default: "en"
        dateFormat:
          type: string
          enum: [MM/DD/YYYY, DD/MM/YYYY, YYYY-MM-DD]
          description: Date format preference
          default: "MM/DD/YYYY"
        timeFormat:
          type: string
          enum: [12h, 24h]
          description: Time format preference
          default: "12h"
        timezone:
          type: string
          description: Timezone (IANA timezone)
          example: "UTC"
          default: "UTC"
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: Currency code (ISO 4217)
          example: "USD"
          default: "USD"
        numberFormat:
          type: string
          description: Number format locale
          example: "en-US"
          default: "en-US"

    NotificationSettings:
      type: object
      properties:
        email:
          type: boolean
          description: Enable email notifications
          default: true
        push:
          type: boolean
          description: Enable push notifications
          default: false
        desktop:
          type: boolean
          description: Enable desktop notifications
          default: true
        sound:
          type: boolean
          description: Enable notification sounds
          default: true
        types:
          type: object
          properties:
            security:
              type: boolean
              description: Security-related notifications
              default: true
            updates:
              type: boolean
              description: Update notifications
              default: true
            marketing:
              type: boolean
              description: Marketing notifications
              default: false
            reminders:
              type: boolean
              description: Reminder notifications
              default: true

    PrivacySettings:
      type: object
      properties:
        profileVisibility:
          type: string
          enum: [public, private, friends]
          description: Profile visibility
          default: "public"
        activityTracking:
          type: boolean
          description: Enable activity tracking
          default: true
        analyticsOptOut:
          type: boolean
          description: Opt out of analytics
          default: false
        dataSharing:
          type: boolean
          description: Allow data sharing with partners
          default: false

    AccessibilitySettings:
      type: object
      properties:
        highContrast:
          type: boolean
          description: Enable high contrast mode
          default: false
        fontSize:
          type: string
          enum: [small, medium, large, x-large]
          description: Font size preference
          default: "medium"
        reducedMotion:
          type: boolean
          description: Reduce motion and animations
          default: false
        screenReader:
          type: boolean
          description: Screen reader compatibility mode
          default: false

    PerformanceSettings:
      type: object
      properties:
        animations:
          type: boolean
          description: Enable animations
          default: true
        lazyLoading:
          type: boolean
          description: Enable lazy loading
          default: true
        caching:
          type: boolean
          description: Enable caching
          default: true
        compression:
          type: boolean
          description: Enable content compression
          default: true

    UserSettingsUpdateRequest:
      type: object
      properties:
        theme:
          $ref: '#/components/schemas/ThemeSettingsUpdateRequest'
        layout:
          $ref: '#/components/schemas/LayoutSettingsUpdateRequest'
        localization:
          $ref: '#/components/schemas/LocalizationSettings'
        notifications:
          $ref: '#/components/schemas/NotificationSettingsUpdateRequest'
        privacy:
          $ref: '#/components/schemas/PrivacySettings'
        accessibility:
          $ref: '#/components/schemas/AccessibilitySettings'
        performance:
          $ref: '#/components/schemas/PerformanceSettings'

    ThemeSettingsUpdateRequest:
      type: object
      properties:
        name:
          type: string
          enum: [default, dark, light, minimal, enterprise]
        scheme:
          type: string
          enum: [light, dark, auto]
        customColors:
          type: object
          properties:
            primary:
              type: string
              pattern: '^#[0-9A-Fa-f]{6}$'
            accent:
              type: string
              pattern: '^#[0-9A-Fa-f]{6}$'
            warn:
              type: string
              pattern: '^#[0-9A-Fa-f]{6}$'
        darkMode:
          type: boolean
        autoTheme:
          type: boolean

    LayoutSettingsUpdateRequest:
      type: object
      properties:
        type:
          type: string
          enum: [classic, compact, enterprise, empty]
        navigation:
          $ref: '#/components/schemas/NavigationSettings'
        toolbar:
          $ref: '#/components/schemas/ToolbarSettings'
        footer:
          $ref: '#/components/schemas/FooterSettings'
        sidebar:
          $ref: '#/components/schemas/SidebarSettings'

    NotificationSettingsUpdateRequest:
      type: object
      properties:
        email:
          type: boolean
        push:
          type: boolean
        desktop:
          type: boolean
        sound:
          type: boolean
        types:
          type: object
          properties:
            security:
              type: boolean
            updates:
              type: boolean
            marketing:
              type: boolean
            reminders:
              type: boolean

    ApiError:
      type: object
      required:
        - success
        - error
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              description: Error code identifier
            message:
              type: string
              description: Human-readable error message
            details:
              type: object
              additionalProperties: true
              description: Additional error details
            field:
              type: string
              description: Field that caused the error

    ValidationError:
      type: object
      required:
        - success
        - error
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              example: "VALIDATION_ERROR"
            message:
              type: string
              example: "Validation failed"
            details:
              type: array
              items:
                type: object
                properties:
                  field:
                    type: string
                  message:
                    type: string
                  code:
                    type: string

  responses:
    UnauthorizedError:
      description: Authentication required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApiError'
          example:
            success: false
            error:
              code: "UNAUTHORIZED"
              message: "Authentication required"

    ValidationError:
      description: Validation error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationError'

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApiError'
          example:
            success: false
            error:
              code: "INTERNAL_SERVER_ERROR"
              message: "An unexpected error occurred"

tags:
  - name: Settings
    description: User settings and preferences management
  - name: Theme
    description: Theme and appearance settings
  - name: Layout
    description: Layout and UI structure settings
  - name: Notifications
    description: Notification preferences