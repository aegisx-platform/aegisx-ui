<svg
  class="ax-sparkline"
  [class.ax-sparkline--sm]="size === 'sm'"
  [class.ax-sparkline--md]="size === 'md'"
  [class.ax-sparkline--lg]="size === 'lg'"
  [style.width]="customWidth"
  [attr.viewBox]="'0 0 ' + svgWidth + ' ' + svgHeight"
  preserveAspectRatio="none"
>
  <!-- Area fill (for area variant) -->
  <path
    *ngIf="variant === 'area' && areaPathD"
    class="ax-sparkline__area"
    [attr.d]="areaPathD"
    [attr.fill]="getFillColor()"
    [style.opacity]="fillOpacity"
  />

  <!-- Line path -->
  <path
    *ngIf="pathD"
    class="ax-sparkline__line"
    [attr.d]="pathD"
    [attr.stroke]="color"
    [attr.stroke-width]="strokeWidth"
    fill="none"
    stroke-linecap="round"
    stroke-linejoin="round"
  />

  <!-- Data point dots -->
  <circle
    *ngFor="let point of points"
    [attr.cx]="point.x"
    [attr.cy]="point.y"
    [attr.r]="dotRadius"
    [attr.fill]="color"
    class="ax-sparkline__dot"
    [class.ax-sparkline__dot--visible]="showDots"
    (mouseenter)="onPointMouseEnter(point)"
    (mouseleave)="onPointMouseLeave()"
  />

  <!-- Tooltip -->
  <g *ngIf="hoveredPoint && showValue" class="ax-sparkline__tooltip">
    <!-- Tooltip background -->
    <rect
      [attr.x]="getTooltipRectX(hoveredPoint.x)"
      [attr.y]="getTooltipRectY(hoveredPoint.y)"
      width="60"
      height="20"
      rx="4"
      class="ax-sparkline__tooltip-bg"
    />
    <!-- Tooltip text -->
    <text
      [attr.x]="getTooltipX(hoveredPoint.x)"
      [attr.y]="getTooltipTextY(hoveredPoint.y)"
      class="ax-sparkline__tooltip-text"
      text-anchor="middle"
    >
      {{ formatValue(hoveredPoint.value) }}
    </text>
  </g>
</svg>
