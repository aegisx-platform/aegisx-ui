/**
 * FullCalendar Theme - AegisX Design System Integration
 *
 * Maps FullCalendar CSS variables to AegisX design tokens
 * Supports light and dark mode via CSS variable inheritance
 */

// =============================================================================
// CSS Variable Mapping - FullCalendar â†’ AegisX
// =============================================================================

:root {
  // Border & Background
  --fc-border-color: var(--ax-border-default, #e5e7eb);
  --fc-page-bg-color: var(--ax-background-default, #ffffff);
  --fc-neutral-bg-color: var(--ax-background-subtle, #f9fafb);
  --fc-list-event-hover-bg-color: var(--ax-background-muted, #f3f4f6);

  // Today highlight
  --fc-today-bg-color: var(--ax-primary-subtle, rgba(99, 102, 241, 0.08));

  // Event colors
  --fc-event-bg-color: var(--ax-primary-default, #6366f1);
  --fc-event-border-color: var(--ax-primary-default, #6366f1);
  --fc-event-text-color: #ffffff;
  --fc-event-selected-overlay-color: rgba(0, 0, 0, 0.15);

  // Button colors
  --fc-button-bg-color: var(--ax-primary-default, #6366f1);
  --fc-button-border-color: var(--ax-primary-default, #6366f1);
  --fc-button-text-color: #ffffff;
  --fc-button-hover-bg-color: var(--ax-primary-emphasis, #4f46e5);
  --fc-button-hover-border-color: var(--ax-primary-emphasis, #4f46e5);
  --fc-button-active-bg-color: var(--ax-primary-emphasis, #4338ca);
  --fc-button-active-border-color: var(--ax-primary-emphasis, #4338ca);

  // Text colors
  --fc-neutral-text-color: var(--ax-text-secondary, #6b7280);
  --fc-non-business-color: var(--ax-background-muted, #f3f4f6);

  // Highlight colors (for drag & drop)
  --fc-highlight-color: var(--ax-primary-subtle, rgba(99, 102, 241, 0.15));

  // Small text
  --fc-small-font-size: 0.75rem;
}

// =============================================================================
// Dark Mode Overrides
// =============================================================================

.dark {
  --fc-border-color: var(--ax-border-default, #374151);
  --fc-page-bg-color: var(--ax-background-default, #111827);
  --fc-neutral-bg-color: var(--ax-background-subtle, #1f2937);
  --fc-list-event-hover-bg-color: var(--ax-background-muted, #374151);
  --fc-today-bg-color: var(--ax-primary-subtle, rgba(99, 102, 241, 0.15));
  --fc-non-business-color: var(--ax-background-muted, #1f2937);
  --fc-neutral-text-color: var(--ax-text-secondary, #9ca3af);
}

// =============================================================================
// FullCalendar Component Styles
// =============================================================================

.fc {
  // Base font settings
  font-family: var(--ax-font-family, 'Inter', system-ui, sans-serif);
  font-size: 0.875rem;

  // ==========================================================================
  // Toolbar
  // ==========================================================================

  .fc-toolbar {
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-bottom: 1.25rem !important;

    &.fc-header-toolbar {
      margin-bottom: 1rem;
    }
  }

  .fc-toolbar-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--ax-text-default, #111827);
  }

  // ==========================================================================
  // Buttons
  // ==========================================================================

  .fc-button {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: 0.5rem;
    transition: all 150ms ease;
    text-transform: capitalize;
    box-shadow: none !important;

    &:focus {
      box-shadow:
        0 0 0 2px var(--ax-background-default),
        0 0 0 4px var(--ax-primary-default) !important;
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }

  // Button group styling
  .fc-button-group {
    border-radius: 0.5rem;
    overflow: hidden;

    .fc-button {
      border-radius: 0;

      &:first-child {
        border-top-left-radius: 0.5rem;
        border-bottom-left-radius: 0.5rem;
      }

      &:last-child {
        border-top-right-radius: 0.5rem;
        border-bottom-right-radius: 0.5rem;
      }
    }
  }

  // Secondary/outline buttons (prev, next, today)
  .fc-prev-button,
  .fc-next-button,
  .fc-today-button {
    background-color: transparent !important;
    border-color: var(--ax-border-default) !important;
    color: var(--ax-text-default, #111827) !important;

    &:hover:not(:disabled) {
      background-color: var(--ax-background-subtle) !important;
      border-color: var(--ax-border-default) !important;
    }

    &:active,
    &.fc-button-active {
      background-color: var(--ax-background-muted) !important;
    }
  }

  // View buttons (month, week, day, list)
  .fc-dayGridMonth-button,
  .fc-timeGridWeek-button,
  .fc-timeGridDay-button,
  .fc-listWeek-button,
  .fc-listMonth-button {
    background-color: transparent !important;
    border-color: var(--ax-border-default) !important;
    color: var(--ax-text-secondary) !important;

    &:hover:not(:disabled) {
      background-color: var(--ax-background-subtle) !important;
      color: var(--ax-text-default) !important;
    }

    &.fc-button-active {
      background-color: var(--ax-primary-default) !important;
      border-color: var(--ax-primary-default) !important;
      color: #ffffff !important;
    }
  }

  // ==========================================================================
  // Calendar Grid
  // ==========================================================================

  // Table cells
  .fc-scrollgrid {
    border-color: var(--fc-border-color);
    border-radius: 0.5rem;
    overflow: hidden;
  }

  .fc-scrollgrid-section > * {
    border-color: var(--fc-border-color);
  }

  th,
  td {
    border-color: var(--fc-border-color);
  }

  // Day headers
  .fc-col-header-cell {
    padding: 0.75rem 0;
    background-color: var(--ax-background-subtle);
    font-weight: 500;
    color: var(--ax-text-secondary);
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
  }

  .fc-col-header-cell-cushion {
    padding: 0.5rem;
  }

  // Day cells
  .fc-daygrid-day {
    transition: background-color 150ms ease;

    &:hover {
      background-color: var(--ax-background-subtle);
    }

    &.fc-day-today {
      background-color: var(--fc-today-bg-color) !important;
    }

    &.fc-day-other {
      .fc-daygrid-day-number {
        color: var(--ax-text-tertiary, #9ca3af);
      }
    }
  }

  .fc-daygrid-day-top {
    padding: 0.5rem;
  }

  .fc-daygrid-day-number {
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--ax-text-default);
    border-radius: 0.375rem;
  }

  // Today's date number highlight
  .fc-day-today .fc-daygrid-day-number {
    background-color: var(--ax-primary-default);
    color: #ffffff;
  }

  // ==========================================================================
  // Events
  // ==========================================================================

  .fc-event {
    border-radius: 0.375rem;
    border: none;
    padding: 0.125rem 0.375rem;
    font-size: 0.8125rem;
    font-weight: 500;
    cursor: pointer;
    transition:
      transform 150ms ease,
      box-shadow 150ms ease;

    &:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    &:focus {
      outline: none;
      box-shadow:
        0 0 0 2px var(--ax-background-default),
        0 0 0 4px var(--ax-primary-default);
    }
  }

  .fc-event-main {
    padding: 0.125rem 0;
  }

  .fc-event-title {
    font-weight: 500;
  }

  .fc-event-time {
    font-weight: 400;
    opacity: 0.9;
  }

  // Day grid events
  .fc-daygrid-event {
    margin: 0.125rem 0.25rem;
  }

  .fc-daygrid-event-dot {
    border-color: var(--fc-event-border-color);
  }

  // More events link
  .fc-daygrid-more-link {
    color: var(--ax-primary-default);
    font-weight: 500;
    font-size: 0.75rem;
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;

    &:hover {
      background-color: var(--ax-primary-subtle);
    }
  }

  // ==========================================================================
  // Time Grid (Week/Day View)
  // ==========================================================================

  .fc-timegrid-slot {
    height: 3rem;
  }

  .fc-timegrid-slot-label {
    font-size: 0.75rem;
    color: var(--ax-text-tertiary);
  }

  .fc-timegrid-slot-lane {
    transition: background-color 150ms ease;

    &:hover {
      background-color: var(--ax-background-subtle);
    }
  }

  .fc-timegrid-event {
    border-radius: 0.375rem;
    border-left-width: 3px;
  }

  .fc-timegrid-now-indicator-line {
    border-color: var(--ax-danger-default, #ef4444);
    border-width: 2px;
  }

  .fc-timegrid-now-indicator-arrow {
    border-color: var(--ax-danger-default, #ef4444);
    border-top-color: transparent;
    border-bottom-color: transparent;
  }

  // ==========================================================================
  // List View
  // ==========================================================================

  .fc-list {
    border-radius: 0.5rem;
    overflow: hidden;
  }

  .fc-list-day-cushion {
    background-color: var(--ax-background-subtle);
    padding: 0.75rem 1rem;
  }

  .fc-list-day-text,
  .fc-list-day-side-text {
    font-weight: 600;
    color: var(--ax-text-default);
  }

  .fc-list-event {
    cursor: pointer;

    &:hover td {
      background-color: var(--fc-list-event-hover-bg-color);
    }
  }

  .fc-list-event-dot {
    border-color: var(--fc-event-border-color);
  }

  .fc-list-event-time {
    color: var(--ax-text-secondary);
  }

  .fc-list-event-title {
    font-weight: 500;
  }

  .fc-list-empty {
    background-color: var(--ax-background-subtle);

    .fc-list-empty-cushion {
      color: var(--ax-text-secondary);
      font-style: normal;
    }
  }

  // ==========================================================================
  // Popover (More Events)
  // ==========================================================================

  .fc-popover {
    border-radius: 0.5rem;
    border-color: var(--ax-border-default);
    box-shadow:
      0 10px 15px -3px rgba(0, 0, 0, 0.1),
      0 4px 6px -2px rgba(0, 0, 0, 0.05);
    overflow: hidden;
  }

  .fc-popover-header {
    background-color: var(--ax-background-subtle);
    padding: 0.75rem 1rem;
    font-weight: 600;
  }

  .fc-popover-body {
    padding: 0.5rem;
  }

  // ==========================================================================
  // Drag & Drop / Selection
  // ==========================================================================

  .fc-highlight {
    background-color: var(--fc-highlight-color);
  }

  .fc-event-dragging {
    opacity: 0.75;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }

  .fc-event-resizing {
    opacity: 0.75;
  }

  // ==========================================================================
  // Responsive Adjustments
  // ==========================================================================

  @media (max-width: 768px) {
    .fc-toolbar {
      flex-direction: column;
      align-items: stretch;

      .fc-toolbar-chunk {
        display: flex;
        justify-content: center;
      }
    }

    .fc-toolbar-title {
      font-size: 1.125rem;
      text-align: center;
      margin: 0.5rem 0;
    }

    .fc-button {
      padding: 0.375rem 0.75rem;
      font-size: 0.8125rem;
    }

    .fc-daygrid-day-number {
      font-size: 0.8125rem;
    }

    .fc-col-header-cell {
      font-size: 0.6875rem;
    }
  }
}

// =============================================================================
// Event Color Variants
// =============================================================================

// Success (green) events
.fc-event-success,
.fc-event[data-color='success'] {
  --fc-event-bg-color: var(--ax-success-default, #10b981);
  --fc-event-border-color: var(--ax-success-default, #10b981);
  background-color: var(--ax-success-default, #10b981);
  border-color: var(--ax-success-default, #10b981);
}

// Warning (amber) events
.fc-event-warning,
.fc-event[data-color='warning'] {
  --fc-event-bg-color: var(--ax-warning-default, #f59e0b);
  --fc-event-border-color: var(--ax-warning-default, #f59e0b);
  background-color: var(--ax-warning-default, #f59e0b);
  border-color: var(--ax-warning-default, #f59e0b);
}

// Danger (red) events
.fc-event-danger,
.fc-event[data-color='danger'] {
  --fc-event-bg-color: var(--ax-danger-default, #ef4444);
  --fc-event-border-color: var(--ax-danger-default, #ef4444);
  background-color: var(--ax-danger-default, #ef4444);
  border-color: var(--ax-danger-default, #ef4444);
}

// Info (blue) events
.fc-event-info,
.fc-event[data-color='info'] {
  --fc-event-bg-color: var(--ax-info-default, #3b82f6);
  --fc-event-border-color: var(--ax-info-default, #3b82f6);
  background-color: var(--ax-info-default, #3b82f6);
  border-color: var(--ax-info-default, #3b82f6);
}

// Secondary (gray) events
.fc-event-secondary,
.fc-event[data-color='secondary'] {
  --fc-event-bg-color: var(--ax-text-secondary, #6b7280);
  --fc-event-border-color: var(--ax-text-secondary, #6b7280);
  background-color: var(--ax-text-secondary, #6b7280);
  border-color: var(--ax-text-secondary, #6b7280);
}
