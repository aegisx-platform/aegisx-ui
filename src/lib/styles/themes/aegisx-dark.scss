/* ============================================================
   AegisX Dark Theme - Angular Material 20 (Material Design 3)
   Palette: Azure Blue (mat.$azure-palette)
   Standardized across light and dark themes for brand consistency
   ============================================================ */

@use '@angular/material' as mat;
@use './_aegisx-tokens' as *;
@use './material-overrides' as *;
@use '../components/form-utilities' as *;
@use '../components/dialog-shared'; // Dialog shared styles with theme support

/* ============================================================
   Theme Configuration
   Using Material's built-in blue palette (closest to Tremor)
   ============================================================ */

// ===== Create Dark Theme (Material 3) =====
// Note: M3 only supports primary and tertiary in color config
// accent and warn buttons use Material's default color system
$aegisx-dark-theme: mat.define-theme(
  (
    color: (
      theme-type: dark,
      primary: mat.$azure-palette,
      // For color="primary" buttons (blue)
      tertiary: mat.$violet-palette,
      // For additional components (purple)
    ),
    typography: (
      plain-family:
        'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',
      brand-family:
        'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',
    ),
    density: (
      scale: -1,
    ),
  )
);

// ===== Apply Theme =====
:root {
  @include mat.all-component-themes($aegisx-dark-theme);

  // Enable backwards compatibility for Material 2 color variants (accent, warn)
  @include mat.color-variants-backwards-compatibility($aegisx-dark-theme);

  /* Fix: Filled buttons with color attributes using Material 3 mixins */
  .mat-mdc-raised-button.mat-primary {
    @include mat.button-color($aegisx-dark-theme, $color-variant: primary);
  }
  .mat-mdc-raised-button.mat-accent {
    @include mat.button-color($aegisx-dark-theme, $color-variant: tertiary);
  }
  .mat-mdc-raised-button.mat-warn {
    @include mat.button-color($aegisx-dark-theme, $color-variant: error);
  }

  /* Material Design 3 System Colors - Dark Mode */
  --md-sys-color-background: #111827;
  --md-sys-color-on-background: #f9fafb;
  --md-sys-color-surface: #1f2937;
  --md-sys-color-on-surface: #e5e7eb;
  --md-sys-color-surface-container-lowest: #111827;
  --md-sys-color-surface-container-low: #1c2536;
  --md-sys-color-surface-container: #1f2937;
  --md-sys-color-surface-container-high: #374151;
  --md-sys-color-surface-container-highest: #4b5563;

  /* Material 3 Card Color Overrides - Dark Mode */
  /* Raised/Elevated Card */
  --mat-card-elevated-container-color: var(--ax-background-subtle);
  --mdc-elevated-card-container-color: var(--ax-background-subtle);

  /* Outlined Card */
  --mat-card-outlined-container-color: var(--ax-background-default);
  --mdc-outlined-card-container-color: var(--ax-background-default);

  /* Filled Card */
  --mat-card-filled-container-color: var(--ax-background-muted);
  --mdc-filled-card-container-color: var(--ax-background-muted);

  /* Generic card container */
  --mat-card-container-color: var(--ax-background-subtle);

  /* Card Border Color - Use AegisX border token */
  --mat-card-outlined-outline-color: var(--ax-border-default);
  --mdc-outlined-card-outline-color: var(--ax-border-default);

  /* Button Text Color - Use AegisX text tokens */
  --mat-button-outlined-label-text-color: var(--ax-text-emphasis);
  --mdc-outlined-button-label-text-color: var(--ax-text-emphasis);

  /* Button Outline/Border Color - Use AegisX border tokens */
  --mat-button-outlined-outline-color: var(--ax-border-default);
  --mdc-outlined-button-outline-color: var(--ax-border-default);

  /* Button Shape - Override all button border-radius to --ax-radius-sm (4px) */
  /* Regular buttons - Material variants */
  --mat-button-filled-container-shape: var(--ax-radius-sm);
  --mat-button-outlined-container-shape: var(--ax-radius-sm);
  --mat-button-text-container-shape: var(--ax-radius-sm);
  --mat-button-tonal-container-shape: var(--ax-radius-sm);
  --mat-button-protected-container-shape: var(--ax-radius-sm);

  /* Regular buttons - MDC variants */
  --mdc-filled-button-container-shape: var(--ax-radius-sm);
  --mdc-outlined-button-container-shape: var(--ax-radius-sm);
  --mdc-text-button-container-shape: var(--ax-radius-sm);
  --mdc-protected-button-container-shape: var(--ax-radius-sm);

  /* FAB buttons - Material variants */
  --mat-fab-container-shape: var(--ax-radius-sm);
  --mat-fab-small-container-shape: var(--ax-radius-sm);
  --mat-fab-extended-container-shape: var(--ax-radius-sm);

  /* FAB buttons - MDC variants */
  --mdc-fab-container-shape: var(--ax-radius-sm);
  --mdc-fab-small-container-shape: var(--ax-radius-sm);
  --mdc-extended-fab-container-shape: var(--ax-radius-sm);

  /* Icon buttons - Material variants */
  --mat-icon-button-container-shape: var(--ax-radius-sm);

  /* Icon buttons - MDC variants */
  --mdc-icon-button-container-shape: var(--ax-radius-sm);
}

/* ============================================================
   AegisX Design Tokens (Custom Properties) - Dark Mode
   See _aegisx-tokens.scss for token definitions
   ============================================================ */

// Include AegisX dark theme tokens
@include aegisx-dark-theme;

/* ============================================================
   Dark Theme Specific Overrides
   (Add any dark-theme-only customizations here)
   ============================================================ */
