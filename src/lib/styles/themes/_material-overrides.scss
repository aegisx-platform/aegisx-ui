@use '@angular/material' as mat;

/* ============================================
   Material Component Overrides
   Customize Material components to match AegisX's minimal aesthetic
   Uses both Material Design 3 tokens and AegisX custom tokens
   ============================================ */

// ===== Cards - Tremor Style (minimal elevation, subtle borders) =====
@include mat.card-overrides(
  (
    // Outlined card styling (with border)
    elevated-container-color: var(--aegisx-background-default),
    elevated-container-shape: var(--aegisx-radius-md),
    elevated-container-elevation: var(--aegisx-shadow-sm),
    outlined-container-color: var(--aegisx-background-default),
    outlined-container-shape: var(--aegisx-radius-md),
    outlined-outline-color: var(--aegisx-border-default),
    outlined-outline-width: 1px,
    outlined-container-elevation: var(--aegisx-shadow-sm)
  )
);

// Card header border and content padding (using AegisX spacing tokens)
.mat-mdc-card {
  .mat-mdc-card-header {
    border-bottom: 1px solid var(--aegisx-border-default);
    padding-bottom: var(--aegisx-spacing-md) !important; // 16px
  }

  .mat-mdc-card-content {
    padding-top: var(--aegisx-spacing-md) !important; // 16px
  }
}

// ===== Buttons - Tremor Style (flatter, cleaner) =====
// FAB buttons
@include mat.fab-overrides(
  (
    // Shape
    container-shape: var(--aegisx-radius-md),
    small-container-shape: var(--aegisx-radius-md),
    // Shadows
    container-elevation-shadow: var(--aegisx-shadow-md),
    hover-container-elevation-shadow: var(--aegisx-shadow-lg),
    small-container-elevation-shadow: var(--aegisx-shadow-md),
    small-hover-container-elevation-shadow: var(--aegisx-shadow-lg)
  )
);

// Icon buttons
@include mat.icon-button-overrides(
  (
    // Shape
    container-shape: var(--aegisx-radius-md)
  )
);

// Icons
@include mat.icon-overrides(
  (
    // Use Tremor content color for icons
    color: var(--aegisx-text-strong)
  )
);

// ===== Form Fields - Tremor Style (clean borders) =====
.mat-mdc-form-field {
  // Outlined style
  .mat-mdc-text-field-wrapper {
    .mat-mdc-form-field-flex {
      .mdc-notched-outline {
        .mdc-notched-outline__leading,
        .mdc-notched-outline__notch,
        .mdc-notched-outline__trailing {
          border-color: var(--aegisx-border-default) !important;
        }
      }
    }
  }

  // Focus state
  &.mat-focused {
    .mdc-notched-outline {
      .mdc-notched-outline__leading,
      .mdc-notched-outline__notch,
      .mdc-notched-outline__trailing {
        border-color: var(--aegisx-brand-default) !important;
        border-width: 2px !important;
      }
    }
  }

  // Error state
  &.mat-form-field-invalid {
    .mdc-notched-outline {
      .mdc-notched-outline__leading,
      .mdc-notched-outline__notch,
      .mdc-notched-outline__trailing {
        border-color: var(--md-sys-color-error) !important;
      }
    }
  }
}

// Fix faint left border on form field notch
.mat-mdc-form-field .mdc-notched-outline__notch {
  border-left: none !important;
}

// Input elements
.mat-mdc-input-element {
  color: var(--aegisx-text-strong) !important;

  &::placeholder {
    color: var(--aegisx-text-subtle) !important;
  }
}

// ===== Tables - Minimal Clean Style =====
@include mat.table-overrides(
  (
    // Background - Pure white/default (no gray backgrounds)
    background-color: transparent,
    // Borders - Ultra subtle (#eeeeee)
    row-item-outline-color: #eeeeee,
    row-item-outline-width: 1px,
    // Text colors
    header-headline-color: #111827,
    row-item-label-text-color: #4b5563
  )
);

// Force override Material table CSS variables
:root {
  --mat-table-row-item-outline-color: #eeeeee !important;
  --mat-table-background-color: transparent !important;
  --mat-table-row-item-outline-width: 1px !important;
}

// Additional table styling - Minimal Material Design (subtle hierarchy)
.mat-mdc-table {
  border-radius: 0;
  overflow: auto;
  border: none;
  background: transparent !important;
  box-shadow: none !important; // Remove elevation shadow

  // Header - Pure white with subtle border
  .mat-mdc-header-row {
    background: transparent !important; // Pure white
    border-bottom: 1px solid #eeeeee; // Ultra subtle divider

    .mat-mdc-header-cell {
      font-weight: 600;
      font-size: 0.875rem;
      color: #111827;
      padding: 0.875rem 1rem;
      text-align: left;
      background: transparent !important;
    }
  }

  // Rows - Pure white, NO backgrounds, NO hover
  .mat-mdc-row {
    background: transparent !important;
    background-color: transparent !important;

    // Force remove zebra striping
    &:nth-child(odd),
    &:nth-child(even) {
      background: transparent !important;
      background-color: transparent !important;
    }

    // Remove hover effect
    &:hover {
      background: transparent !important;
      background-color: transparent !important;
    }

    .mat-mdc-cell {
      padding: 1rem; // p-4
      font-size: 0.875rem; // text-sm
      color: #4b5563; // Tremor: text-gray-600
      background: transparent !important;
      background-color: transparent !important;
    }
  }

  // Remove ALL vertical borders (Tremor uses divide-y only)
  .mat-mdc-cell,
  .mat-mdc-header-cell {
    border-right: none;
    border-left: none;
  }

  // Horizontal dividers between rows - Ultra subtle
  .mat-mdc-row {
    border-bottom: 1px solid #eeeeee; // Ultra subtle: lighter than gray-200

    &:last-child {
      border-bottom: none;
    }
  }
}

// Remove table elevation shadows
.mat-mdc-table,
.mat-elevation-z8 {
  box-shadow: none !important;
}

// Paginator styling - Clean white background
.mat-mdc-paginator {
  background-color: white !important;
  border-top: 1px solid #eeeeee;
}

// ===== Chips - Minimal Style (Ultra Subtle Borders) =====
@include mat.chips-overrides(
  (
    // Outline (border) styling - Ultra subtle
    outline-color: #eeeeee,
    outline-width: 1px,

    // Container colors
    elevated-container-color: transparent,
    elevated-selected-container-color: var(--aegisx-brand-faint),
    elevated-disabled-container-color: var(--aegisx-background-subtle),
    // Label text colors
    label-text-color: var(--aegisx-text-strong),
    selected-label-text-color: var(--aegisx-brand-emphasis),
    disabled-label-text-color: var(--aegisx-text-subtle),
    // Disabled outline - Ultra subtle
    disabled-outline-color: #eeeeee,
    // Shape (border radius)
    container-shape-radius: var(--aegisx-radius-md),
    // Selected outline width
    flat-selected-outline-width: 1px
  )
);

// ===== Dialogs - Tremor Style =====
.mat-mdc-dialog-container {
  .mdc-dialog__surface {
    border-radius: var(--aegisx-radius-lg) !important;
    border: 1px solid var(--aegisx-border-default) !important;
    box-shadow: var(--aegisx-shadow-lg) !important;
    background: var(--aegisx-background-default) !important;
  }
}

// ===== Menus - Tremor Style =====
.mat-mdc-menu-panel {
  border: 1px solid var(--aegisx-border-default) !important;
  border-radius: var(--aegisx-radius-md) !important;
  box-shadow: var(--aegisx-shadow-md) !important;
  background: var(--aegisx-background-default) !important;
}

.mat-mdc-menu-item {
  &:hover:not([disabled]) {
    background: var(--aegisx-background-subtle) !important;
  }
}

// ===== Tabs - Tremor Style =====
.mat-mdc-tab-group {
  .mat-mdc-tab-header {
    border-bottom: 1px solid var(--aegisx-border-default);
  }

  .mat-mdc-tab {
    &:hover:not(.mat-mdc-tab-disabled) {
      background: var(--aegisx-background-subtle);
    }
  }

  .mat-mdc-tab-body-content {
    padding: var(--aegisx-spacing-lg);
  }
}

// ===== Expansion Panels - Tremor Style =====
.mat-expansion-panel {
  border: 1px solid var(--aegisx-border-default) !important;
  border-radius: var(--aegisx-radius-md) !important;
  box-shadow: none !important;
  background: var(--aegisx-background-default) !important;

  & + .mat-expansion-panel {
    margin-top: var(--aegisx-spacing-sm);
  }

  &:not(.mat-expanded) {
    .mat-expansion-panel-header:hover {
      background: var(--aegisx-background-subtle) !important;
    }
  }
}

// ===== Progress Bars - Minimal =====
.mat-mdc-progress-bar {
  border-radius: var(--aegisx-radius-sm);
  overflow: hidden;
}

// ===== Sliders - Clean style =====
.mat-mdc-slider {
  .mdc-slider__track {
    border-radius: var(--aegisx-radius-sm);
  }
}

// ===== Toolbar - Tremor Style =====
.mat-toolbar {
  border-bottom: 1px solid var(--aegisx-border-default);
  box-shadow: var(--aegisx-shadow-sm);
}

// ===== Lists - Clean borders =====
.mat-mdc-list {
  .mat-mdc-list-item {
    border-bottom: 1px solid var(--aegisx-border-default);

    &:last-child {
      border-bottom: none;
    }

    &:hover:not([disabled]) {
      background: var(--aegisx-background-subtle);
    }
  }
}

// ===== Badges - Tremor Style =====
.mat-badge-content {
  border-radius: var(--aegisx-radius-sm);
  box-shadow: var(--aegisx-shadow-sm);
}

// ===== Tooltips - Minimal =====
.mat-mdc-tooltip {
  border-radius: var(--aegisx-radius-sm);
  box-shadow: var(--aegisx-shadow-md);
}

// ===== Snackbars - Tremor Style =====
.mat-mdc-snack-bar-container {
  border-radius: var(--aegisx-radius-md) !important;
  border: 1px solid var(--aegisx-border-default) !important;
  box-shadow: var(--aegisx-shadow-lg) !important;
}

// ===== Button Toggle - Tremor Style =====
.mat-button-toggle-group {
  box-shadow: none !important;
  border: 1px solid var(--aegisx-border-default) !important;
  border-radius: var(--aegisx-radius-md) !important;
  overflow: hidden;

  .mat-button-toggle {
    color: var(--aegisx-text-body);

    // Clean divider between buttons
    &:not(:last-child) {
      border-right: 1px solid var(--aegisx-border-default) !important;
    }

    // Remove Material's default borders except the divider
    border-top: none !important;
    border-bottom: none !important;
    border-left: none !important;
  }
}
