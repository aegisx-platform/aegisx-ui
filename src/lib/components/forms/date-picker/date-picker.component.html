<div class="ax-date-picker-container">
  <!-- Label -->
  @if (label) {
    <label class="ax-date-picker-label">
      {{ label }}
      @if (required) {
        <span class="ax-date-picker-required">*</span>
      }
    </label>
  }

  <!-- Input Wrapper -->
  <div [class]="wrapperClasses" (click)="toggleDropdown()">
    <!-- Display Value -->
    <div class="ax-date-picker-display">
      @if (displayValue) {
        <span class="ax-date-picker-value">{{ displayValue }}</span>
      } @else {
        <span class="ax-date-picker-placeholder">{{ placeholder }}</span>
      }
    </div>

    <!-- Icons -->
    <div class="ax-date-picker-icons">
      <!-- Clear Button -->
      @if (displayValue && !disabled) {
        <button
          type="button"
          class="ax-date-picker-clear"
          (click)="clearValue(); $event.stopPropagation()"
          tabindex="-1"
        >
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path
              d="M12 4L4 12M4 4L12 12"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button>
      }

      <!-- Calendar Icon -->
      <div class="ax-date-picker-icon">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path
            d="M6 2V4M14 2V4M3 8H17M5 4H15C16.1046 4 17 4.89543 17 6V16C17 17.1046 16.1046 18 15 18H5C3.89543 18 3 17.1046 3 16V6C3 4.89543 3.89543 4 5 4Z"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </div>
    </div>
  </div>

  <!-- Calendar Dropdown -->
  @if (isOpen) {
    <div class="ax-date-picker-dropdown">
      <!-- Header -->
      <div class="ax-date-picker-header">
        <button
          type="button"
          class="ax-date-picker-nav-btn"
          (click)="previousMonth()"
        >
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path
              d="M12.5 15L7.5 10L12.5 5"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
        <div class="ax-date-picker-month-year">{{ currentMonthYear }}</div>
        <button
          type="button"
          class="ax-date-picker-nav-btn"
          (click)="nextMonth()"
        >
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path
              d="M7.5 5L12.5 10L7.5 15"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
      </div>

      <!-- Week Days -->
      <div class="ax-date-picker-weekdays">
        @for (day of weekDays; track day) {
          <div class="ax-date-picker-weekday">{{ day }}</div>
        }
      </div>

      <!-- Calendar Grid -->
      <div class="ax-date-picker-days">
        @for (day of calendarDays; track day.date) {
          <button
            type="button"
            class="ax-date-picker-day"
            [class.ax-date-picker-day-other-month]="!day.isCurrentMonth"
            [class.ax-date-picker-day-today]="day.isToday"
            [class.ax-date-picker-day-selected]="day.isSelected"
            [class.ax-date-picker-day-disabled]="day.isDisabled"
            [disabled]="day.isDisabled"
            (click)="selectDate(day)"
          >
            {{ day.day }}
          </button>
        }
      </div>
    </div>
  }

  <!-- Helper Text / Error Message -->
  @if (displayMessage) {
    <div class="ax-date-picker-message">
      {{ displayMessage }}
    </div>
  }
</div>
