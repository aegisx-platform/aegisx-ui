<div
  class="ax-segmented-progress"
  [class.ax-segmented-progress--with-legend-right]="legendPosition === 'right'"
>
  <!-- Progress Bar -->
  <div [ngClass]="getProgressClasses()">
    <div
      *ngFor="let segment of segments"
      class="ax-segmented-progress__segment"
      [ngStyle]="getSegmentStyle(segment)"
      [style.margin-right.px]="gap"
      [attr.aria-label]="segment.label + ': ' + segment.percentage + '%'"
    ></div>
  </div>

  <!-- Legend -->
  <div *ngIf="legendPosition !== 'none'" [ngClass]="getLegendClasses()">
    <div
      *ngFor="let segment of segments"
      class="ax-segmented-progress__legend-item"
    >
      <!-- Color Indicator -->
      <div
        class="ax-segmented-progress__legend-color"
        [style.backgroundColor]="segment.color"
      ></div>

      <!-- Label & Values -->
      <div class="ax-segmented-progress__legend-text">
        <span
          *ngIf="showPercentage"
          class="ax-segmented-progress__legend-percentage"
        >
          {{ segment.percentage }}%
        </span>
        <span class="ax-segmented-progress__legend-label">
          {{ segment.label }}
        </span>
        <span *ngIf="showValue" class="ax-segmented-progress__legend-value">
          ({{ segment.value }})
        </span>
      </div>
    </div>
  </div>
</div>
