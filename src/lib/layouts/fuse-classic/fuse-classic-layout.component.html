<!-- Loading bar -->
<fuse-loading-bar></fuse-loading-bar>

<!-- Navigation -->
<ax-simple-vertical-navigation
    class="dark bg-gray-900 print:hidden"
    [mode]="isScreenSmall ? 'over' : 'side'"
    [navigation]="navigation"
    [opened]="!isScreenSmall"
>
    <!-- Navigation header -->
    <div slot="navigationHeader">
        @if (navigationHeader) {
            <ng-container *ngTemplateOutlet="navigationHeader"></ng-container>
        } @else {
            <!-- Default logo -->
            <div class="flex h-20 items-center p-6 pb-0">
                <span class="text-2xl font-bold text-white">{{ appName }}</span>
                @if (appVersion) {
                    <span class="ml-2 text-xs px-2 py-1 bg-primary-600 text-white rounded">
                        {{ appVersion }}
                    </span>
                }
            </div>
        }
    </div>
</ax-simple-vertical-navigation>

<!-- Main Content Wrapper -->
<div class="flex w-full min-w-0 flex-auto flex-col" [class.dark]="isDarkMode">
    <!-- Header/Toolbar -->
    <div class="bg-card relative flex h-16 w-full flex-0 items-center px-4 md:px-6 print:hidden">
        <!-- Navigation toggle button -->
        <button 
            mat-icon-button 
            (click)="toggleNavigation('mainNavigation')"
            class="mr-2"
        >
            <mat-icon [svgIcon]="'heroicons_outline:bars-3'"></mat-icon>
        </button>
        
        <!-- Toolbar Title -->
        <div class="flex items-center">
            @if (toolbarTitle) {
                <ng-container *ngTemplateOutlet="toolbarTitle"></ng-container>
            }
        </div>

        <!-- Toolbar Actions -->
        <div class="ml-auto flex items-center">
            @if (toolbarActions) {
                <ng-container *ngTemplateOutlet="toolbarActions"></ng-container>
            }
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="flex flex-auto flex-col overflow-hidden">
        <router-outlet></router-outlet>
    </div>

    <!-- Footer -->
    @if (showFooter) {
        <div class="bg-card relative flex h-14 w-full flex-0 items-center justify-start px-4 md:px-6 print:hidden">
            @if (footerContent) {
                <ng-container *ngTemplateOutlet="footerContent"></ng-container>
            } @else {
                <span class="text-secondary font-medium">
                    {{ appName }} &copy; {{ currentYear }}
                </span>
            }
        </div>
    }
</div>