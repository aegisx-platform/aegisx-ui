#!/usr/bin/env sh

if [ "$SKIP_HOOKS" = "1" ]; then
    exit 0
fi

# Check for forbidden BREAKING CHANGE patterns
if grep -iE "BREAKING CHANGE|BREAKING CHANGES|BREAKING:" "$1"; then
    echo "ðŸš¨ ERROR: Forbidden BREAKING CHANGE pattern detected!"
    echo "This will trigger v2.x.x release which is not allowed."
    echo ""
    echo "Use these safe alternatives:"
    echo "  IMPORTANT: for significant changes"
    echo "  MAJOR UPDATE: for substantial features"  
    echo "  SIGNIFICANT: for notable modifications"
    echo "  API CHANGE: for API modifications"
    echo "  MIGRATION: for schema/config changes"
    echo "  DEPRECATED: for deprecation notices"
    exit 1
fi

npx --no -- commitlint --edit "$1"
