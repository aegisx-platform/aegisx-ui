/* You can add global styles to this file, and also import other style files */

/* Import Tailwind CSS */
@tailwind base;

/* Fuse Base Styles Layer */
@layer base {
  * {
    /* Text rendering */
    text-rendering: optimizeLegibility;
    -o-text-rendering: optimizeLegibility;
    -ms-text-rendering: optimizeLegibility;
    -moz-text-rendering: optimizeLegibility;
    -webkit-text-rendering: optimizeLegibility;
    -webkit-tap-highlight-color: transparent;

    /* Remove the focus ring */
    &:focus {
      outline: none !important;
    }
  }

  /* HTML and Body default styles */
  html,
  body {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    width: 100%;
    min-height: 100%;
    -webkit-font-smoothing: auto;
    -moz-osx-font-smoothing: auto;
  }

  /* Font size */
  html {
    font-size: 16px;
  }

  body {
    font-size: 0.875rem;
    font-feature-settings: 'salt';
  }

  /* Better spacing and border for horizontal rule */
  hr {
    margin: 32px 0;
    border-bottom-width: 1px;
  }

  /* Make images and videos to take up all the available space */
  img {
    width: 100%;
    vertical-align: top;
  }

  /* Fix: Disabled placeholder color is too faded on Safari */
  input[disabled] {
    opacity: 1;
    -webkit-text-fill-color: currentColor;
  }

  /* Set the background and foreground colors */
  body,
  .dark,
  .light {
    @apply text-default bg-default #{'!important'};
  }

  /* Set the border color - exclude Material components including notch and dialog */
  body
    *:not(.mdc-notched-outline__leading):not(.mdc-notched-outline__notch):not(
      .mdc-notched-outline__trailing
    ):not(.mat-mdc-form-field *):not(.mdc-notched-outline):not(
      .mat-mdc-dialog-container
    ):not(.mat-mdc-dialog-surface),
  body
    *:not(.mat-mdc-form-field *):not(.mdc-notched-outline *):not(
      .mat-mdc-dialog-container *
    ):not(.mat-mdc-dialog-surface *)::before,
  body
    *:not(.mat-mdc-form-field *):not(.mdc-notched-outline *):not(
      .mat-mdc-dialog-container *
    ):not(.mat-mdc-dialog-surface *)::after {
    --tw-border-opacity: 1 !important;
    border-color: rgba(var(--fuse-border-rgb), var(--tw-border-opacity));

    .dark & {
      --tw-border-opacity: 0.12 !important;
    }
  }

  /* Style scrollbars on platforms other than MacOS and iOS */
  @media only screen and (min-width: 960px) {
    body:not(.os-mac) {
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
        background-color: rgba(0, 0, 0, 0);
      }

      ::-webkit-scrollbar:hover {
        width: 8px;
        height: 8px;
        background-color: rgba(0, 0, 0, 0.06);
      }

      ::-webkit-scrollbar-thumb {
        border: 2px solid transparent;
        border-radius: 20px;
        box-shadow: inset 0 0 0 20px rgba(0, 0, 0, 0.24);
      }

      ::-webkit-scrollbar-thumb:active {
        border-radius: 20px;
        box-shadow: inset 0 0 0 20px rgba(0, 0, 0, 0.37);
      }

      &.dark {
        ::-webkit-scrollbar-thumb {
          box-shadow: inset 0 0 0 20px rgba(255, 255, 255, 0.24);
        }

        ::-webkit-scrollbar-thumb:active {
          box-shadow: inset 0 0 0 20px rgba(255, 255, 255, 0.37);
        }
      }
    }
  }

  /* Set the foreground color for disabled elements */
  [disabled] {
    @apply text-disabled #{'!important'};
  }

  /* Print styles */
  @media print {
    /* Make the base font size smaller for print so everything is scaled nicely */
    html {
      font-size: 12px !important;
    }

    body,
    .dark,
    .light {
      background: none !important;
    }
  }
}

@tailwind components;

/* Tremor-inspired Components Layer */
@layer components {
  /* Tremor Card */
  .tremor-card {
    @apply bg-white dark:bg-gray-800 border border-gray-200
           dark:border-gray-700 rounded-lg shadow-sm p-6;
  }

  .tremor-card-header {
    @apply mb-4 pb-4 border-b border-gray-200 dark:border-gray-700;
  }

  .tremor-card-title {
    @apply text-lg font-semibold text-gray-900 dark:text-gray-100;
  }

  .tremor-card-subtitle {
    @apply text-sm text-gray-500 dark:text-gray-400 mt-1;
  }

  .tremor-card-content {
    @apply text-gray-700 dark:text-gray-300;
  }

  /* Tremor Badge */
  .tremor-badge {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium;
  }

  .tremor-badge-blue {
    @apply bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300;
  }

  .tremor-badge-slate {
    @apply bg-slate-50 text-slate-700 dark:bg-slate-900/30 dark:text-slate-300;
  }

  .tremor-badge-red {
    @apply bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300;
  }

  .tremor-badge-green {
    @apply bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-300;
  }

  .tremor-badge-yellow {
    @apply bg-yellow-50 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300;
  }

  /* Tremor Tab Navigation */
  .tremor-tabs {
    @apply flex border-b border-gray-200 dark:border-gray-700 mb-6;
  }

  .tremor-tab {
    @apply px-4 py-3 text-sm font-medium text-gray-600 dark:text-gray-400
           hover:text-gray-900 dark:hover:text-gray-100
           hover:border-gray-300 dark:hover:border-gray-600
           border-b-2 border-transparent transition-colors cursor-pointer;
  }

  .tremor-tab-active {
    @apply text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400;
  }

  /* Tremor Empty State */
  .tremor-empty-state {
    @apply flex flex-col items-center justify-center py-12 px-6 text-center;
  }

  .tremor-empty-state-icon {
    @apply text-gray-400 dark:text-gray-600 mb-4;
  }

  .tremor-empty-state-title {
    @apply text-gray-900 dark:text-gray-100 font-medium mb-2;
  }

  .tremor-empty-state-description {
    @apply text-gray-500 dark:text-gray-400 text-sm;
  }

  /* Tremor Button Variants (for Material buttons) */
  .tremor-button-primary {
    @apply bg-blue-600 hover:bg-blue-700 text-white;
  }

  .tremor-button-secondary {
    @apply bg-gray-100 hover:bg-gray-200 text-gray-900
           dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-100;
  }

  .tremor-button-danger {
    @apply bg-red-600 hover:bg-red-700 text-white;
  }

  /* Tremor Input Wrapper (for Material form fields) */
  .tremor-input-wrapper {
    @apply w-full;
  }

  /* Tremor Files Grid */
  .tremor-files-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4;
  }

  .tremor-file-card {
    @apply flex gap-4 p-4 bg-white dark:bg-gray-800
           border border-gray-200 dark:border-gray-700
           rounded-lg shadow-sm hover:shadow-md
           transition-all duration-200 cursor-pointer;
  }

  .tremor-file-card:hover {
    @apply -translate-y-0.5;
  }

  .tremor-file-icon {
    @apply flex-shrink-0 text-gray-400 dark:text-gray-500;
  }

  .tremor-file-info {
    @apply flex-1 min-w-0;
  }

  .tremor-file-name {
    @apply text-sm font-medium text-gray-900 dark:text-gray-100
           truncate mb-1;
  }

  .tremor-file-meta {
    @apply text-xs text-gray-500 dark:text-gray-400;
  }

  .tremor-file-actions {
    @apply flex gap-1 mt-2;
  }

  /* Tremor Section */
  .tremor-section {
    @apply mb-8;
  }

  .tremor-section-title {
    @apply text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4;
  }

  /* Tremor Warning Box */
  .tremor-warning {
    @apply bg-yellow-50 dark:bg-yellow-900/20
           border-l-4 border-yellow-400
           p-4 rounded-r-lg;
  }

  .tremor-warning-icon {
    @apply text-yellow-600 dark:text-yellow-400;
  }

  .tremor-warning-text {
    @apply text-yellow-800 dark:text-yellow-200 text-sm;
  }
}

@tailwind utilities;

/* Material Icons CSS (font loaded by aegisx-ui IconService) */
.mat-icon {
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  font-family: 'Material Icons', 'Material Icons Outlined' !important;
  font-feature-settings: 'liga' 1;
  font-display: swap;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Import Angular Material Theme BEFORE any custom styles */
@import '@angular/material/prebuilt-themes/indigo-pink.css';

/* Import Material Theme Configuration */
@import 'styles/material-theme-config';

/* Fix Material outline input border issue with Tailwind */
/* The issue is Tailwind sets border-style: solid globally, causing the notch to show borders */
.mdc-notched-outline__notch {
  border-right: none !important;
  border-left: none !important;
}

/* Material Icons fonts now loaded by aegisx-ui IconService */

/* Material Dialog Global Fixes */
.mat-mdc-dialog-container {
  --mdc-dialog-container-elevation: 0 8px 16px rgba(0, 0, 0, 0.12);
  border-radius: 28px !important;
}

.mat-mdc-dialog-surface {
  border-radius: 28px !important;
}

.mat-mdc-dialog-title {
  font-size: 1.25rem !important;
  font-weight: 600 !important;
  line-height: 1.5 !important;
  padding: 24px 24px 0 24px !important;
  margin: 0 !important;
}

.mat-mdc-dialog-content {
  padding: 20px 24px !important;
  margin: 0 !important;
}

.mat-mdc-dialog-actions {
  padding: 8px 24px 24px 24px !important;
  margin: 0 !important;
  min-height: auto !important;
}

/* Fix dialog icons */
.mat-mdc-dialog-title mat-icon,
.mat-mdc-dialog-content mat-icon,
.mat-mdc-dialog-actions mat-icon {
  font-family: 'Material Icons', 'Material Icons Outlined' !important;
}

/* Import Perfect Scrollbar */
@import 'perfect-scrollbar/css/perfect-scrollbar.css';

/* CSS Variables for Fuse theme colors */
:root {
  /* Light theme colors */
  --fuse-bg-card: #ffffff;
  --fuse-bg-card-rgb: 255, 255, 255;
  --fuse-bg-default: #f1f5f9;
  --fuse-bg-default-rgb: 241, 245, 249;
  --fuse-text-default: #1e293b;
  --fuse-text-secondary: #64748b;
  --fuse-text-hint: #94a3b8;
  --fuse-text-disabled: #94a3b8;
  --fuse-border: #e2e8f0;
  --fuse-border-rgb: 226, 232, 240;
  --fuse-divider: #e2e8f0;
  /* Additional Fuse colors */
  --fuse-icon: #64748b;
  --fuse-mat-icon: #64748b;
  --fuse-hover: rgba(148, 163, 184, 0.12);
}

.dark {
  /* Dark theme colors */
  --fuse-bg-card: #1e293b;
  --fuse-bg-card-rgb: 30, 41, 59;
  --fuse-bg-default: #0f172a;
  --fuse-bg-default-rgb: 15, 23, 42;
  --fuse-text-default: #ffffff;
  --fuse-text-secondary: #94a3b8;
  --fuse-text-hint: #64748b;
  --fuse-text-disabled: #475569;
  --fuse-border: rgba(241, 245, 249, 0.12);
  --fuse-border-rgb: 241, 245, 249;
  --fuse-divider: rgba(241, 245, 249, 0.12);
  /* Additional Fuse colors */
  --fuse-icon: #f1f5f9;
  --fuse-mat-icon: #94a3b8;
  --fuse-hover: rgba(255, 255, 255, 0.05);
}

/* Define Fuse utility classes */
@layer utilities {
  .bg-card {
    background-color: var(--fuse-bg-card);
  }

  .bg-default {
    background-color: var(--fuse-bg-default);
  }

  .text-default {
    color: var(--fuse-text-default);
  }

  .text-secondary {
    color: var(--fuse-text-secondary);
  }

  .text-hint {
    color: var(--fuse-text-hint);
  }

  .text-disabled {
    color: var(--fuse-text-disabled);
  }

  .text-card-foreground {
    color: var(--fuse-text-default);
  }

  .border-color {
    border-color: var(--fuse-border);
  }

  .hover\:bg-hover:hover {
    background-color: var(--fuse-hover);
  }

  /* Icon sizes matching Fuse */
  .icon-size-4 {
    font-size: 1rem !important;
    width: 1rem !important;
    height: 1rem !important;
    min-width: 1rem !important;
    min-height: 1rem !important;
  }

  .icon-size-5 {
    font-size: 1.25rem !important;
    width: 1.25rem !important;
    height: 1.25rem !important;
    min-width: 1.25rem !important;
    min-height: 1.25rem !important;
  }

  .icon-size-6 {
    font-size: 1.5rem !important;
    width: 1.5rem !important;
    height: 1.5rem !important;
    min-width: 1.5rem !important;
    min-height: 1.5rem !important;
  }

  /* Additional utilities */
  .flex-0 {
    flex: 0 0 auto;
  }

  .flex-auto {
    flex: 1 1 auto;
  }

  .min-w-0 {
    min-width: 0;
  }
}

/* Global Styles */
html,
body {
  height: 100%;
  margin: 0;
  font-family: Roboto, 'Helvetica Neue', sans-serif;
}

/* Note: Detailed Angular Material fixes are now handled in separate component files:
   - styles/components/_material-fixes.scss for core Material Design fixes
   - styles/components/_form-utilities.scss for form utility classes */

/* Import Component Styles */
@import 'styles/components/material-fixes';
@import 'styles/components/form-utilities';

/* Dark mode support for Material inputs */
.dark {
  .mat-mdc-form-field-appearance-fill .mat-mdc-form-field-flex {
    background-color: rgba(255, 255, 255, 0.05);
  }

  .mat-mdc-input-element {
    color: rgba(255, 255, 255, 0.87);
    caret-color: #9fa8da;
  }

  .mat-mdc-form-field-label {
    color: rgba(255, 255, 255, 0.7);
  }

  .mat-mdc-form-field.mat-focused .mat-mdc-form-field-label {
    color: #9fa8da;
  }

  .mat-mdc-form-field-appearance-outline.mat-focused .mat-mdc-floating-label,
  .mat-mdc-form-field-appearance-outline.mat-form-field-should-float
    .mat-mdc-floating-label {
    background-color: #303030;
  }

  .mat-mdc-form-field-appearance-fill .mat-mdc-form-field-underline {
    background-color: rgba(255, 255, 255, 0.42);
  }

  .mat-mdc-form-field-hint {
    color: rgba(255, 255, 255, 0.7);
  }

  .mat-mdc-form-field-appearance-outline:not(.mat-form-field-invalid)
    .mdc-notched-outline
    .mdc-notched-outline__leading,
  .mat-mdc-form-field-appearance-outline:not(.mat-form-field-invalid)
    .mdc-notched-outline
    .mdc-notched-outline__notch,
  .mat-mdc-form-field-appearance-outline:not(.mat-form-field-invalid)
    .mdc-notched-outline
    .mdc-notched-outline__trailing {
    border-color: rgba(255, 255, 255, 0.38) !important;
  }
}

/* Fix for dark mode backgrounds */
.dark {
  color-scheme: dark;
}

/* Bulk operations snackbar styles */
.success-snackbar {
  background: #4caf50 !important;
  color: white !important;
}

.error-snackbar {
  background: #f44336 !important;
  color: white !important;
}

.warning-snackbar {
  background: #ff9800 !important;
  color: white !important;
}

/* ===== Export Menu Width Override ===== */
.mat-mdc-menu-panel.export-menu-wide {
  min-width: 420px !important;
  max-width: 90vw !important;
}

/* ===== Full-Screen Dialog ===== */
.full-screen-dialog .mat-mdc-dialog-container {
  padding: 0 !important;
  border-radius: 0 !important;
  max-width: 100vw !important;
  max-height: 100vh !important;
}

.full-screen-dialog .mat-mdc-dialog-surface {
  border-radius: 0 !important;
}
