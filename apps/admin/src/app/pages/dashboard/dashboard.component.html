<!-- Dashboard Container -->
<div class="flex flex-col gap-6 p-6">
  <!-- Page Header -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold" style="color: var(--aegisx-text-strong)">
        Dashboard
      </h1>
      <p class="mt-1 text-sm" style="color: var(--aegisx-text-body)">
        Welcome back! Here's what's happening today.
      </p>
    </div>

    <button matButton="filled" color="primary">
      <mat-icon>refresh</mat-icon>
      Refresh Data
    </button>
  </div>

  <!-- Stats Cards Grid (Material Design 3 Style) -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <mat-card
      *ngFor="let stat of stats"
      appearance="outlined"
      class="stat-card"
    >
      <mat-card-content>
        <div class="flex items-start justify-between mb-4">
          <div
            class="stat-icon-wrapper"
            [style.background-color]="stat.iconColor + '15'"
          >
            <mat-icon [style.color]="stat.iconColor">{{ stat.icon }}</mat-icon>
          </div>

          <mat-chip
            [highlighted]="stat.changeType === 'increase'"
            class="change-chip"
          >
            <mat-icon class="text-sm">
              {{
                stat.changeType === 'increase' ? 'trending_up' : 'trending_down'
              }}
            </mat-icon>
            {{ stat.change }}
          </mat-chip>
        </div>

        <div>
          <p
            class="text-sm font-medium mb-1"
            style="color: var(--aegisx-text-body)"
          >
            {{ stat.title }}
          </p>
          <h3
            class="text-3xl font-bold"
            style="color: var(--aegisx-text-strong)"
          >
            {{ stat.value }}
          </h3>
          <p class="text-xs mt-1" style="color: var(--aegisx-text-subtle)">
            from last month
          </p>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Main Content Grid -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Recent Activities (2 columns on large screens) -->
    <mat-card appearance="outlined" class="lg:col-span-2">
      <mat-card-header>
        <div class="flex items-center justify-between w-full">
          <mat-card-title class="flex items-center gap-2">
            <mat-icon style="color: var(--aegisx-brand-default)">
              history
            </mat-icon>
            <span>Recent Activities</span>
          </mat-card-title>

          <button matButton color="primary">
            View All
            <mat-icon>arrow_forward</mat-icon>
          </button>
        </div>
      </mat-card-header>

      <mat-card-content>
        <div class="activity-list">
          <div
            *ngFor="let activity of recentActivities; let last = last"
            class="activity-item"
            [class.last-item]="last"
          >
            <div class="activity-timeline">
              <div
                class="timeline-dot"
                [style.background-color]="getStatusColor(activity.status)"
              ></div>
              <div *ngIf="!last" class="timeline-line"></div>
            </div>

            <div class="activity-content">
              <div class="flex items-center justify-between mb-1">
                <div class="flex items-center gap-2">
                  <mat-icon
                    class="activity-icon"
                    [style.color]="getStatusColor(activity.status)"
                  >
                    {{
                      activity.status === 'success'
                        ? 'check_circle'
                        : activity.status === 'warning'
                          ? 'warning'
                          : 'error'
                    }}
                  </mat-icon>
                  <span
                    class="font-semibold"
                    style="color: var(--aegisx-text-strong)"
                  >
                    {{ activity.user }}
                  </span>
                </div>
                <span class="text-xs" style="color: var(--aegisx-text-subtle)">
                  {{ getRelativeTime(activity.timestamp) }}
                </span>
              </div>

              <p class="text-sm" style="color: var(--aegisx-text-body)">
                {{ activity.action }}
              </p>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Quick Actions & System Status -->
    <div class="flex flex-col gap-6">
      <!-- Quick Actions -->
      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-card-title class="flex items-center gap-2">
            <mat-icon style="color: var(--aegisx-brand-default)">bolt</mat-icon>
            <span>Quick Actions</span>
          </mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <div class="quick-actions-grid">
            <button
              *ngFor="let action of quickActions"
              matButton="outlined"
              class="action-button"
            >
              <div class="flex flex-col items-center gap-2">
                <mat-icon [color]="action.color">{{ action.icon }}</mat-icon>
                <span class="text-xs">{{ action.label }}</span>
              </div>
            </button>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- System Status -->
      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-card-title class="flex items-center gap-2">
            <mat-icon style="color: var(--aegisx-brand-default)">
              monitor_heart
            </mat-icon>
            <span>System Status</span>
          </mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <div class="space-y-4">
            <div *ngFor="let metric of systemMetrics" class="metric-item">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm" style="color: var(--aegisx-text-body)">
                  {{ metric.label }}
                </span>
                <span
                  class="text-sm font-semibold"
                  [style.color]="metric.statusColor"
                >
                  {{ metric.value }}%
                </span>
              </div>

              <mat-progress-bar
                mode="determinate"
                [value]="metric.value"
                [color]="metric.status === 'healthy' ? 'primary' : 'warn'"
              ></mat-progress-bar>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Performance Overview -->
  <mat-card appearance="outlined">
    <mat-card-header>
      <div class="flex items-center justify-between w-full">
        <mat-card-title class="flex items-center gap-2">
          <mat-icon style="color: var(--aegisx-brand-default)">
            show_chart
          </mat-icon>
          <span>Performance Overview</span>
        </mat-card-title>

        <mat-button-toggle-group value="month">
          <mat-button-toggle value="week">Week</mat-button-toggle>
          <mat-button-toggle value="month">Month</mat-button-toggle>
          <mat-button-toggle value="year">Year</mat-button-toggle>
        </mat-button-toggle-group>
      </div>
    </mat-card-header>

    <mat-card-content>
      <!-- Mini Stats Row -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        <div
          *ngFor="let miniStat of miniStats"
          class="mini-stat-card p-4 rounded-lg"
          style="background: var(--aegisx-background-subtle)"
        >
          <div class="flex items-center gap-2 mb-2">
            <mat-icon class="text-lg" [style.color]="miniStat.color">
              {{ miniStat.icon }}
            </mat-icon>
            <span class="text-xs" style="color: var(--aegisx-text-body)">
              {{ miniStat.label }}
            </span>
          </div>
          <p class="text-xl font-bold" style="color: var(--aegisx-text-strong)">
            {{ miniStat.value }}
          </p>
        </div>
      </div>

      <!-- Chart Placeholder -->
      <div class="chart-placeholder flex items-center justify-center">
        <div class="text-center">
          <mat-icon
            class="text-6xl mb-4"
            style="color: var(--aegisx-text-subtle)"
          >
            insert_chart
          </mat-icon>
          <p style="color: var(--aegisx-text-body)">
            Chart visualization will be displayed here
          </p>
          <p class="text-sm mt-2" style="color: var(--aegisx-text-subtle)">
            Integrate with Chart.js, Recharts, or other charting libraries
          </p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Bottom Grid: Top Products & Team Performance -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Top Products -->
    <mat-card appearance="outlined">
      <mat-card-header>
        <mat-card-title class="flex items-center gap-2">
          <mat-icon style="color: var(--aegisx-brand-default)"> star </mat-icon>
          <span>Top Products</span>
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="space-y-3">
          <div
            *ngFor="let product of topProducts; let i = index"
            class="product-item flex items-center gap-4 p-3 rounded-lg hover:bg-gray-50 transition-colors"
          >
            <div
              class="rank-badge"
              [class.top-rank]="i === 0"
              style="
                background: var(--aegisx-background-subtle);
                color: var(--aegisx-text-strong);
              "
            >
              {{ i + 1 }}
            </div>

            <div class="flex-1">
              <p class="font-medium" style="color: var(--aegisx-text-strong)">
                {{ product.name }}
              </p>
              <p class="text-xs" style="color: var(--aegisx-text-subtle)">
                {{ product.category }}
              </p>
            </div>

            <div class="text-right">
              <p
                class="font-semibold"
                style="color: var(--aegisx-brand-default)"
              >
                {{ product.sales }}
              </p>
              <p class="text-xs" style="color: var(--aegisx-text-subtle)">
                sales
              </p>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Team Performance -->
    <mat-card appearance="outlined">
      <mat-card-header>
        <mat-card-title class="flex items-center gap-2">
          <mat-icon style="color: var(--aegisx-brand-default)">
            groups
          </mat-icon>
          <span>Team Performance</span>
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="space-y-4">
          <div *ngFor="let member of teamMembers" class="team-member-item">
            <div class="flex items-center gap-3 mb-2">
              <div class="avatar" [style.background-color]="member.avatarColor">
                {{ member.initials }}
              </div>

              <div class="flex-1">
                <p class="font-medium" style="color: var(--aegisx-text-strong)">
                  {{ member.name }}
                </p>
                <p class="text-xs" style="color: var(--aegisx-text-subtle)">
                  {{ member.role }}
                </p>
              </div>

              <mat-chip [highlighted]="member.performance > 80">
                {{ member.performance }}%
              </mat-chip>
            </div>

            <mat-progress-bar
              mode="determinate"
              [value]="member.performance"
              [color]="member.performance > 80 ? 'primary' : 'accent'"
            ></mat-progress-bar>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
