"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8487],{58487:(k,_,g)=>{g.d(_,{o:()=>M});var l=g(43692),c=g(46897),S=g(59064);let M=(()=>{class v{_rooms=(0,l.vPA)(this.generateMockRooms());_doctors=(0,l.vPA)(this.generateMockDoctors());_patients=(0,l.vPA)(this.generateMockPatients());_timeSlots=(0,l.vPA)(this.generateMockTimeSlots());_purposes=(0,l.vPA)(this.generateMockPurposes());_preparations=(0,l.vPA)(this.generateMockPreparations());_appointments=(0,l.vPA)(this.generateMockAppointments());_blockedDates=(0,l.vPA)(this.generateMockBlockedDates());_slotConfigs=(0,l.vPA)(this.generateMockSlotConfigs());rooms=(0,c.EW)(()=>this._rooms().filter(e=>e.isActive));doctors=(0,c.EW)(()=>this._doctors().filter(e=>e.isActive));patients=(0,c.EW)(()=>this._patients());timeSlots=(0,c.EW)(()=>this._timeSlots());purposes=(0,c.EW)(()=>this._purposes());preparations=(0,c.EW)(()=>this._preparations());appointments=(0,c.EW)(()=>this._appointments());blockedDates=(0,c.EW)(()=>this._blockedDates());slotConfigs=(0,c.EW)(()=>this._slotConfigs().filter(e=>e.isActive));_loading=(0,l.vPA)(!1);loading=(0,c.EW)(()=>this._loading());_selectedDate=(0,l.vPA)(new Date);selectedDate=(0,c.EW)(()=>this._selectedDate());appointmentViews=(0,c.EW)(()=>this._appointments().map(t=>this.resolveAppointment(t)));calendarEvents=(0,c.EW)(()=>this.appointmentViews().filter(t=>"cancelled"!==t.status).map(t=>this.toCalendarEvent(t)));calendarSummaryEvents=(0,c.EW)(()=>{const e=this._appointments().filter(s=>"cancelled"!==s.status),t=this._rooms(),o=new Map;e.forEach(s=>{const n=new Date(s.date).toISOString().split("T")[0];o.has(n)||o.set(n,[]),o.get(n).push(s)});const a=[];return o.forEach((s,n)=>{const i=new Date(n),d=s.length,r=new Map;s.forEach(u=>{r.set(u.roomId,(r.get(u.roomId)||0)+1)});const h=s.filter(u=>"completed"===u.status).length,f=s.filter(u=>"confirmed"===u.status).length,D=s.filter(u=>"scheduled"===u.status).length,y=Math.min(100,Math.round(d/(50*t.length)*100));let p="primary";p=y>=90?"danger":y>=70?"warning":y>=50?"primary":"success",a.push({id:`summary-${n}`,title:`${d} \u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22`,start:i,allDay:!0,color:p,extendedProps:{isSummary:!0,total:d,completed:h,confirmed:f,scheduled:D,capacityPercent:y,byRoom:Object.fromEntries(r),date:n}})}),a});todaySummary=(0,c.EW)(()=>{const e=new Date;return e.setHours(0,0,0,0),this.getSummaryForDate(e)});getRoom(e){return this._rooms().find(t=>t.id===e)}getDoctor(e){return this._doctors().find(t=>t.id===e)}getPatient(e){return this._patients().find(t=>t.id===e)}getTimeSlot(e){return this._timeSlots().find(t=>t.id===e)}getPurpose(e){return this._purposes().find(t=>t.id===e)}getPreparation(e){return this._preparations().find(t=>t.id===e)}getDoctorsByRoom(e){return this._doctors().filter(t=>t.isActive&&t.roomIds.includes(e))}searchPatients(e){if(!e||e.length<2)return[];const t=e.toLowerCase();return this._patients().filter(o=>o.hn.toLowerCase().includes(t)||o.cid.includes(e)||o.firstName.toLowerCase().includes(t)||o.lastName.toLowerCase().includes(t)||`${o.firstName} ${o.lastName}`.toLowerCase().includes(t))}createAppointment(e){const t={...e,id:this.generateId(),appointmentNumber:this.generateAppointmentNumber(e.date),createdAt:new Date,createdBy:"demo-user"};return this._appointments.update(o=>[...o,t]),t}updateAppointment(e,t){let o;return this._appointments.update(a=>a.map(s=>s.id===e?(o={...s,...t,updatedAt:new Date,updatedBy:"demo-user"},o):s)),o}cancelAppointment(e,t){return this.updateAppointment(e,{status:"cancelled",cancelledAt:new Date,cancelledBy:"demo-user",cancelReason:t})}changeStatus(e,t){return this.updateAppointment(e,{status:t})}getSlotAvailability(e,t,o){const a=this._timeSlots(),s=this._appointments(),n=this._blockedDates(),i=this._slotConfigs().filter(r=>r.isActive&&r.roomId===t&&(!o||!r.doctorId||r.doctorId===o)),d=n.find(r=>this.isSameDay(r.date,e)&&(!r.roomId||r.roomId===t)&&(!r.doctorId||r.doctorId===o));return a.map(r=>{const h=s.filter(m=>this.isSameDay(m.date,e)&&m.timeSlotId===r.id&&m.roomId===t&&(!o||m.doctorId===o)&&"cancelled"!==m.status).length,D=i.find(m=>m.timeSlotIds.includes(r.id))?.maxAppointmentsPerSlot||3;return{timeSlotId:r.id,date:e,roomId:t,doctorId:o,totalCapacity:D,bookedCount:h,availableCount:Math.max(0,D-h),isBlocked:!!d,blockedReason:d?.reason,canForceBook:d?.canForceBook}})}isSlotAvailable(e,t,o,a){const n=this.getSlotAvailability(e,o,a).find(i=>i.timeSlotId===t);return!!n&&n.availableCount>0&&!n.isBlocked}filterAppointments(e){let t=this.appointmentViews();if(e.dateFrom&&(t=t.filter(o=>o.date>=e.dateFrom)),e.dateTo&&(t=t.filter(o=>o.date<=e.dateTo)),e.roomId&&(t=t.filter(o=>o.roomId===e.roomId)),e.doctorId&&(t=t.filter(o=>o.doctorId===e.doctorId)),e.status&&e.status.length>0&&(t=t.filter(o=>e.status.includes(o.status))),e.searchText){const o=e.searchText.toLowerCase();t=t.filter(a=>a.patient?.hn.toLowerCase().includes(o)||a.patient?.cid.includes(o)||a.patient?.firstName.toLowerCase().includes(o)||a.patient?.lastName.toLowerCase().includes(o)||a.appointmentNumber.toLowerCase().includes(o))}return t}getSummaryForDate(e){const t=this._appointments().filter(n=>this.isSameDay(n.date,e)),o={scheduled:0,confirmed:0,"checked-in":0,"in-progress":0,completed:0,cancelled:0,"no-show":0},a={},s={};return t.forEach(n=>{o[n.status]++,a[n.roomId]=(a[n.roomId]||0)+1,s[n.doctorId]=(s[n.doctorId]||0)+1}),{date:e,total:t.length,byStatus:o,byRoom:a,byDoctor:s}}addBlockedDate(e){const t={...e,id:this.generateId()};return this._blockedDates.update(o=>[...o,t]),t}removeBlockedDate(e){this._blockedDates.update(t=>t.filter(o=>o.id!==e))}isDateBlocked(e,t,o){return this._blockedDates().find(a=>this.isSameDay(a.date,e)&&(!a.roomId||!t||a.roomId===t)&&(!a.doctorId||!o||a.doctorId===o))}findAvailableDate(e){const t=new Date;t.setHours(0,0,0,0);const o=this.addDays(t,e.targetDays);for(let a=0;a<=14;a++){const s=this.addDays(o,a),n=this.validateDate(s,e);if(e.includeHolidays){if(n.checks.roomCapacity.available>0&&n.checks.doctorCapacity.available>0)return{...n,isValid:!0,skippedDays:a,skippedReasons:this.getSkippedReasons(o,s,e)}}else if(!n.checks.isWeekend&&!n.checks.isHoliday&&!n.checks.isDoctorLeave&&n.checks.roomCapacity.available>0&&n.checks.doctorCapacity.available>0)return{...n,isValid:!0,skippedDays:a,skippedReasons:this.getSkippedReasons(o,s,e)}}return{isValid:!1,date:o,skippedDays:0,skippedReasons:[],checks:this.validateDate(o,e).checks,warnings:[],errors:["\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e27\u0e31\u0e19\u0e27\u0e48\u0e32\u0e07\u0e43\u0e19 2 \u0e2a\u0e31\u0e1b\u0e14\u0e32\u0e2b\u0e4c\u0e02\u0e49\u0e32\u0e07\u0e2b\u0e19\u0e49\u0e32"]}}validateDate(e,t){const o=this.getDateChecks(e,t),a=[],s=[];if(o.isWeekend&&a.push("\u0e27\u0e31\u0e19\u0e40\u0e2a\u0e32\u0e23\u0e4c-\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c"),o.isHoliday&&a.push(`\u0e27\u0e31\u0e19\u0e2b\u0e22\u0e38\u0e14: ${o.holidayName}`),o.isDoctorLeave&&a.push(`\u0e41\u0e1e\u0e17\u0e22\u0e4c\u0e25\u0e32: ${o.leaveReason}`),o.roomCapacity.available<=0&&s.push("\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08\u0e40\u0e15\u0e47\u0e21"),o.doctorCapacity.available<=0&&s.push("\u0e41\u0e1e\u0e17\u0e22\u0e4c\u0e19\u0e31\u0e14\u0e40\u0e15\u0e47\u0e21"),o.patientExistingAppointment){const i=o.patientExistingAppointment;a.push(`\u0e04\u0e19\u0e44\u0e02\u0e49\u0e21\u0e35\u0e19\u0e31\u0e14\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48 ${i.date.toLocaleDateString("th-TH")} (\u0e2b\u0e48\u0e32\u0e07 ${i.daysDifference} \u0e27\u0e31\u0e19)`)}return{isValid:0===s.length&&(!o.isWeekend||t.includeHolidays)&&(!o.isHoliday||t.includeHolidays)&&(!o.isDoctorLeave||t.includeHolidays),date:e,skippedDays:0,skippedReasons:[],checks:o,warnings:a,errors:s}}getDateChecks(e,t){return{isWeekend:this.isWeekendDay(e),isHoliday:this.isHolidayDay(e).isHoliday,holidayName:this.isHolidayDay(e).name,isDoctorLeave:this.isDoctorOnLeaveDay(e,t.doctorId).onLeave,leaveReason:this.isDoctorOnLeaveDay(e,t.doctorId).reason,roomCapacity:this.getRoomDayCapacity(e,t.roomId),doctorCapacity:this.getDoctorDayCapacity(e,t.doctorId),patientExistingAppointment:this.getPatientNearestAppointment(t.patientId,e)}}getAvailableTimeSlots(e,t,o){const a=this._timeSlots(),s=this._appointments();return a.map(n=>{const i=s.filter(d=>this.isSameDay(d.date,e)&&d.timeSlotId===n.id&&d.roomId===t&&d.doctorId===o&&"cancelled"!==d.status).length;return{timeSlotId:n.id,startTime:n.startTime,endTime:n.endTime,isAvailable:0===i}})}isWeekendDay(e){const t=e.getDay();return 0===t||6===t}isHolidayDay(e){const t=this._blockedDates().find(o=>this.isSameDay(o.date,e)&&"holiday"===o.type);return{isHoliday:!!t,name:t?.reason}}isDoctorOnLeaveDay(e,t){const o=this._blockedDates().find(a=>this.isSameDay(a.date,e)&&"doctor-leave"===a.type&&a.doctorId===t);return{onLeave:!!o,reason:o?.reason}}getRoomDayCapacity(e,t){const s=this._appointments().filter(n=>this.isSameDay(n.date,e)&&n.roomId===t&&"cancelled"!==n.status).length;return{current:s,max:300,available:Math.max(0,300-s)}}getDoctorDayCapacity(e,t){const s=this._appointments().filter(n=>this.isSameDay(n.date,e)&&n.doctorId===t&&"cancelled"!==n.status).length;return{current:s,max:50,available:Math.max(0,50-s)}}getPatientNearestAppointment(e,t){const o=this._appointments().filter(n=>n.patientId===e&&"cancelled"!==n.status);if(0===o.length)return;let a,s=1/0;return o.forEach(n=>{const i=Math.abs((new Date(n.date).getTime()-t.getTime())/864e5);i<s&&(s=i,a={date:new Date(n.date),daysDifference:Math.round(i)})}),a}getPatientAppointments(e){return this.appointmentViews().filter(t=>t.patientId===e)}getSkippedReasons(e,t,o){const a=[],s=new Date(e);for(;s<t;){if(this.isWeekendDay(s))a.push(`${s.toLocaleDateString("th-TH")}: \u0e27\u0e31\u0e19\u0e2b\u0e22\u0e38\u0e14\u0e2a\u0e38\u0e14\u0e2a\u0e31\u0e1b\u0e14\u0e32\u0e2b\u0e4c`);else{const n=this.isHolidayDay(s);n.isHoliday&&a.push(`${s.toLocaleDateString("th-TH")}: ${n.name}`);const i=this.isDoctorOnLeaveDay(s,o.doctorId);i.onLeave&&a.push(`${s.toLocaleDateString("th-TH")}: ${i.reason}`)}s.setDate(s.getDate()+1)}return a}addDays(e,t){const o=new Date(e);return o.setDate(o.getDate()+t),o}resolveAppointment(e){return{...e,room:this.getRoom(e.roomId),doctor:this.getDoctor(e.doctorId),patient:this.getPatient(e.patientId),timeSlot:this.getTimeSlot(e.timeSlotId),purpose:this.getPurpose(e.purposeId),preparationTags:e.preparations.map(t=>this.getPreparation(t)).filter(t=>!!t)}}toCalendarEvent(e){const t=e.timeSlot,o=t?.startTime||"08:00",a=t?.endTime||"08:30",s=new Date(e.date),[n,i]=o.split(":").map(Number);s.setHours(n,i,0,0);const d=new Date(e.date),[r,h]=a.split(":").map(Number);return d.setHours(r,h,0,0),{id:e.id,title:`${e.patient?`${e.patient.firstName} ${e.patient.lastName}`:"Unknown"} - ${e.doctor?.name||""}`,start:s,end:d,allDay:!1,color:S.As[e.status],backgroundColor:e.room?.color,extendedProps:{appointment:e,status:e.status,roomId:e.roomId,doctorId:e.doctorId,patientHN:e.patient?.hn||""}}}isSameDay(e,t){const o=new Date(e),a=new Date(t);return o.getFullYear()===a.getFullYear()&&o.getMonth()===a.getMonth()&&o.getDate()===a.getDate()}generateId(){return`id-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}generateAppointmentNumber(e){return`APT-${e.toISOString().slice(0,10).replace(/-/g,"")}-${Math.floor(9999*Math.random()).toString().padStart(4,"0")}`}generateMockRooms(){return[{id:"room-1",code:"MED01",name:"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08\u0e2d\u0e32\u0e22\u0e38\u0e23\u0e01\u0e23\u0e23\u0e21 1",description:"\u0e15\u0e23\u0e27\u0e08\u0e42\u0e23\u0e04\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b \u0e2d\u0e32\u0e22\u0e38\u0e23\u0e01\u0e23\u0e23\u0e21",color:"#3b82f6",isActive:!0},{id:"room-2",code:"MED02",name:"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08\u0e2d\u0e32\u0e22\u0e38\u0e23\u0e01\u0e23\u0e23\u0e21 2",description:"\u0e15\u0e23\u0e27\u0e08\u0e42\u0e23\u0e04\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b \u0e2d\u0e32\u0e22\u0e38\u0e23\u0e01\u0e23\u0e23\u0e21",color:"#6366f1",isActive:!0},{id:"room-3",code:"SUR01",name:"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08\u0e28\u0e31\u0e25\u0e22\u0e01\u0e23\u0e23\u0e21",description:"\u0e15\u0e23\u0e27\u0e08\u0e28\u0e31\u0e25\u0e22\u0e01\u0e23\u0e23\u0e21\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b",color:"#10b981",isActive:!0},{id:"room-4",code:"ORT01",name:"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08\u0e2d\u0e2d\u0e23\u0e4c\u0e42\u0e18\u0e1b\u0e34\u0e14\u0e34\u0e01\u0e2a\u0e4c",description:"\u0e15\u0e23\u0e27\u0e08\u0e01\u0e23\u0e30\u0e14\u0e39\u0e01\u0e41\u0e25\u0e30\u0e02\u0e49\u0e2d",color:"#f59e0b",isActive:!0},{id:"room-5",code:"ENT01",name:"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08\u0e2b\u0e39 \u0e04\u0e2d \u0e08\u0e21\u0e39\u0e01",description:"\u0e15\u0e23\u0e27\u0e08 \u0e2b\u0e39 \u0e04\u0e2d \u0e08\u0e21\u0e39\u0e01",color:"#ec4899",isActive:!0},{id:"room-6",code:"EYE01",name:"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08\u0e15\u0e32",description:"\u0e15\u0e23\u0e27\u0e08\u0e08\u0e31\u0e01\u0e29\u0e38",color:"#8b5cf6",isActive:!0}]}generateMockDoctors(){return[{id:"doc-1",code:"DR001",name:"\u0e19\u0e1e.\u0e2a\u0e21\u0e0a\u0e32\u0e22 \u0e43\u0e08\u0e14\u0e35",specialty:"\u0e2d\u0e32\u0e22\u0e38\u0e23\u0e01\u0e23\u0e23\u0e21",roomIds:["room-1","room-2"],isActive:!0},{id:"doc-2",code:"DR002",name:"\u0e1e\u0e0d.\u0e2a\u0e21\u0e2b\u0e0d\u0e34\u0e07 \u0e23\u0e31\u0e01\u0e29\u0e32\u0e14\u0e35",specialty:"\u0e2d\u0e32\u0e22\u0e38\u0e23\u0e01\u0e23\u0e23\u0e21",roomIds:["room-1","room-2"],isActive:!0},{id:"doc-3",code:"DR003",name:"\u0e19\u0e1e.\u0e27\u0e34\u0e0a\u0e31\u0e22 \u0e28\u0e31\u0e25\u0e22\u0e41\u0e1e\u0e17\u0e22\u0e4c",specialty:"\u0e28\u0e31\u0e25\u0e22\u0e01\u0e23\u0e23\u0e21",roomIds:["room-3"],isActive:!0},{id:"doc-4",code:"DR004",name:"\u0e1e\u0e0d.\u0e21\u0e13\u0e35 \u0e01\u0e23\u0e30\u0e14\u0e39\u0e01",specialty:"\u0e2d\u0e2d\u0e23\u0e4c\u0e42\u0e18\u0e1b\u0e34\u0e14\u0e34\u0e01\u0e2a\u0e4c",roomIds:["room-4"],isActive:!0},{id:"doc-5",code:"DR005",name:"\u0e19\u0e1e.\u0e18\u0e35\u0e23\u0e30 \u0e2b\u0e39\u0e14\u0e35",specialty:"\u0e2b\u0e39 \u0e04\u0e2d \u0e08\u0e21\u0e39\u0e01",roomIds:["room-5"],isActive:!0},{id:"doc-6",code:"DR006",name:"\u0e1e\u0e0d.\u0e41\u0e2a\u0e07\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c \u0e15\u0e32\u0e2a\u0e27\u0e48\u0e32\u0e07",specialty:"\u0e08\u0e31\u0e01\u0e29\u0e38",roomIds:["room-6"],isActive:!0}]}generateMockPatients(){return[{title:"\u0e19\u0e32\u0e22",first:"\u0e2a\u0e21\u0e0a\u0e32\u0e22",last:"\u0e21\u0e31\u0e48\u0e19\u0e04\u0e07"},{title:"\u0e19\u0e32\u0e07",first:"\u0e2a\u0e21\u0e2b\u0e0d\u0e34\u0e07",last:"\u0e23\u0e31\u0e01\u0e14\u0e35"},{title:"\u0e19\u0e32\u0e07\u0e2a\u0e32\u0e27",first:"\u0e2a\u0e27\u0e22\u0e07\u0e32\u0e21",last:"\u0e43\u0e08\u0e14\u0e35"},{title:"\u0e19\u0e32\u0e22",first:"\u0e21\u0e32\u0e19\u0e30",last:"\u0e1e\u0e22\u0e32\u0e22\u0e32\u0e21"},{title:"\u0e19\u0e32\u0e07",first:"\u0e27\u0e31\u0e19\u0e14\u0e35",last:"\u0e2a\u0e38\u0e02\u0e43\u0e08"},{title:"\u0e19\u0e32\u0e22",first:"\u0e1b\u0e23\u0e30\u0e40\u0e2a\u0e23\u0e34\u0e10",last:"\u0e28\u0e31\u0e01\u0e14\u0e34\u0e4c\u0e2a\u0e34\u0e17\u0e18\u0e34\u0e4c"},{title:"\u0e19\u0e32\u0e07\u0e2a\u0e32\u0e27",first:"\u0e14\u0e32\u0e27",last:"\u0e2a\u0e27\u0e48\u0e32\u0e07"},{title:"\u0e19\u0e32\u0e22",first:"\u0e18\u0e19\u0e32",last:"\u0e23\u0e48\u0e33\u0e23\u0e27\u0e22"},{title:"\u0e19\u0e32\u0e07",first:"\u0e21\u0e32\u0e25\u0e35",last:"\u0e14\u0e2d\u0e01\u0e44\u0e21\u0e49"},{title:"\u0e19\u0e32\u0e22",first:"\u0e2a\u0e38\u0e23\u0e0a\u0e31\u0e22",last:"\u0e40\u0e02\u0e49\u0e21\u0e41\u0e02\u0e47\u0e07"},{title:"\u0e19\u0e32\u0e07\u0e2a\u0e32\u0e27",first:"\u0e23\u0e31\u0e15\u0e19\u0e32",last:"\u0e40\u0e1e\u0e0a\u0e23\u0e07\u0e32\u0e21"},{title:"\u0e19\u0e32\u0e22",first:"\u0e27\u0e35\u0e23\u0e30",last:"\u0e01\u0e25\u0e49\u0e32\u0e2b\u0e32\u0e0d"},{title:"\u0e19\u0e32\u0e07",first:"\u0e28\u0e34\u0e23\u0e34\u0e1e\u0e23",last:"\u0e40\u0e08\u0e23\u0e34\u0e0d\u0e23\u0e38\u0e48\u0e07"},{title:"\u0e19\u0e32\u0e22",first:"\u0e1e\u0e34\u0e0a\u0e31\u0e22",last:"\u0e0a\u0e31\u0e22\u0e0a\u0e19\u0e30"},{title:"\u0e19\u0e32\u0e07\u0e2a\u0e32\u0e27",first:"\u0e01\u0e31\u0e0d\u0e0d\u0e32",last:"\u0e2a\u0e38\u0e14\u0e2a\u0e27\u0e22"},{title:"\u0e19\u0e32\u0e22",first:"\u0e2d\u0e19\u0e31\u0e19\u0e15\u0e4c",last:"\u0e44\u0e21\u0e48\u0e2a\u0e34\u0e49\u0e19\u0e2a\u0e38\u0e14"},{title:"\u0e19\u0e32\u0e07",first:"\u0e1a\u0e38\u0e0d\u0e21\u0e35",last:"\u0e42\u0e0a\u0e04\u0e14\u0e35"},{title:"\u0e19\u0e32\u0e22",first:"\u0e40\u0e01\u0e23\u0e35\u0e22\u0e07\u0e44\u0e01\u0e23",last:"\u0e22\u0e34\u0e48\u0e07\u0e43\u0e2b\u0e0d\u0e48"},{title:"\u0e19\u0e32\u0e07\u0e2a\u0e32\u0e27",first:"\u0e19\u0e49\u0e33\u0e1d\u0e19",last:"\u0e40\u0e22\u0e47\u0e19\u0e43\u0e08"},{title:"\u0e19\u0e32\u0e22",first:"\u0e2a\u0e21\u0e28\u0e31\u0e01\u0e14\u0e34\u0e4c",last:"\u0e28\u0e31\u0e01\u0e14\u0e34\u0e4c\u0e28\u0e23\u0e35"}].map((t,o)=>({id:`patient-${o+1}`,hn:`HN${(1e5+o).toString()}`,cid:`${(11e11+12345*o).toString()}`,title:t.title,firstName:t.first,lastName:t.last,birthDate:new Date(1960+Math.floor(40*Math.random()),Math.floor(12*Math.random()),Math.floor(28*Math.random())+1),phone:`08${Math.floor(1e8*Math.random()).toString().padStart(8,"0")}`}))}generateMockTimeSlots(){const e=[];for(let t=8;t<16;t++)for(let o=0;o<60;o+=30){const a=`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`,s=o+30,i=`${(s>=60?t+1:t).toString().padStart(2,"0")}:${(s%60).toString().padStart(2,"0")}`;e.push({id:`slot-${t}-${o}`,startTime:a,endTime:i,label:`${a} - ${i}`})}return e}generateMockPurposes(){return[{id:"purpose-1",code:"FOLLOWUP",name:"\u0e15\u0e23\u0e27\u0e08\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21",description:"\u0e19\u0e31\u0e14\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21\u0e2d\u0e32\u0e01\u0e32\u0e23\u0e2b\u0e25\u0e31\u0e07\u0e01\u0e32\u0e23\u0e23\u0e31\u0e01\u0e29\u0e32",defaultPreparations:[],estimatedDuration:15},{id:"purpose-2",code:"CHECKUP",name:"\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e38\u0e02\u0e20\u0e32\u0e1e",description:"\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e38\u0e02\u0e20\u0e32\u0e1e\u0e1b\u0e23\u0e30\u0e08\u0e33\u0e1b\u0e35",defaultPreparations:["prep-1","prep-2"],estimatedDuration:30},{id:"purpose-3",code:"CONSULT",name:"\u0e1b\u0e23\u0e36\u0e01\u0e29\u0e32\u0e41\u0e1e\u0e17\u0e22\u0e4c",description:"\u0e1b\u0e23\u0e36\u0e01\u0e29\u0e32\u0e2d\u0e32\u0e01\u0e32\u0e23\u0e40\u0e1a\u0e37\u0e49\u0e2d\u0e07\u0e15\u0e49\u0e19",defaultPreparations:["prep-4"],estimatedDuration:20},{id:"purpose-4",code:"PRE_SURGERY",name:"\u0e40\u0e15\u0e23\u0e35\u0e22\u0e21\u0e01\u0e48\u0e2d\u0e19\u0e1c\u0e48\u0e32\u0e15\u0e31\u0e14",description:"\u0e15\u0e23\u0e27\u0e08\u0e40\u0e15\u0e23\u0e35\u0e22\u0e21\u0e04\u0e27\u0e32\u0e21\u0e1e\u0e23\u0e49\u0e2d\u0e21\u0e01\u0e48\u0e2d\u0e19\u0e1c\u0e48\u0e32\u0e15\u0e31\u0e14",defaultPreparations:["prep-1","prep-2","prep-3"],estimatedDuration:45},{id:"purpose-5",code:"POST_SURGERY",name:"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21\u0e2b\u0e25\u0e31\u0e07\u0e1c\u0e48\u0e32\u0e15\u0e31\u0e14",description:"\u0e15\u0e23\u0e27\u0e08\u0e41\u0e1c\u0e25\u0e41\u0e25\u0e30\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21\u0e2b\u0e25\u0e31\u0e07\u0e1c\u0e48\u0e32\u0e15\u0e31\u0e14",defaultPreparations:[],estimatedDuration:20},{id:"purpose-6",code:"LAB_RESULT",name:"\u0e1f\u0e31\u0e07\u0e1c\u0e25\u0e15\u0e23\u0e27\u0e08 Lab",description:"\u0e1f\u0e31\u0e07\u0e1c\u0e25\u0e15\u0e23\u0e27\u0e08\u0e41\u0e25\u0e30\u0e23\u0e31\u0e1a\u0e22\u0e32",defaultPreparations:["prep-4"],estimatedDuration:15}]}generateMockPreparations(){return[{id:"prep-1",code:"NPO_WATER",name:"\u0e07\u0e14\u0e19\u0e49\u0e33 6 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",description:"\u0e07\u0e14\u0e14\u0e37\u0e48\u0e21\u0e19\u0e49\u0e33\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e19\u0e49\u0e2d\u0e22 6 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07\u0e01\u0e48\u0e2d\u0e19\u0e15\u0e23\u0e27\u0e08",icon:"water_drop"},{id:"prep-2",code:"NPO_FOOD",name:"\u0e07\u0e14\u0e2d\u0e32\u0e2b\u0e32\u0e23 8 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",description:"\u0e07\u0e14\u0e2d\u0e32\u0e2b\u0e32\u0e23\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e19\u0e49\u0e2d\u0e22 8 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07\u0e01\u0e48\u0e2d\u0e19\u0e15\u0e23\u0e27\u0e08",icon:"restaurant"},{id:"prep-3",code:"NO_ASPIRIN",name:"\u0e2b\u0e22\u0e38\u0e14\u0e22\u0e32\u0e41\u0e2d\u0e2a\u0e44\u0e1e\u0e23\u0e34\u0e19 7 \u0e27\u0e31\u0e19",description:"\u0e2b\u0e22\u0e38\u0e14\u0e22\u0e32\u0e25\u0e30\u0e25\u0e32\u0e22\u0e25\u0e34\u0e48\u0e21\u0e40\u0e25\u0e37\u0e2d\u0e14 7 \u0e27\u0e31\u0e19\u0e01\u0e48\u0e2d\u0e19\u0e17\u0e33\u0e2b\u0e31\u0e15\u0e16\u0e01\u0e32\u0e23",icon:"medication"},{id:"prep-4",code:"BRING_RESULTS",name:"\u0e19\u0e33\u0e1c\u0e25\u0e15\u0e23\u0e27\u0e08\u0e40\u0e14\u0e34\u0e21\u0e21\u0e32",description:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e19\u0e33\u0e1c\u0e25\u0e15\u0e23\u0e27\u0e08\u0e04\u0e23\u0e31\u0e49\u0e07\u0e01\u0e48\u0e2d\u0e19\u0e21\u0e32\u0e14\u0e49\u0e27\u0e22",icon:"description"},{id:"prep-5",code:"WEAR_LOOSE",name:"\u0e2a\u0e27\u0e21\u0e40\u0e2a\u0e37\u0e49\u0e2d\u0e1c\u0e49\u0e32\u0e2b\u0e25\u0e27\u0e21",description:"\u0e2a\u0e27\u0e21\u0e40\u0e2a\u0e37\u0e49\u0e2d\u0e1c\u0e49\u0e32\u0e17\u0e35\u0e48\u0e2a\u0e30\u0e14\u0e27\u0e01\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e15\u0e23\u0e27\u0e08",icon:"checkroom"},{id:"prep-6",code:"BRING_XRAY",name:"\u0e19\u0e33\u0e1f\u0e34\u0e25\u0e4c\u0e21 X-ray \u0e21\u0e32",description:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e19\u0e33\u0e1f\u0e34\u0e25\u0e4c\u0e21 X-ray \u0e04\u0e23\u0e31\u0e49\u0e07\u0e01\u0e48\u0e2d\u0e19\u0e21\u0e32\u0e14\u0e49\u0e27\u0e22",icon:"medical_information"}]}generateMockAppointments(){const e=[],t=new Date,o=["scheduled","confirmed","checked-in","completed"];for(let a=-7;a<=14;a++){const s=new Date(t);if(s.setDate(s.getDate()+a),0===s.getDay()||6===s.getDay())continue;const n=5+Math.floor(11*Math.random());for(let i=0;i<n;i++){const r=`room-${Math.floor(6*Math.random())+1}`,h=this.generateMockDoctors().filter(u=>u.roomIds.includes(r)),f=h[Math.floor(Math.random()*h.length)]?.id||"doc-1",D=`patient-${Math.floor(20*Math.random())+1}`,m=Math.floor(16*Math.random()),y=Math.floor(6*Math.random());let p;p=a<0?Math.random()>.1?"completed":"no-show":0===a?o[Math.floor(Math.random()*o.length)]:Math.random()>.3?"scheduled":"confirmed",e.push({id:`apt-${a}-${i}`,appointmentNumber:this.generateAppointmentNumber(s),roomId:r,doctorId:f,patientId:D,date:new Date(s),timeSlotId:`slot-${8+Math.floor(m/2)}-${m%2*30}`,purposeId:`purpose-${y+1}`,preparations:[],notes:"",contactPhone:"",tags:[],metadata:{},status:p,createdAt:new Date(s.getTime()-6048e5),createdBy:"system"})}}return e}generateMockBlockedDates(){const e=new Date,t=[],o=e.getFullYear();[{date:new Date(o,0,1),reason:"\u0e27\u0e31\u0e19\u0e02\u0e36\u0e49\u0e19\u0e1b\u0e35\u0e43\u0e2b\u0e21\u0e48"},{date:new Date(o,3,6),reason:"\u0e27\u0e31\u0e19\u0e08\u0e31\u0e01\u0e23\u0e35"},{date:new Date(o,3,13),reason:"\u0e27\u0e31\u0e19\u0e2a\u0e07\u0e01\u0e23\u0e32\u0e19\u0e15\u0e4c"},{date:new Date(o,3,14),reason:"\u0e27\u0e31\u0e19\u0e2a\u0e07\u0e01\u0e23\u0e32\u0e19\u0e15\u0e4c"},{date:new Date(o,3,15),reason:"\u0e27\u0e31\u0e19\u0e2a\u0e07\u0e01\u0e23\u0e32\u0e19\u0e15\u0e4c"},{date:new Date(o,4,1),reason:"\u0e27\u0e31\u0e19\u0e41\u0e23\u0e07\u0e07\u0e32\u0e19"},{date:new Date(o,4,4),reason:"\u0e27\u0e31\u0e19\u0e09\u0e31\u0e15\u0e23\u0e21\u0e07\u0e04\u0e25"},{date:new Date(o,6,28),reason:"\u0e27\u0e31\u0e19\u0e40\u0e09\u0e25\u0e34\u0e21\u0e1e\u0e23\u0e30\u0e0a\u0e19\u0e21\u0e1e\u0e23\u0e23\u0e29\u0e32 \u0e23.10"},{date:new Date(o,7,12),reason:"\u0e27\u0e31\u0e19\u0e41\u0e21\u0e48\u0e41\u0e2b\u0e48\u0e07\u0e0a\u0e32\u0e15\u0e34"},{date:new Date(o,9,13),reason:"\u0e27\u0e31\u0e19\u0e04\u0e25\u0e49\u0e32\u0e22\u0e27\u0e31\u0e19\u0e2a\u0e27\u0e23\u0e23\u0e04\u0e15 \u0e23.9"},{date:new Date(o,9,23),reason:"\u0e27\u0e31\u0e19\u0e1b\u0e34\u0e22\u0e21\u0e2b\u0e32\u0e23\u0e32\u0e0a"},{date:new Date(o,11,5),reason:"\u0e27\u0e31\u0e19\u0e1e\u0e48\u0e2d\u0e41\u0e2b\u0e48\u0e07\u0e0a\u0e32\u0e15\u0e34"},{date:new Date(o,11,10),reason:"\u0e27\u0e31\u0e19\u0e23\u0e31\u0e10\u0e18\u0e23\u0e23\u0e21\u0e19\u0e39\u0e0d"},{date:new Date(o,11,31),reason:"\u0e27\u0e31\u0e19\u0e2a\u0e34\u0e49\u0e19\u0e1b\u0e35"}].forEach((n,i)=>{t.push({id:`blocked-${i}`,date:n.date,type:"holiday",reason:n.reason,canForceBook:!1})});const s=new Date(e);return s.setDate(s.getDate()+7),t.push({id:"blocked-leave-1",date:s,type:"doctor-leave",reason:"\u0e19\u0e1e.\u0e2a\u0e21\u0e0a\u0e32\u0e22 \u0e43\u0e08\u0e14\u0e35 \u0e25\u0e32\u0e1e\u0e31\u0e01\u0e1c\u0e48\u0e2d\u0e19",doctorId:"doc-1",canForceBook:!0}),t}generateMockSlotConfigs(){const e=this.generateMockRooms(),t=this.generateMockTimeSlots();return e.map((o,a)=>({id:`config-${a}`,roomId:o.id,dayOfWeek:[1,2,3,4,5],timeSlotIds:t.map(s=>s.id),maxAppointmentsPerSlot:3,maxAppointmentsPerDay:30,effectiveFrom:new Date(2024,0,1),isActive:!0}))}static \u0275fac=function(t){return new(t||v)};static \u0275prov=l.jDH({token:v,factory:v.\u0275fac})}return v})()},59064:(k,_,g)=>{g.d(_,{As:()=>c,zN:()=>l});const l={scheduled:"\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22\u0e41\u0e25\u0e49\u0e27",confirmed:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e41\u0e25\u0e49\u0e27","checked-in":"\u0e21\u0e32\u0e16\u0e36\u0e07\u0e41\u0e25\u0e49\u0e27","in-progress":"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e15\u0e23\u0e27\u0e08",completed:"\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19",cancelled:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01","no-show":"\u0e44\u0e21\u0e48\u0e21\u0e32"},c={scheduled:"primary",confirmed:"info","checked-in":"warning","in-progress":"warning",completed:"success",cancelled:"danger","no-show":"secondary"}}}]);