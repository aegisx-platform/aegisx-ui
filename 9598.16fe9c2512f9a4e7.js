"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9598],{9598:(de,Y,u)=>{u.r(Y),u.d(Y,{AppointmentCalendarComponent:()=>me});var i=u(3692),E=u(6897),b=u(1800),m=u(3099),g=u(8957),O=u(7803),x=u(7683),V=u(3155),y=u(8555),v=u(4180),k=u(8560),N=u(7701),H=u(20),J=u(2692),W=u(8243),A=u(9064),B=u(8487),t=u(5168),S=u(6586),f=u(573),$=u(2730),G=u(3463),D=u(3714),h=u(1009),L=u(1256),R=u(1945);const P=(a,s)=>s.id;function Z(a,s){1&a&&(t.j41(0,"mat-icon"),t.EFF(1,"add_circle"),t.k0s(),t.EFF(2," \u0e2a\u0e23\u0e49\u0e32\u0e07\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22\u0e43\u0e2b\u0e21\u0e48 "))}function Q(a,s){1&a&&(t.j41(0,"mat-icon"),t.EFF(1,"edit"),t.k0s(),t.EFF(2," \u0e41\u0e01\u0e49\u0e44\u0e02\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22 "))}function U(a,s){1&a&&(t.j41(0,"mat-icon"),t.EFF(1,"visibility"),t.k0s(),t.EFF(2," \u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22 "))}function K(a,s){if(1&a&&(t.j41(0,"span",14)(1,"mat-icon"),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&a){const e=s.$implicit;t.R7$(2),t.JRh(e.icon),t.R7$(),t.SpI(" ",e.name," ")}}function q(a,s){if(1&a&&(t.j41(0,"div",6)(1,"span",7),t.EFF(2,"\u0e01\u0e32\u0e23\u0e40\u0e15\u0e23\u0e35\u0e22\u0e21\u0e15\u0e31\u0e27:"),t.k0s(),t.j41(3,"div",13),t.Z7z(4,K,4,2,"span",14,P),t.k0s()()),2&a){const e=t.XpG(2);t.R7$(4),t.Dyx(e.appointment.preparationTags)}}function tt(a,s){if(1&a&&(t.j41(0,"div",6)(1,"span",7),t.EFF(2,"\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38:"),t.k0s(),t.j41(3,"span",8),t.EFF(4),t.k0s()()),2&a){const e=t.XpG(2);t.R7$(4),t.JRh(e.appointment.notes)}}function et(a,s){if(1&a){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){i.eBV(e);const n=t.XpG(2);return i.Njj(n.switchToEdit())}),t.j41(1,"mat-icon"),t.EFF(2,"edit"),t.k0s(),t.EFF(3," \u0e41\u0e01\u0e49\u0e44\u0e02 "),t.k0s()}}function nt(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",5)(1,"div",6)(2,"span",7),t.EFF(3,"\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48\u0e19\u0e31\u0e14:"),t.k0s(),t.j41(4,"span",8),t.EFF(5),t.k0s()(),t.j41(6,"div",6)(7,"span",7),t.EFF(8,"\u0e2a\u0e16\u0e32\u0e19\u0e30:"),t.k0s(),t.j41(9,"span",9),t.EFF(10),t.k0s()(),t.nrm(11,"mat-divider"),t.j41(12,"div",6)(13,"span",7),t.EFF(14,"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08:"),t.k0s(),t.j41(15,"span",8),t.EFF(16),t.k0s()(),t.j41(17,"div",6)(18,"span",7),t.EFF(19,"\u0e41\u0e1e\u0e17\u0e22\u0e4c:"),t.k0s(),t.j41(20,"span",8),t.EFF(21),t.k0s()(),t.j41(22,"div",6)(23,"span",7),t.EFF(24,"\u0e04\u0e19\u0e44\u0e02\u0e49:"),t.k0s(),t.j41(25,"span",8),t.EFF(26),t.k0s()(),t.nrm(27,"mat-divider"),t.j41(28,"div",6)(29,"span",7),t.EFF(30,"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48:"),t.k0s(),t.j41(31,"span",8),t.EFF(32),t.nI1(33,"date"),t.k0s()(),t.j41(34,"div",6)(35,"span",7),t.EFF(36,"\u0e40\u0e27\u0e25\u0e32:"),t.k0s(),t.j41(37,"span",8),t.EFF(38),t.k0s()(),t.j41(39,"div",6)(40,"span",7),t.EFF(41,"\u0e19\u0e31\u0e14\u0e21\u0e32\u0e40\u0e1e\u0e37\u0e48\u0e2d:"),t.k0s(),t.j41(42,"span",8),t.EFF(43),t.k0s()(),t.nVh(44,q,6,0,"div",6),t.nVh(45,tt,5,1,"div",6),t.k0s(),t.j41(46,"div",10)(47,"button",11),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.cancel.emit())}),t.EFF(48,"\u0e1b\u0e34\u0e14"),t.k0s(),t.nVh(49,et,4,0,"button",12),t.k0s()}if(2&a){const e=t.XpG();t.R7$(5),t.JRh(e.appointment.appointmentNumber),t.R7$(4),t.HbH("status-"+e.appointment.status),t.R7$(),t.SpI(" ",e.statusLabels[e.appointment.status]," "),t.R7$(6),t.JRh(null==e.appointment.room?null:e.appointment.room.name),t.R7$(5),t.JRh(null==e.appointment.doctor?null:e.appointment.doctor.name),t.R7$(5),t.E5c(" ",null==e.appointment.patient?null:e.appointment.patient.firstName," ",null==e.appointment.patient?null:e.appointment.patient.lastName," (HN: ",null==e.appointment.patient?null:e.appointment.patient.hn,") "),t.R7$(6),t.SpI(" ",t.ii3(33,15,e.appointment.date,"fullDate","","th")," "),t.R7$(6),t.JRh(null==e.appointment.timeSlot?null:e.appointment.timeSlot.label),t.R7$(5),t.JRh(null==e.appointment.purpose?null:e.appointment.purpose.name),t.R7$(),t.vxM(e.appointment.preparationTags&&e.appointment.preparationTags.length>0?44:-1),t.R7$(),t.vxM(e.appointment.notes?45:-1),t.R7$(4),t.vxM("cancelled"!==e.appointment.status&&"completed"!==e.appointment.status?49:-1)}}function ot(a,s){if(1&a&&(t.j41(0,"mat-option",19),t.nrm(1,"span",37),t.EFF(2),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.xc7("background-color",e.color),t.R7$(),t.SpI(" ",e.name," ")}}function at(a,s){if(1&a&&(t.j41(0,"mat-option",19),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.Lme(" ",e.name," (",e.specialty,") ")}}function it(a,s){if(1&a&&(t.j41(0,"mat-option",19)(1,"span",38)(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&a){const e=s.$implicit;t.Y8G("value",e),t.R7$(3),t.JRh(e.hn),t.R7$(),t.E5c(" ",e.title,"",e.firstName," ",e.lastName," ")}}function rt(a,s){if(1&a&&(t.j41(0,"mat-option",19),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.label," ")}}function st(a,s){if(1&a&&(t.j41(0,"mat-option",19),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function lt(a,s){if(1&a){const e=t.RV6();t.j41(0,"mat-chip-option",39),t.bIt("selectionChange",function(){const n=i.eBV(e).$implicit,r=t.XpG(2);return i.Njj(r.togglePreparation(n.id))}),t.j41(1,"mat-icon",40),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()}if(2&a){const e=s.$implicit,o=t.XpG(2);t.Y8G("selected",o.selectedPreparations().includes(e.id)),t.R7$(2),t.JRh(e.icon),t.R7$(),t.SpI(" ",e.name," ")}}function ct(a,s){if(1&a){const e=t.RV6();t.j41(0,"form",16),t.bIt("ngSubmit",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.onSubmit())}),t.j41(1,"mat-form-field",17)(2,"mat-label"),t.EFF(3,"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08"),t.k0s(),t.j41(4,"mat-select",18),t.bIt("selectionChange",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.onRoomChange())}),t.Z7z(5,ot,3,4,"mat-option",19,P),t.k0s(),t.j41(7,"mat-error"),t.EFF(8,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08"),t.k0s()(),t.j41(9,"mat-form-field",17)(10,"mat-label"),t.EFF(11,"\u0e41\u0e1e\u0e17\u0e22\u0e4c"),t.k0s(),t.j41(12,"mat-select",20),t.Z7z(13,at,2,3,"mat-option",19,P),t.k0s(),t.j41(15,"mat-error"),t.EFF(16,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e41\u0e1e\u0e17\u0e22\u0e4c"),t.k0s()(),t.j41(17,"mat-form-field",17)(18,"mat-label"),t.EFF(19,"\u0e04\u0e19\u0e44\u0e02\u0e49 (\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e14\u0e49\u0e27\u0e22 HN, CID, \u0e2b\u0e23\u0e37\u0e2d\u0e0a\u0e37\u0e48\u0e2d)"),t.k0s(),t.j41(20,"input",21),t.bIt("input",function(n){i.eBV(e);const r=t.XpG();return i.Njj(r.onPatientSearchChange(n))}),t.k0s(),t.j41(21,"mat-autocomplete",22,0),t.bIt("optionSelected",function(n){i.eBV(e);const r=t.XpG();return i.Njj(r.onPatientSelect(n))}),t.Z7z(23,it,5,5,"mat-option",19,P),t.k0s(),t.j41(25,"mat-error"),t.EFF(26,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e04\u0e19\u0e44\u0e02\u0e49"),t.k0s()(),t.j41(27,"div",23)(28,"mat-form-field",24)(29,"mat-label"),t.EFF(30,"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48"),t.k0s(),t.nrm(31,"input",25)(32,"mat-datepicker-toggle",26)(33,"mat-datepicker",null,1),t.j41(35,"mat-error"),t.EFF(36,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48"),t.k0s()(),t.j41(37,"mat-form-field",24)(38,"mat-label"),t.EFF(39,"\u0e0a\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32"),t.k0s(),t.j41(40,"mat-select",27),t.Z7z(41,rt,2,2,"mat-option",19,P),t.k0s(),t.j41(43,"mat-error"),t.EFF(44,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e0a\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32"),t.k0s()()(),t.j41(45,"mat-form-field",17)(46,"mat-label"),t.EFF(47,"\u0e19\u0e31\u0e14\u0e21\u0e32\u0e40\u0e1e\u0e37\u0e48\u0e2d"),t.k0s(),t.j41(48,"mat-select",28),t.bIt("selectionChange",function(n){i.eBV(e);const r=t.XpG();return i.Njj(r.onPurposeChange(n))}),t.Z7z(49,st,2,2,"mat-option",19,P),t.k0s()(),t.j41(51,"div",29)(52,"label"),t.EFF(53,"\u0e01\u0e32\u0e23\u0e40\u0e15\u0e23\u0e35\u0e22\u0e21\u0e15\u0e31\u0e27"),t.k0s(),t.j41(54,"div",30),t.Z7z(55,lt,4,3,"mat-chip-option",31,P),t.k0s()(),t.j41(57,"mat-form-field",17)(58,"mat-label"),t.EFF(59,"\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d"),t.k0s(),t.nrm(60,"input",32),t.j41(61,"mat-icon",33),t.EFF(62,"phone"),t.k0s()(),t.j41(63,"mat-form-field",17)(64,"mat-label"),t.EFF(65,"\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38"),t.k0s(),t.nrm(66,"textarea",34),t.k0s(),t.j41(67,"div",10)(68,"button",35),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.cancel.emit())}),t.EFF(69," \u0e22\u0e01\u0e40\u0e25\u0e34\u0e01 "),t.k0s(),t.j41(70,"button",36)(71,"mat-icon"),t.EFF(72,"save"),t.k0s(),t.EFF(73),t.k0s()()()}if(2&a){const e=t.sdS(22),o=t.sdS(34),n=t.XpG();t.Y8G("formGroup",n.form),t.R7$(5),t.Dyx(n.rooms),t.R7$(8),t.Dyx(n.availableDoctors()),t.R7$(7),t.Y8G("matAutocomplete",e),t.R7$(),t.Y8G("displayWith",n.displayPatient),t.R7$(2),t.Dyx(n.patientResults()),t.R7$(8),t.Y8G("matDatepicker",o),t.R7$(),t.Y8G("for",o),t.R7$(9),t.Dyx(n.timeSlots),t.R7$(8),t.Dyx(n.purposes),t.R7$(6),t.Dyx(n.preparations),t.R7$(15),t.Y8G("disabled",!n.form.valid),t.R7$(3),t.SpI(" ","create"===n.mode?"\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22":"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"," ")}}let ut=(()=>{class a{mode="create";appointment;preSelectedDate;rooms=[];doctors=[];timeSlots=[];purposes=[];preparations=[];save=new t.bkB;cancel=new t.bkB;searchPatient=new t.bkB;fb=(0,i.WQX)(m.ok);service=(0,i.WQX)(B.o);form;statusLabels=A.zN;patientResults=(0,i.vPA)([]);selectedPatient=(0,i.vPA)(null);selectedPreparations=(0,i.vPA)([]);availableDoctors=(0,E.EW)(()=>{const e=this.form?.get("roomId")?.value;return e?this.doctors.filter(o=>o.roomIds.includes(e)):this.doctors});ngOnInit(){this.initForm()}ngOnChanges(e){(e.appointment||e.preSelectedDate)&&this.initForm()}initForm(){const e=this.appointment;this.form=this.fb.group({roomId:[e?.roomId||"",m.k0.required],doctorId:[e?.doctorId||"",m.k0.required],patientId:[e?.patientId||"",m.k0.required],patientSearch:[e?.patient?this.displayPatient(e.patient):""],date:[e?.date||this.preSelectedDate||new Date,m.k0.required],timeSlotId:[e?.timeSlotId||"",m.k0.required],purposeId:[e?.purposeId||""],contactPhone:[e?.contactPhone||""],notes:[e?.notes||""]}),this.selectedPreparations.set(e?.preparations||[]),this.selectedPatient.set(e?.patient||null)}onRoomChange(){const e=this.form.get("roomId")?.value,o=this.form.get("doctorId")?.value;this.doctors.filter(r=>r.roomIds.includes(e)).find(r=>r.id===o)||this.form.patchValue({doctorId:""})}onPatientSearchChange(e){const o=e.target.value;if(o.length>=2){const n=this.service.searchPatients(o);this.patientResults.set(n)}else this.patientResults.set([])}onPatientSelect(e){const o=e.option.value;this.selectedPatient.set(o),this.form.patchValue({patientId:o.id,contactPhone:o.phone||""})}displayPatient(e){return e?`${e.hn} - ${e.title}${e.firstName} ${e.lastName}`:""}onPurposeChange(e){const o=this.purposes.find(n=>n.id===e.value);o?.defaultPreparations&&this.selectedPreparations.set([...o.defaultPreparations])}togglePreparation(e){const o=this.selectedPreparations();o.includes(e)?this.selectedPreparations.set(o.filter(n=>n!==e)):this.selectedPreparations.set([...o,e])}switchToEdit(){this.mode="edit"}onSubmit(){if(this.form.valid){const e=this.form.value,o={roomId:e.roomId,doctorId:e.doctorId,patientId:e.patientId,date:e.date,timeSlotId:e.timeSlotId,purposeId:e.purposeId,preparations:this.selectedPreparations(),contactPhone:e.contactPhone,notes:e.notes,tags:[],metadata:{},status:"scheduled"};this.save.emit(o)}}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=t.VBU({type:a,selectors:[["app-appointment-form"]],inputs:{mode:"mode",appointment:"appointment",preSelectedDate:"preSelectedDate",rooms:"rooms",doctors:"doctors",timeSlots:"timeSlots",purposes:"purposes",preparations:"preparations"},outputs:{save:"save",cancel:"cancel",searchPatient:"searchPatient"},features:[t.Jv_([(0,$.aw)()]),t.OA$],decls:12,vars:2,consts:[["patientAuto","matAutocomplete"],["datePicker",""],["appearance","outlined",1,"appointment-form-card"],["mat-icon-button","",3,"click"],[3,"formGroup"],[1,"view-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"status-chip"],[1,"form-actions"],["mat-button","",3,"click"],["mat-flat-button","","color","primary"],[1,"prep-tags"],[1,"prep-tag"],["mat-flat-button","","color","primary",3,"click"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["formControlName","roomId",3,"selectionChange"],[3,"value"],["formControlName","doctorId"],["matInput","","formControlName","patientSearch",3,"input","matAutocomplete"],[3,"optionSelected","displayWith"],[1,"row"],["appearance","outline",1,"half-width"],["matInput","","formControlName","date",3,"matDatepicker"],["matIconSuffix","",3,"for"],["formControlName","timeSlotId"],["formControlName","purposeId",3,"selectionChange"],[1,"preparations-section"],[1,"prep-chips"],[3,"selected"],["matInput","","formControlName","contactPhone","type","tel"],["matPrefix",""],["matInput","","formControlName","notes","rows","3"],["mat-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],[1,"room-color-dot"],[1,"patient-option"],[3,"selectionChange","selected"],["matChipAvatar",""]],template:function(o,n){if(1&o&&(t.j41(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title"),t.nVh(3,Z,3,0)(4,Q,3,0)(5,U,3,0),t.k0s(),t.j41(6,"button",3),t.bIt("click",function(){return n.cancel.emit()}),t.j41(7,"mat-icon"),t.EFF(8,"close"),t.k0s()()(),t.j41(9,"mat-card-content"),t.nVh(10,nt,50,20)(11,ct,74,7,"form",4),t.k0s()()),2&o){let r;t.R7$(3),t.vxM("create"===(r=n.mode)?3:"edit"===r?4:"view"===r?5:-1),t.R7$(7),t.vxM("view"===n.mode&&n.appointment?10:11)}},dependencies:[b.MD,m.X1,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,g.Hu,g.RN,g.m2,g.MM,g.dh,V.R,h.rl,h.nJ,h.TL,h.JW,h.yw,S.fS,S.fg,x.Ve,x.VO,L.wT,f.X6,f.Vh,f.bZ,f.bU,y.Hl,y.$z,R.iY,v.m_,v.An,k.YN,k.yZ,k.gq,G.jL,G.$3,G.pN,D.w,D.q,b.vh],styles:[".appointment-form-card[_ngcontent-%COMP%]{height:100%}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--ax-background-subtle);border-bottom:1px solid var(--ax-border-default)}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0;font-size:1.125rem}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--ax-primary-default)}mat-card-content[_ngcontent-%COMP%]{padding:1.5rem}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{width:calc(50% - .5rem)}.row[_ngcontent-%COMP%]{display:flex;gap:1rem}.room-color-dot[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:8px}.patient-option[_ngcontent-%COMP%]{display:flex;gap:.5rem}.patient-option[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--ax-primary-default)}.preparations-section[_ngcontent-%COMP%]{margin-bottom:1rem}.preparations-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:var(--ax-text-secondary);margin-bottom:.5rem}.preparations-section[_ngcontent-%COMP%]   .prep-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--ax-border-default)}.view-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{min-width:100px;font-size:.875rem;color:var(--ax-text-secondary)}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.875rem;color:var(--ax-text-primary)}.status-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:1rem;font-size:.75rem;font-weight:500}.status-chip.status-scheduled[_ngcontent-%COMP%]{background:var(--ax-primary-subtle);color:var(--ax-primary-default)}.status-chip.status-confirmed[_ngcontent-%COMP%]{background:var(--ax-info-subtle);color:var(--ax-info-default)}.status-chip.status-checked-in[_ngcontent-%COMP%], .status-chip.status-in-progress[_ngcontent-%COMP%]{background:var(--ax-warning-subtle);color:var(--ax-warning-default)}.status-chip.status-completed[_ngcontent-%COMP%]{background:var(--ax-success-subtle);color:var(--ax-success-default)}.status-chip.status-cancelled[_ngcontent-%COMP%], .status-chip.status-no-show[_ngcontent-%COMP%]{background:var(--ax-error-subtle);color:var(--ax-error-default)}.prep-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.prep-tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .5rem;background:var(--ax-background-subtle);border-radius:.25rem;font-size:.75rem}.prep-tag[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}mat-divider[_ngcontent-%COMP%]{margin:.5rem 0}"]})}return a})();var _=u(6631),X=u(3468),T=u(4355),j=u(5534),z=u(3274);const mt=()=>[10,25,50,100],pt=(a,s)=>s.id;function dt(a,s){if(1&a){const e=t.RV6();t.j41(0,"button",35),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.clearSearch())}),t.j41(1,"mat-icon"),t.EFF(2,"close"),t.k0s()()}}function Et(a,s){if(1&a&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function _t(a,s){if(1&a&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&a){const e=s.$implicit,o=t.XpG();t.Y8G("value",e),t.R7$(),t.SpI(" ",o.statusLabels[e]," ")}}function gt(a,s){1&a&&(t.j41(0,"th",36),t.EFF(1,"\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48\u0e19\u0e31\u0e14"),t.k0s())}function ft(a,s){if(1&a&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.R7$(),t.JRh(e.appointmentNumber)}}function ht(a,s){1&a&&(t.j41(0,"th",36),t.EFF(1,"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48"),t.k0s())}function Ct(a,s){if(1&a&&(t.j41(0,"td",37),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&a){const e=s.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.date,"dd/MM/yyyy")," ")}}function Ft(a,s){1&a&&(t.j41(0,"th",38),t.EFF(1,"\u0e40\u0e27\u0e25\u0e32"),t.k0s())}function bt(a,s){if(1&a&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.R7$(),t.SpI(" ",(null==e.timeSlot?null:e.timeSlot.label)||"-"," ")}}function yt(a,s){1&a&&(t.j41(0,"th",36),t.EFF(1,"\u0e04\u0e19\u0e44\u0e02\u0e49"),t.k0s())}function kt(a,s){if(1&a&&(t.j41(0,"td",37)(1,"div",39)(2,"span",40),t.EFF(3),t.k0s(),t.j41(4,"span",41),t.EFF(5),t.k0s()()()),2&a){const e=s.$implicit;t.R7$(3),t.JRh(null==e.patient?null:e.patient.hn),t.R7$(2),t.Lme(" ",null==e.patient?null:e.patient.firstName," ",null==e.patient?null:e.patient.lastName," ")}}function vt(a,s){1&a&&(t.j41(0,"th",36),t.EFF(1,"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08"),t.k0s())}function jt(a,s){if(1&a&&(t.j41(0,"td",37)(1,"span",42),t.EFF(2),t.k0s()()),2&a){const e=s.$implicit;t.R7$(),t.xc7("background-color",(null==e.room?null:e.room.color)+"20")("color",null==e.room?null:e.room.color),t.R7$(),t.SpI(" ",(null==e.room?null:e.room.name)||"-"," ")}}function Mt(a,s){1&a&&(t.j41(0,"th",36),t.EFF(1,"\u0e41\u0e1e\u0e17\u0e22\u0e4c"),t.k0s())}function Pt(a,s){if(1&a&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.R7$(),t.SpI(" ",(null==e.doctor?null:e.doctor.name)||"-"," ")}}function xt(a,s){1&a&&(t.j41(0,"th",38),t.EFF(1,"\u0e19\u0e31\u0e14\u0e21\u0e32\u0e40\u0e1e\u0e37\u0e48\u0e2d"),t.k0s())}function Dt(a,s){if(1&a&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.R7$(),t.SpI(" ",(null==e.purpose?null:e.purpose.name)||"-"," ")}}function wt(a,s){1&a&&(t.j41(0,"th",36),t.EFF(1,"\u0e2a\u0e16\u0e32\u0e19\u0e30"),t.k0s())}function Ot(a,s){if(1&a&&(t.j41(0,"td",37)(1,"span",43),t.EFF(2),t.k0s()()),2&a){const e=s.$implicit,o=t.XpG();t.R7$(),t.HbH("status-"+e.status),t.R7$(),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function At(a,s){1&a&&(t.j41(0,"th",38),t.EFF(1,"\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23"),t.k0s())}function St(a,s){if(1&a){const e=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.editAppointment.emit(n))}),t.j41(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()(),t.j41(3,"button",46)(4,"mat-icon"),t.EFF(5,"more_vert"),t.k0s()(),t.j41(6,"mat-menu",null,2)(8,"button",47),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onChangeStatus(n,"confirmed"))}),t.j41(9,"mat-icon"),t.EFF(10,"check_circle"),t.k0s(),t.EFF(11," \u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e19\u0e31\u0e14 "),t.k0s(),t.j41(12,"button",47),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onChangeStatus(n,"checked-in"))}),t.j41(13,"mat-icon"),t.EFF(14,"login"),t.k0s(),t.EFF(15," \u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e21\u0e32\u0e16\u0e36\u0e07 "),t.k0s(),t.j41(16,"button",47),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onChangeStatus(n,"in-progress"))}),t.j41(17,"mat-icon"),t.EFF(18,"play_arrow"),t.k0s(),t.EFF(19," \u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e23\u0e27\u0e08 "),t.k0s(),t.j41(20,"button",47),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onChangeStatus(n,"completed"))}),t.j41(21,"mat-icon"),t.EFF(22,"done_all"),t.k0s(),t.EFF(23," \u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19 "),t.k0s(),t.nrm(24,"mat-divider"),t.j41(25,"button",48),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.cancelAppointment.emit(n))}),t.j41(26,"mat-icon"),t.EFF(27,"cancel"),t.k0s(),t.EFF(28," \u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e19\u0e31\u0e14 "),t.k0s()()}if(2&a){const e=t.sdS(7);t.R7$(3),t.Y8G("matMenuTriggerFor",e)}}function Rt(a,s){if(1&a){const e=t.RV6();t.j41(0,"td",37)(1,"button",44),t.bIt("click",function(){const n=i.eBV(e).$implicit,r=t.XpG();return i.Njj(r.viewAppointment.emit(n))}),t.j41(2,"mat-icon"),t.EFF(3,"visibility"),t.k0s()(),t.nVh(4,St,29,1),t.k0s()}if(2&a){const e=s.$implicit;t.R7$(4),t.vxM("cancelled"!==e.status&&"completed"!==e.status?4:-1)}}function Tt(a,s){1&a&&t.nrm(0,"tr",49)}function It(a,s){1&a&&t.nrm(0,"tr",50)}function Vt(a,s){if(1&a&&(t.j41(0,"tr",51)(1,"td",52)(2,"mat-icon"),t.EFF(3,"inbox"),t.k0s(),t.j41(4,"span"),t.EFF(5,"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22"),t.k0s()()()),2&a){const e=t.XpG();t.R7$(),t.BMQ("colspan",e.displayedColumns.length)}}let Nt=(()=>{class a{appointments=[];rooms=[];doctors=[];viewAppointment=new t.bkB;editAppointment=new t.bkB;cancelAppointment=new t.bkB;changeStatus=new t.bkB;paginator;sort;dataSource=new _.I6([]);displayedColumns=["appointmentNumber","date","time","patient","room","doctor","purpose","status","actions"];allStatuses=["scheduled","confirmed","checked-in","in-progress","completed","cancelled","no-show"];statusLabels=A.zN;searchText="";dateFrom=null;dateTo=null;selectedRoomId="";selectedStatuses=[];ngOnInit(){this.dataSource.data=this.appointments}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(e,o)=>{const n=o.toLowerCase();return e.appointmentNumber.toLowerCase().includes(n)||e.patient?.hn.toLowerCase().includes(n)||e.patient?.cid.includes(o)||e.patient?.firstName.toLowerCase().includes(n)||e.patient?.lastName.toLowerCase().includes(n)||!1}}getStatusLabel(e){return this.statusLabels[e]||e}ngOnChanges(){this.applyFilters()}applyFilters(){let e=[...this.appointments];if(this.searchText){const o=this.searchText.toLowerCase();e=e.filter(n=>n.appointmentNumber.toLowerCase().includes(o)||n.patient?.hn.toLowerCase().includes(o)||n.patient?.cid.includes(this.searchText)||n.patient?.firstName.toLowerCase().includes(o)||n.patient?.lastName.toLowerCase().includes(o))}if(this.dateFrom){const o=new Date(this.dateFrom);o.setHours(0,0,0,0),e=e.filter(n=>new Date(n.date)>=o)}if(this.dateTo){const o=new Date(this.dateTo);o.setHours(23,59,59,999),e=e.filter(n=>new Date(n.date)<=o)}this.selectedRoomId&&(e=e.filter(o=>o.roomId===this.selectedRoomId)),this.selectedStatuses.length>0&&(e=e.filter(o=>this.selectedStatuses.includes(o.status))),this.dataSource.data=e}clearSearch(){this.searchText="",this.applyFilters()}clearFilters(){this.searchText="",this.dateFrom=null,this.dateTo=null,this.selectedRoomId="",this.selectedStatuses=[],this.applyFilters()}onChangeStatus(e,o){this.changeStatus.emit({apt:e,status:o})}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=t.VBU({type:a,selectors:[["app-appointment-list"]],viewQuery:function(o,n){if(1&o&&(t.GBs(X.iy,5),t.GBs(T.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(n.paginator=r.first),t.mGM(r=t.lsd())&&(n.sort=r.first)}},inputs:{appointments:"appointments",rooms:"rooms",doctors:"doctors"},outputs:{viewAppointment:"viewAppointment",editAppointment:"editAppointment",cancelAppointment:"cancelAppointment",changeStatus:"changeStatus"},features:[t.Jv_([(0,$.aw)()]),t.OA$],decls:74,vars:16,consts:[["fromPicker",""],["toPicker",""],["statusMenu","matMenu"],["appearance","outlined",1,"appointment-list-card"],[1,"filters-section"],["appearance","outline",1,"filter-field"],["matInput","","placeholder","\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e04\u0e49\u0e19\u0e2b\u0e32...",3,"ngModelChange","input","ngModel"],["matPrefix",""],["mat-icon-button","","matSuffix",""],["appearance","outline",1,"filter-field","date-field"],["matInput","",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],[3,"valueChange","selectionChange","value"],["value",""],[3,"value"],["multiple","",3,"valueChange","selectionChange","value"],["mat-stroked-button","",3,"click"],[1,"table-container"],["mat-table","","matSort","",1,"appointment-table",3,"dataSource"],["matColumnDef","appointmentNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","time"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","patient"],["matColumnDef","room"],["matColumnDef","doctor"],["matColumnDef","purpose"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-icon-button","","matSuffix","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"patient-cell"],[1,"patient-hn"],[1,"patient-name"],[1,"room-badge"],[1,"status-chip"],["mat-icon-button","","matTooltip","\u0e14\u0e39\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14",3,"click"],["mat-icon-button","","matTooltip","\u0e41\u0e01\u0e49\u0e44\u0e02",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"cancel-item",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mat-cell","no-data"]],template:function(o,n){if(1&o){const r=t.RV6();t.j41(0,"mat-card",3)(1,"div",4)(2,"mat-form-field",5)(3,"mat-label"),t.EFF(4,"\u0e04\u0e49\u0e19\u0e2b\u0e32 (HN, CID, \u0e0a\u0e37\u0e48\u0e2d)"),t.k0s(),t.j41(5,"input",6),t.mxI("ngModelChange",function(l){return i.eBV(r),t.DH7(n.searchText,l)||(n.searchText=l),i.Njj(l)}),t.bIt("input",function(){return i.eBV(r),i.Njj(n.applyFilters())}),t.k0s(),t.j41(6,"mat-icon",7),t.EFF(7,"search"),t.k0s(),t.nVh(8,dt,3,0,"button",8),t.k0s(),t.j41(9,"mat-form-field",9)(10,"mat-label"),t.EFF(11,"\u0e08\u0e32\u0e01\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48"),t.k0s(),t.j41(12,"input",10),t.mxI("ngModelChange",function(l){return i.eBV(r),t.DH7(n.dateFrom,l)||(n.dateFrom=l),i.Njj(l)}),t.bIt("dateChange",function(){return i.eBV(r),i.Njj(n.applyFilters())}),t.k0s(),t.nrm(13,"mat-datepicker-toggle",11)(14,"mat-datepicker",null,0),t.k0s(),t.j41(16,"mat-form-field",9)(17,"mat-label"),t.EFF(18,"\u0e16\u0e36\u0e07\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48"),t.k0s(),t.j41(19,"input",10),t.mxI("ngModelChange",function(l){return i.eBV(r),t.DH7(n.dateTo,l)||(n.dateTo=l),i.Njj(l)}),t.bIt("dateChange",function(){return i.eBV(r),i.Njj(n.applyFilters())}),t.k0s(),t.nrm(20,"mat-datepicker-toggle",11)(21,"mat-datepicker",null,1),t.k0s(),t.j41(23,"mat-form-field",5)(24,"mat-label"),t.EFF(25,"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08"),t.k0s(),t.j41(26,"mat-select",12),t.mxI("valueChange",function(l){return i.eBV(r),t.DH7(n.selectedRoomId,l)||(n.selectedRoomId=l),i.Njj(l)}),t.bIt("selectionChange",function(){return i.eBV(r),i.Njj(n.applyFilters())}),t.j41(27,"mat-option",13),t.EFF(28,"\u0e17\u0e38\u0e01\u0e2b\u0e49\u0e2d\u0e07"),t.k0s(),t.Z7z(29,Et,2,2,"mat-option",14,pt),t.k0s()(),t.j41(31,"mat-form-field",5)(32,"mat-label"),t.EFF(33,"\u0e2a\u0e16\u0e32\u0e19\u0e30"),t.k0s(),t.j41(34,"mat-select",15),t.mxI("valueChange",function(l){return i.eBV(r),t.DH7(n.selectedStatuses,l)||(n.selectedStatuses=l),i.Njj(l)}),t.bIt("selectionChange",function(){return i.eBV(r),i.Njj(n.applyFilters())}),t.Z7z(35,_t,2,2,"mat-option",14,t.fX1),t.k0s()(),t.j41(37,"button",16),t.bIt("click",function(){return i.eBV(r),i.Njj(n.clearFilters())}),t.j41(38,"mat-icon"),t.EFF(39,"filter_alt_off"),t.k0s(),t.EFF(40," \u0e25\u0e49\u0e32\u0e07\u0e15\u0e31\u0e27\u0e01\u0e23\u0e2d\u0e07 "),t.k0s()(),t.j41(41,"div",17)(42,"table",18),t.qex(43,19),t.DNE(44,gt,2,0,"th",20)(45,ft,2,1,"td",21),t.bVm(),t.qex(46,22),t.DNE(47,ht,2,0,"th",20)(48,Ct,3,4,"td",21),t.bVm(),t.qex(49,23),t.DNE(50,Ft,2,0,"th",24)(51,bt,2,1,"td",21),t.bVm(),t.qex(52,25),t.DNE(53,yt,2,0,"th",20)(54,kt,6,3,"td",21),t.bVm(),t.qex(55,26),t.DNE(56,vt,2,0,"th",20)(57,jt,3,5,"td",21),t.bVm(),t.qex(58,27),t.DNE(59,Mt,2,0,"th",20)(60,Pt,2,1,"td",21),t.bVm(),t.qex(61,28),t.DNE(62,xt,2,0,"th",24)(63,Dt,2,1,"td",21),t.bVm(),t.qex(64,29),t.DNE(65,wt,2,0,"th",20)(66,Ot,3,3,"td",21),t.bVm(),t.qex(67,30),t.DNE(68,At,2,0,"th",24)(69,Rt,5,1,"td",21),t.bVm(),t.DNE(70,Tt,1,0,"tr",31)(71,It,1,0,"tr",32)(72,Vt,6,1,"tr",33),t.k0s()(),t.nrm(73,"mat-paginator",34),t.k0s()}if(2&o){const r=t.sdS(15),c=t.sdS(22);t.R7$(5),t.R50("ngModel",n.searchText),t.R7$(3),t.vxM(n.searchText?8:-1),t.R7$(4),t.Y8G("matDatepicker",r),t.R50("ngModel",n.dateFrom),t.R7$(),t.Y8G("for",r),t.R7$(6),t.Y8G("matDatepicker",c),t.R50("ngModel",n.dateTo),t.R7$(),t.Y8G("for",c),t.R7$(6),t.R50("value",n.selectedRoomId),t.R7$(3),t.Dyx(n.rooms),t.R7$(5),t.R50("value",n.selectedStatuses),t.R7$(),t.Dyx(n.allStatuses),t.R7$(7),t.Y8G("dataSource",n.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(2),t.Y8G("pageSizeOptions",t.lJ4(15,mt))("pageSize",25)}},dependencies:[b.MD,m.YN,m.me,m.BC,m.vS,g.Hu,g.RN,_.tP,_.Zl,_.tL,_.ji,_.cC,_.YV,_.iL,_.KS,_.$R,_.YZ,_.NB,_.ky,X.Ou,X.iy,T.NQ,T.B4,T.aE,V.R,h.rl,h.nJ,h.JW,h.yw,S.fS,S.fg,x.Ve,x.VO,L.wT,f.X6,f.Vh,f.bZ,f.bU,y.Hl,y.$z,R.iY,v.m_,v.An,k.YN,j.Cn,j.kk,j.fb,j.Cp,N.u,z.oV,D.w,D.q,b.vh],styles:[".appointment-list-card[_ngcontent-%COMP%]{padding:0}.filters-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;padding:1rem;background:var(--ax-background-subtle);border-bottom:1px solid var(--ax-border-default)}.filter-field[_ngcontent-%COMP%]{min-width:200px}.filter-field.date-field[_ngcontent-%COMP%]{min-width:150px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.appointment-table[_ngcontent-%COMP%]{width:100%}.appointment-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{background:var(--ax-background-subtle);font-weight:600;color:var(--ax-text-secondary)}.appointment-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:.75rem 1rem}.patient-cell[_ngcontent-%COMP%]{display:flex;flex-direction:column}.patient-cell[_ngcontent-%COMP%]   .patient-hn[_ngcontent-%COMP%]{font-weight:600;color:var(--ax-primary-default);font-size:.75rem}.patient-cell[_ngcontent-%COMP%]   .patient-name[_ngcontent-%COMP%]{font-size:.875rem}.room-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:500}.status-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:1rem;font-size:.75rem;font-weight:500}.status-chip.status-scheduled[_ngcontent-%COMP%]{background:var(--ax-primary-subtle);color:var(--ax-primary-default)}.status-chip.status-confirmed[_ngcontent-%COMP%]{background:var(--ax-info-subtle);color:var(--ax-info-default)}.status-chip.status-checked-in[_ngcontent-%COMP%], .status-chip.status-in-progress[_ngcontent-%COMP%]{background:var(--ax-warning-subtle);color:var(--ax-warning-default)}.status-chip.status-completed[_ngcontent-%COMP%]{background:var(--ax-success-subtle);color:var(--ax-success-default)}.status-chip.status-cancelled[_ngcontent-%COMP%], .status-chip.status-no-show[_ngcontent-%COMP%]{background:var(--ax-error-subtle);color:var(--ax-error-default)}.no-data[_ngcontent-%COMP%]{text-align:center;padding:3rem!important;color:var(--ax-text-secondary)}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;margin-bottom:.5rem;display:block;margin-left:auto;margin-right:auto}.cancel-item[_ngcontent-%COMP%]{color:var(--ax-error-default)}mat-paginator[_ngcontent-%COMP%]{border-top:1px solid var(--ax-border-default)}"]})}return a})();const Bt=(a,s)=>s.slot.id,$t=(a,s)=>s.date;function Gt(a,s){if(1&a&&(t.j41(0,"div",39)(1,"mat-icon"),t.EFF(2,"person"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&a){let e;const o=t.XpG();t.R7$(4),t.JRh(null==(e=o.selectedDoctor())?null:e.name)}}function Lt(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",44),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onViewAppointment.emit(n.appointment))}),t.j41(1,"div",45)(2,"span",46),t.EFF(3),t.k0s(),t.j41(4,"span",47),t.EFF(5),t.k0s()(),t.j41(6,"div",48)(7,"mat-chip",49),t.EFF(8),t.k0s(),t.j41(9,"button",50),t.bIt("click",function(n){return i.eBV(e),i.Njj(n.stopPropagation())}),t.j41(10,"mat-icon"),t.EFF(11,"more_vert"),t.k0s()(),t.j41(12,"mat-menu",null,1)(14,"button",51),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onChangeStatus.emit({apt:n.appointment,status:"checked-in"}))}),t.j41(15,"mat-icon"),t.EFF(16,"login"),t.k0s(),t.j41(17,"span"),t.EFF(18,"\u0e21\u0e32\u0e16\u0e36\u0e07\u0e41\u0e25\u0e49\u0e27"),t.k0s()(),t.j41(19,"button",51),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onChangeStatus.emit({apt:n.appointment,status:"in-progress"}))}),t.j41(20,"mat-icon"),t.EFF(21,"play_arrow"),t.k0s(),t.j41(22,"span"),t.EFF(23,"\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e23\u0e27\u0e08"),t.k0s()(),t.j41(24,"button",51),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onChangeStatus.emit({apt:n.appointment,status:"completed"}))}),t.j41(25,"mat-icon"),t.EFF(26,"check_circle"),t.k0s(),t.j41(27,"span"),t.EFF(28,"\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19"),t.k0s()(),t.nrm(29,"mat-divider"),t.j41(30,"button",51),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onFollowUp.emit(n.appointment))}),t.j41(31,"mat-icon"),t.EFF(32,"event_repeat"),t.k0s(),t.j41(33,"span"),t.EFF(34,"\u0e19\u0e31\u0e14 Follow-up"),t.k0s()(),t.nrm(35,"mat-divider"),t.j41(36,"button",51),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onChangeStatus.emit({apt:n.appointment,status:"no-show"}))}),t.j41(37,"mat-icon"),t.EFF(38,"person_off"),t.k0s(),t.j41(39,"span"),t.EFF(40,"\u0e44\u0e21\u0e48\u0e21\u0e32"),t.k0s()()()()()}if(2&a){const e=t.sdS(13),o=t.XpG().$implicit,n=t.XpG();t.R7$(3),t.Lme(" ",null==o.appointment.patient?null:o.appointment.patient.firstName," ",null==o.appointment.patient?null:o.appointment.patient.lastName," "),t.R7$(2),t.SpI(" HN: ",null==o.appointment.patient?null:o.appointment.patient.hn," "),t.R7$(2),t.HbH("status-"+o.appointment.status),t.Y8G("disabled",!0),t.R7$(),t.SpI(" ",n.getStatusLabel(o.appointment.status)," "),t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function Xt(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",52),t.bIt("click",function(){i.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return i.Njj(r.onBookSlot.emit(n.slot))}),t.j41(1,"span",53),t.EFF(2,"\u0e27\u0e48\u0e32\u0e07"),t.k0s(),t.j41(3,"button",54)(4,"mat-icon"),t.EFF(5,"add"),t.k0s(),t.EFF(6," \u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22 "),t.k0s()()}}function zt(a,s){if(1&a&&(t.j41(0,"div",40)(1,"div",41),t.EFF(2),t.k0s(),t.nVh(3,Lt,41,8,"div",42)(4,Xt,7,0,"div",43),t.k0s()),2&a){const e=s.$implicit;t.AVh("past",e.isPast)("current",e.isCurrent)("available",e.isAvailable)("booked",!e.isAvailable),t.R7$(2),t.SpI(" ",e.slot.startTime," "),t.R7$(),t.vxM(e.appointment?3:4)}}function Yt(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",55),t.bIt("click",function(){const n=i.eBV(e).$implicit,r=t.XpG();return i.Njj(r.onDayClick(n.date))}),t.j41(1,"div",56),t.EFF(2),t.k0s(),t.j41(3,"div",57),t.EFF(4),t.k0s(),t.j41(5,"div",58),t.EFF(6),t.k0s(),t.nrm(7,"div",59),t.k0s()}if(2&a){const e=s.$implicit;t.HbH(e.availability),t.AVh("today",e.isToday)("selected",e.isSelected),t.R7$(2),t.JRh(e.dayName),t.R7$(2),t.JRh(e.dayNumber),t.R7$(2),t.Lme("",e.booked,"/",e.limit)}}let Ht=(()=>{class a{appointments=[];timeSlots=[];selectedRoom;selectedDoctor;doctorLimit=50;onViewAppointment=new t.bkB;onChangeStatus=new t.bkB;onBookSlot=new t.bkB;onQuickBook=new t.bkB;onOpenCalendar=new t.bkB;onSelectDate=new t.bkB;onFindNextSlot=new t.bkB;onSearchPatient=new t.bkB;onFollowUp=new t.bkB;selectedDate=(0,i.vPA)(new Date);prevDay(){const e=this.selectedDate(),o=new Date(e);o.setDate(e.getDate()-1),this.selectedDate.set(o)}nextDay(){const e=this.selectedDate(),o=new Date(e);o.setDate(e.getDate()+1),this.selectedDate.set(o)}goToToday(){this.selectedDate.set(new Date)}isToday(){const e=this.selectedDate();return this.isSameDay(e,new Date)}onDateChange(e){e.value&&this.selectedDate.set(e.value)}onDayClick(e){this.selectedDate.set(e),this.onSelectDate.emit(e)}summary=(0,E.EW)(()=>{const e=this.getTodayAppointments();return{total:e.length,limit:this.doctorLimit,arrived:e.filter(o=>"checked-in"===o.status).length,waiting:e.filter(o=>"checked-in"===o.status).length,inProgress:e.filter(o=>"in-progress"===o.status).length,completed:e.filter(o=>"completed"===o.status).length,noShow:e.filter(o=>"no-show"===o.status).length}});todaySlots=(0,E.EW)(()=>{const e=this.getTodayAppointments(),o=new Date,n=this.selectedDate(),r=this.isSameDay(n,o),c=o.getHours(),l=o.getMinutes();return this.timeSlots.map(p=>{const[C,F]=p.startTime.split(":").map(Number),M=e.find(pe=>pe.timeSlotId===p.id),d=r&&(C<c||C===c&&F<l),w=r&&C===c&&Math.abs(F-l)<30;return{slot:p,appointment:M,isAvailable:!M,isPast:d,isCurrent:w}})});weekDays=(0,E.EW)(()=>{const e=[],o=new Date,n=this.selectedDate(),r=["\u0e2d\u0e32.","\u0e08.","\u0e2d.","\u0e1e.","\u0e1e\u0e24.","\u0e28.","\u0e2a."],c=new Date(n);c.setDate(n.getDate()-n.getDay());for(let l=0;l<7;l++){const p=new Date(c);p.setDate(c.getDate()+l);const F=this.getAppointmentsForDate(p).length,M=this.doctorLimit,d=(M-F)/M*100;let w="available";d<=0?w="full":d<=25?w="almost-full":d<=50&&(w="filling"),e.push({date:p,dayName:r[p.getDay()],dayNumber:p.getDate(),booked:F,limit:M,isToday:this.isSameDay(p,o),isSelected:this.isSameDay(p,n),availability:w})}return e});getTodayAppointments(){const e=this.selectedDate();return this.appointments.filter(o=>this.isSameDay(new Date(o.date),e)&&"cancelled"!==o.status)}getAppointmentsForDate(e){return this.appointments.filter(o=>this.isSameDay(new Date(o.date),e)&&"cancelled"!==o.status)}isSameDay(e,o){return e.getFullYear()===o.getFullYear()&&e.getMonth()===o.getMonth()&&e.getDate()===o.getDate()}getStatusLabel(e){return A.zN[e]||e}getAvailabilityClass(e){const o=(e.limit-e.total)/e.limit*100;return o<=0?"full":o<=25?"almost-full":o<=50?"filling":"available"}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=t.VBU({type:a,selectors:[["app-today-view"]],inputs:{appointments:"appointments",timeSlots:"timeSlots",selectedRoom:"selectedRoom",selectedDoctor:"selectedDoctor",doctorLimit:"doctorLimit"},outputs:{onViewAppointment:"onViewAppointment",onChangeStatus:"onChangeStatus",onBookSlot:"onBookSlot",onQuickBook:"onQuickBook",onOpenCalendar:"onOpenCalendar",onSelectDate:"onSelectDate",onFindNextSlot:"onFindNextSlot",onSearchPatient:"onSearchPatient",onFollowUp:"onFollowUp"},decls:108,vars:27,consts:[["datePicker",""],["statusMenu","matMenu"],[1,"today-view"],[1,"today-header"],[1,"header-info"],[1,"header-room"],["class","header-doctor",4,"ngIf"],[1,"date-navigation"],["mat-icon-button","","matTooltip","\u0e27\u0e31\u0e19\u0e01\u0e48\u0e2d\u0e19\u0e2b\u0e19\u0e49\u0e32",3,"click"],[1,"date-display",3,"click"],[2,"position","absolute","visibility","hidden","width","0","height","0",3,"dateChange","matDatepicker","value"],["mat-icon-button","","matTooltip","\u0e27\u0e31\u0e19\u0e16\u0e31\u0e14\u0e44\u0e1b",3,"click"],["mat-stroked-button","",1,"today-btn",3,"click","disabled"],[1,"summary-section"],["appearance","outlined",1,"summary-card","main"],[1,"summary-icon"],[1,"summary-content"],[1,"summary-value"],[1,"limit"],[1,"summary-label"],[1,"availability-indicator"],["appearance","outlined",1,"summary-card"],[1,"summary-value","arrived"],[1,"summary-value","waiting"],[1,"summary-value","in-progress"],[1,"summary-value","completed"],[1,"main-content"],["appearance","outlined",1,"schedule-card"],[1,"card-header"],["mat-button","","color","primary",3,"click"],[1,"schedule-list"],[1,"slot-item",3,"past","current","available","booked"],[1,"week-section"],["appearance","outlined",1,"week-card"],[1,"week-grid"],[1,"week-day",3,"today","selected","class"],["appearance","outlined",1,"actions-card"],[1,"quick-actions"],["mat-stroked-button","",3,"click"],[1,"header-doctor"],[1,"slot-item"],[1,"slot-time"],[1,"slot-content","booked"],[1,"slot-content","available"],[1,"slot-content","booked",3,"click"],[1,"patient-info"],[1,"patient-name"],[1,"patient-hn"],[1,"slot-actions"],[3,"disabled"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"slot-content","available",3,"click"],[1,"available-text"],["mat-stroked-button","","color","primary",1,"book-btn"],[1,"week-day",3,"click"],[1,"day-name"],[1,"day-number"],[1,"day-slots"],[1,"day-indicator"]],template:function(o,n){if(1&o){const r=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"mat-icon"),t.EFF(5,"local_hospital"),t.k0s(),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.DNE(8,Gt,5,1,"div",6),t.k0s(),t.j41(9,"div",7)(10,"button",8),t.bIt("click",function(){return i.eBV(r),i.Njj(n.prevDay())}),t.j41(11,"mat-icon"),t.EFF(12,"chevron_left"),t.k0s()(),t.j41(13,"div",9),t.bIt("click",function(){i.eBV(r);const l=t.sdS(22);return i.Njj(l.open())}),t.j41(14,"h2"),t.EFF(15),t.nI1(16,"date"),t.k0s(),t.j41(17,"p"),t.EFF(18),t.nI1(19,"date"),t.k0s()(),t.j41(20,"input",10),t.bIt("dateChange",function(l){return i.eBV(r),i.Njj(n.onDateChange(l))}),t.k0s(),t.nrm(21,"mat-datepicker",null,0),t.j41(23,"button",11),t.bIt("click",function(){return i.eBV(r),i.Njj(n.nextDay())}),t.j41(24,"mat-icon"),t.EFF(25,"chevron_right"),t.k0s()(),t.j41(26,"button",12),t.bIt("click",function(){return i.eBV(r),i.Njj(n.goToToday())}),t.EFF(27," \u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 "),t.k0s()()(),t.j41(28,"div",13)(29,"mat-card",14)(30,"div",15)(31,"mat-icon"),t.EFF(32,"event_available"),t.k0s()(),t.j41(33,"div",16)(34,"div",17),t.EFF(35),t.j41(36,"span",18),t.EFF(37),t.k0s()(),t.j41(38,"div",19),t.EFF(39,"\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22"),t.k0s()(),t.j41(40,"div",20),t.EFF(41),t.k0s()(),t.j41(42,"mat-card",21)(43,"div",22),t.EFF(44),t.k0s(),t.j41(45,"div",19),t.EFF(46,"\u0e21\u0e32\u0e16\u0e36\u0e07\u0e41\u0e25\u0e49\u0e27"),t.k0s()(),t.j41(47,"mat-card",21)(48,"div",23),t.EFF(49),t.k0s(),t.j41(50,"div",19),t.EFF(51,"\u0e23\u0e2d\u0e15\u0e23\u0e27\u0e08"),t.k0s()(),t.j41(52,"mat-card",21)(53,"div",24),t.EFF(54),t.k0s(),t.j41(55,"div",19),t.EFF(56,"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e15\u0e23\u0e27\u0e08"),t.k0s()(),t.j41(57,"mat-card",21)(58,"div",25),t.EFF(59),t.k0s(),t.j41(60,"div",19),t.EFF(61,"\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e41\u0e25\u0e49\u0e27"),t.k0s()()(),t.j41(62,"div",26)(63,"mat-card",27)(64,"div",28)(65,"h3")(66,"mat-icon"),t.EFF(67,"schedule"),t.k0s(),t.EFF(68),t.k0s(),t.j41(69,"button",29),t.bIt("click",function(){return i.eBV(r),i.Njj(n.onQuickBook.emit())}),t.j41(70,"mat-icon"),t.EFF(71,"add"),t.k0s(),t.EFF(72," \u0e19\u0e31\u0e14\u0e14\u0e48\u0e27\u0e19 "),t.k0s()(),t.j41(73,"div",30),t.Z7z(74,zt,5,10,"div",31,Bt),t.k0s()(),t.j41(76,"div",32)(77,"mat-card",33)(78,"div",28)(79,"h3")(80,"mat-icon"),t.EFF(81,"date_range"),t.k0s(),t.EFF(82," \u0e2a\u0e31\u0e1b\u0e14\u0e32\u0e2b\u0e4c\u0e19\u0e35\u0e49 "),t.k0s(),t.j41(83,"button",29),t.bIt("click",function(){return i.eBV(r),i.Njj(n.onOpenCalendar.emit())}),t.EFF(84," \u0e14\u0e39\u0e1b\u0e0f\u0e34\u0e17\u0e34\u0e19 "),t.j41(85,"mat-icon"),t.EFF(86,"arrow_forward"),t.k0s()()(),t.j41(87,"div",34),t.Z7z(88,Yt,8,10,"div",35,$t),t.k0s()(),t.j41(90,"mat-card",36)(91,"h3")(92,"mat-icon"),t.EFF(93,"bolt"),t.k0s(),t.EFF(94," \u0e17\u0e32\u0e07\u0e25\u0e31\u0e14 "),t.k0s(),t.j41(95,"div",37)(96,"button",38),t.bIt("click",function(){return i.eBV(r),i.Njj(n.onFindNextSlot.emit())}),t.j41(97,"mat-icon"),t.EFF(98,"search"),t.k0s(),t.EFF(99," \u0e2b\u0e32 Slot \u0e27\u0e48\u0e32\u0e07\u0e16\u0e31\u0e14\u0e44\u0e1b "),t.k0s(),t.j41(100,"button",38),t.bIt("click",function(){return i.eBV(r),i.Njj(n.onOpenCalendar.emit())}),t.j41(101,"mat-icon"),t.EFF(102,"calendar_month"),t.k0s(),t.EFF(103," \u0e40\u0e1b\u0e34\u0e14\u0e1b\u0e0f\u0e34\u0e17\u0e34\u0e19 "),t.k0s(),t.j41(104,"button",38),t.bIt("click",function(){return i.eBV(r),i.Njj(n.onSearchPatient.emit())}),t.j41(105,"mat-icon"),t.EFF(106,"person_search"),t.k0s(),t.EFF(107," \u0e04\u0e49\u0e19\u0e2b\u0e32\u0e04\u0e19\u0e44\u0e02\u0e49 "),t.k0s()()()()()()}if(2&o){let r;const c=t.sdS(22);t.R7$(7),t.JRh((null==(r=n.selectedRoom())?null:r.name)||"\u0e17\u0e38\u0e01\u0e2b\u0e49\u0e2d\u0e07"),t.R7$(),t.Y8G("ngIf",n.selectedDoctor()),t.R7$(7),t.JRh(t.ii3(16,17,n.selectedDate(),"EEEE","","th")),t.R7$(3),t.JRh(t.ii3(19,22,n.selectedDate(),"d MMMM yyyy","","th")),t.R7$(2),t.Y8G("matDatepicker",c)("value",n.selectedDate()),t.R7$(6),t.Y8G("disabled",n.isToday()),t.R7$(9),t.SpI(" ",n.summary().total),t.R7$(2),t.SpI("/",n.summary().limit),t.R7$(3),t.HbH(n.getAvailabilityClass(n.summary())),t.R7$(),t.SpI(" \u0e27\u0e48\u0e32\u0e07 ",n.summary().limit-n.summary().total," "),t.R7$(3),t.JRh(n.summary().arrived),t.R7$(5),t.JRh(n.summary().waiting),t.R7$(5),t.SpI(" ",n.summary().inProgress," "),t.R7$(5),t.JRh(n.summary().completed),t.R7$(9),t.SpI(" \u0e15\u0e32\u0e23\u0e32\u0e07",n.isToday()?"\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49":""," "),t.R7$(6),t.Dyx(n.todaySlots()),t.R7$(14),t.Dyx(n.weekDays())}},dependencies:[b.MD,b.bT,g.Hu,g.RN,y.Hl,y.$z,R.iY,v.m_,v.An,k.YN,k.Jl,N.u,z.oV,j.Cn,j.kk,j.fb,j.Cp,D.w,D.q,f.X6,f.Vh,f.bZ,$.WX,b.vh],styles:[".today-view[_ngcontent-%COMP%]{padding:1.5rem;max-width:1400px;margin:0 auto}.today-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem}.header-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.header-room[_ngcontent-%COMP%], .header-doctor[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--ax-text-secondary)}.header-room[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .header-doctor[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.header-room[_ngcontent-%COMP%]{font-weight:600;color:var(--ax-text-primary)}.date-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;position:relative}.date-display[_ngcontent-%COMP%]{text-align:center;cursor:pointer;padding:.5rem 1rem;border-radius:8px;transition:background .2s;min-width:180px}.date-display[_ngcontent-%COMP%]:hover{background:var(--ax-surface-hover)}.date-display[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--ax-text-primary)}.date-display[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.125rem 0 0;font-size:.875rem;color:var(--ax-text-secondary)}.today-btn[_ngcontent-%COMP%]{margin-left:.5rem}.summary-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr repeat(4,1fr);gap:1rem;margin-bottom:1.5rem}@media (max-width: 1200px){.summary-section[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.summary-section[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.summary-card[_ngcontent-%COMP%]{padding:1rem;text-align:center}.summary-card.main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;text-align:left}@media (max-width: 1200px){.summary-card.main[_ngcontent-%COMP%]{grid-column:span 3}}@media (max-width: 768px){.summary-card.main[_ngcontent-%COMP%]{grid-column:span 2}}.summary-card[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;background:var(--ax-primary-subtle);display:flex;align-items:center;justify-content:center}.summary-card[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--ax-primary-default)}.summary-card[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]{flex:1}.summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--ax-text-primary)}.summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]   .limit[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;color:var(--ax-text-secondary)}.summary-card[_ngcontent-%COMP%]   .summary-value.arrived[_ngcontent-%COMP%]{color:#0ea5e9}.summary-card[_ngcontent-%COMP%]   .summary-value.waiting[_ngcontent-%COMP%]{color:#f59e0b}.summary-card[_ngcontent-%COMP%]   .summary-value.in-progress[_ngcontent-%COMP%]{color:#8b5cf6}.summary-card[_ngcontent-%COMP%]   .summary-value.completed[_ngcontent-%COMP%]{color:#10b981}.summary-card[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--ax-text-secondary);margin-top:.25rem}.summary-card[_ngcontent-%COMP%]   .availability-indicator[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-size:.875rem;font-weight:600}.summary-card[_ngcontent-%COMP%]   .availability-indicator.available[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.summary-card[_ngcontent-%COMP%]   .availability-indicator.filling[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.summary-card[_ngcontent-%COMP%]   .availability-indicator.almost-full[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.summary-card[_ngcontent-%COMP%]   .availability-indicator.full[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.main-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 320px;gap:1.5rem}@media (max-width: 1024px){.main-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.schedule-card[_ngcontent-%COMP%]{padding:1rem}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:.5rem;font-size:1rem;font-weight:600}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--ax-primary-default)}.schedule-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:calc(100vh - 400px);overflow-y:auto}.slot-item[_ngcontent-%COMP%]{display:flex;align-items:stretch;border-bottom:1px solid var(--ax-border-subtle)}.slot-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.slot-item.current[_ngcontent-%COMP%]{background:var(--ax-primary-subtle)}.slot-item.past[_ngcontent-%COMP%]{opacity:.6}.slot-time[_ngcontent-%COMP%]{width:60px;padding:.75rem;font-size:.875rem;font-weight:600;color:var(--ax-text-secondary);display:flex;align-items:center;justify-content:center;border-right:2px solid var(--ax-border-subtle)}.current[_ngcontent-%COMP%]   .slot-time[_ngcontent-%COMP%]{color:var(--ax-primary-default);border-right-color:var(--ax-primary-default)}.slot-content[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:background .2s}.slot-content[_ngcontent-%COMP%]:hover{background:var(--ax-surface-hover)}.slot-content.available[_ngcontent-%COMP%]   .available-text[_ngcontent-%COMP%]{color:var(--ax-text-disabled)}.slot-content.available[_ngcontent-%COMP%]   .book-btn[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}.slot-content.available[_ngcontent-%COMP%]:hover   .book-btn[_ngcontent-%COMP%]{opacity:1}.patient-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem}.patient-info[_ngcontent-%COMP%]   .patient-name[_ngcontent-%COMP%]{font-weight:500}.patient-info[_ngcontent-%COMP%]   .patient-hn[_ngcontent-%COMP%]{font-size:.75rem;color:var(--ax-text-secondary)}.slot-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.week-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.week-card[_ngcontent-%COMP%]{padding:1rem}.week-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem}@media (max-width: 1024px){.week-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(7,1fr)}}.week-day[_ngcontent-%COMP%]{padding:.75rem .5rem;text-align:center;border-radius:8px;cursor:pointer;transition:all .2s;position:relative}.week-day[_ngcontent-%COMP%]:hover{background:var(--ax-surface-hover)}.week-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{background:var(--ax-primary-default);color:#fff;border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;margin:.25rem auto}.week-day.selected[_ngcontent-%COMP%]{background:var(--ax-primary-subtle);border:2px solid var(--ax-primary-default)}.week-day[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{font-size:.75rem;color:var(--ax-text-secondary);margin-bottom:.25rem}.week-day[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.week-day[_ngcontent-%COMP%]   .day-slots[_ngcontent-%COMP%]{font-size:.7rem;color:var(--ax-text-secondary);margin-top:.25rem}.week-day[_ngcontent-%COMP%]   .day-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;margin:.5rem auto 0}.week-day.available[_ngcontent-%COMP%]   .day-indicator[_ngcontent-%COMP%]{background:#10b981}.week-day.filling[_ngcontent-%COMP%]   .day-indicator[_ngcontent-%COMP%]{background:#f59e0b}.week-day.almost-full[_ngcontent-%COMP%]   .day-indicator[_ngcontent-%COMP%]{background:#ef4444}.week-day.full[_ngcontent-%COMP%]   .day-indicator[_ngcontent-%COMP%]{background:#6b7280}.actions-card[_ngcontent-%COMP%]{padding:1rem}.actions-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;display:flex;align-items:center;gap:.5rem;font-size:.875rem;font-weight:600}.actions-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--ax-primary-default)}.quick-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.quick-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-content:flex-start}.status-scheduled[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #6366f1;background:#eef2ff!important}.status-confirmed[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #0ea5e9;background:#e0f2fe!important}.status-checked-in[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #f59e0b;background:#fef3c7!important}.status-in-progress[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #8b5cf6;background:#f3e8ff!important}.status-completed[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #10b981;background:#d1fae5!important}.status-cancelled[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #6b7280;background:#f3f4f6!important}.status-no-show[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #ef4444;background:#fee2e2!important}"]})}return a})();var Jt=u(4590);const Wt=["calendar"],I=(a,s)=>s.id;function Zt(a,s){1&a&&(t.j41(0,"mat-icon"),t.EFF(1,"today"),t.k0s(),t.j41(2,"span"),t.EFF(3,"\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49"),t.k0s())}function Qt(a,s){1&a&&(t.j41(0,"mat-icon"),t.EFF(1,"calendar_month"),t.k0s(),t.j41(2,"span"),t.EFF(3,"\u0e1b\u0e0f\u0e34\u0e17\u0e34\u0e19"),t.k0s())}function Ut(a,s){if(1&a&&(t.j41(0,"mat-option",21),t.nrm(1,"span",31),t.EFF(2),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.xc7("background-color",e.color),t.R7$(),t.SpI(" ",e.name," ")}}function Kt(a,s){if(1&a&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function qt(a,s){if(1&a){const e=t.RV6();t.j41(0,"app-appointment-form",32),t.bIt("save",function(n){i.eBV(e);const r=t.XpG();return i.Njj(r.onSaveAppointment(n))})("cancel",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.onCancelForm())})("searchPatient",function(n){i.eBV(e);const r=t.XpG();return i.Njj(r.onSearchPatient(n))}),t.k0s()}if(2&a){const e=t.XpG();t.Y8G("mode",e.formMode())("appointment",e.selectedAppointment())("preSelectedDate",e.preSelectedDate())("rooms",e.rooms())("doctors",e.filteredDoctors())("timeSlots",e.service.timeSlots())("purposes",e.service.purposes())("preparations",e.service.preparations())}}function te(a,s){if(1&a&&(t.j41(0,"div",54),t.nrm(1,"span",55),t.j41(2,"span",56),t.EFF(3),t.k0s(),t.j41(4,"span",57),t.EFF(5),t.k0s()()),2&a){const e=s.$implicit,o=t.XpG();t.R7$(),t.xc7("background-color",e.color),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(o.byRoom[e.id]||0)}}function ee(a,s){if(1&a&&(t.j41(0,"div",40)(1,"div",41)(2,"span",42),t.EFF(3),t.k0s(),t.j41(4,"span",43),t.EFF(5,"\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14"),t.k0s()(),t.j41(6,"div",44)(7,"span",42),t.EFF(8),t.k0s(),t.j41(9,"span",43),t.EFF(10,"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e41\u0e25\u0e49\u0e27"),t.k0s()(),t.j41(11,"div",45)(12,"span",42),t.EFF(13),t.k0s(),t.j41(14,"span",43),t.EFF(15,"\u0e23\u0e2d\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19"),t.k0s()(),t.j41(16,"div",46)(17,"span",42),t.EFF(18),t.k0s(),t.j41(19,"span",43),t.EFF(20,"\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19"),t.k0s()()(),t.j41(21,"div",47)(22,"div",48)(23,"span"),t.EFF(24,"\u0e2d\u0e31\u0e15\u0e23\u0e32\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19"),t.k0s(),t.j41(25,"span",49),t.EFF(26),t.k0s()(),t.j41(27,"div",50),t.nrm(28,"div",51),t.k0s()(),t.j41(29,"div",52)(30,"h4"),t.EFF(31,"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e15\u0e32\u0e21\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08"),t.k0s(),t.j41(32,"div",53),t.Z7z(33,te,6,4,"div",54,I),t.k0s()()),2&a){const e=s,o=t.XpG(2);t.R7$(3),t.JRh(e.total),t.R7$(5),t.JRh(e.confirmed),t.R7$(5),t.JRh(e.scheduled),t.R7$(5),t.JRh(e.completed),t.R7$(8),t.SpI("",e.capacityPercent,"%"),t.R7$(2),t.xc7("width",e.capacityPercent,"%"),t.AVh("low",e.capacityPercent<50)("medium",e.capacityPercent>=50&&e.capacityPercent<70)("high",e.capacityPercent>=70&&e.capacityPercent<90)("critical",e.capacityPercent>=90),t.R7$(5),t.Dyx(o.filteredRoomsForDetail())}}function ne(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",61),t.bIt("click",function(){const n=i.eBV(e).$implicit,r=t.XpG(3);return i.Njj(r.onViewAppointmentFromDay(n))}),t.j41(1,"div",62),t.EFF(2),t.k0s(),t.j41(3,"div",63)(4,"div",64),t.EFF(5),t.k0s(),t.j41(6,"div",65),t.nrm(7,"span",66),t.EFF(8),t.k0s()(),t.j41(9,"mat-chip-set")(10,"mat-chip",67),t.EFF(11),t.k0s()()()}if(2&a){const e=s.$implicit,o=t.XpG(3);t.R7$(2),t.SpI(" ",(null==e.timeSlot?null:e.timeSlot.startTime)||"-"," "),t.R7$(3),t.Lme(" ",null==e.patient?null:e.patient.firstName," ",null==e.patient?null:e.patient.lastName," "),t.R7$(2),t.xc7("background-color",null==e.room?null:e.room.color),t.R7$(),t.SpI(" ",null==e.room?null:e.room.name," "),t.R7$(2),t.HbH("status-"+e.status),t.Y8G("disabled",!0),t.R7$(),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function oe(a,s){if(1&a){const e=t.RV6();t.j41(0,"button",68),t.bIt("click",function(){i.eBV(e);const n=t.XpG(3);return i.Njj(n.onViewAllAppointments())}),t.EFF(1),t.j41(2,"mat-icon"),t.EFF(3,"arrow_forward"),t.k0s()()}if(2&a){const e=t.XpG(3);t.R7$(),t.SpI(" \u0e14\u0e39\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14 (",e.selectedDayAppointments().length,") ")}}function ae(a,s){if(1&a&&(t.j41(0,"div",58),t.Z7z(1,ne,12,10,"div",59,I),t.k0s(),t.nVh(3,oe,4,1,"button",60)),2&a){const e=t.XpG(2);t.R7$(),t.Dyx(e.selectedDayAppointments().slice(0,3)),t.R7$(2),t.vxM(e.selectedDayAppointments().length>3?3:-1)}}function ie(a,s){1&a&&(t.j41(0,"div",39)(1,"mat-icon"),t.EFF(2,"event_available"),t.k0s(),t.j41(3,"p"),t.EFF(4,"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22\u0e43\u0e19\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49"),t.k0s()())}function re(a,s){if(1&a){const e=t.RV6();t.j41(0,"mat-card",26)(1,"div",33)(2,"div",34)(3,"mat-icon"),t.EFF(4,"calendar_today"),t.k0s(),t.j41(5,"h3"),t.EFF(6),t.nI1(7,"date"),t.k0s()(),t.j41(8,"button",35),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.onCloseDayDetail())}),t.j41(9,"mat-icon"),t.EFF(10,"close"),t.k0s()()(),t.nVh(11,ee,35,15),t.j41(12,"div",36)(13,"div",37)(14,"h4"),t.EFF(15),t.k0s(),t.j41(16,"button",38),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.onCreateAppointmentFromDay())}),t.j41(17,"mat-icon"),t.EFF(18,"add"),t.k0s()()(),t.nVh(19,ae,4,1)(20,ie,5,0,"div",39),t.k0s()()}if(2&a){let e;const o=t.XpG();t.R7$(6),t.SpI(" ",t.ii3(7,4,o.selectedDayDate(),"EEEE d MMMM yyyy","","th")," "),t.R7$(5),t.vxM((e=o.selectedDaySummary())?11:-1,e),t.R7$(4),t.SpI(" \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22 (",o.selectedDayAppointments().length,") "),t.R7$(4),t.vxM(o.selectedDayAppointments().length>0?19:20)}}function se(a,s){1&a&&(t.j41(0,"mat-card",27)(1,"mat-icon"),t.EFF(2,"event_note"),t.k0s(),t.j41(3,"p"),t.EFF(4,"\u0e04\u0e25\u0e34\u0e01\u0e17\u0e35\u0e48\u0e27\u0e31\u0e19\u0e43\u0e19\u0e1b\u0e0f\u0e34\u0e17\u0e34\u0e19\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e14\u0e39\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22"),t.k0s(),t.j41(5,"p"),t.EFF(6,'\u0e2b\u0e23\u0e37\u0e2d\u0e04\u0e25\u0e34\u0e01\u0e1b\u0e38\u0e48\u0e21 "\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22\u0e43\u0e2b\u0e21\u0e48" \u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22'),t.k0s()())}function le(a,s){1&a&&(t.j41(0,"mat-icon"),t.EFF(1,"list_alt"),t.k0s(),t.j41(2,"span"),t.EFF(3,"\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e19\u0e31\u0e14"),t.k0s())}function ce(a,s){1&a&&(t.j41(0,"mat-icon"),t.EFF(1,"settings"),t.k0s(),t.j41(2,"span"),t.EFF(3,"\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e0a\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32"),t.k0s())}function ue(a,s){1&a&&(t.j41(0,"mat-icon"),t.EFF(1,"event_busy"),t.k0s(),t.j41(2,"span"),t.EFF(3,"\u0e27\u0e31\u0e19\u0e2b\u0e22\u0e38\u0e14/\u0e27\u0e31\u0e19\u0e25\u0e32"),t.k0s())}let me=(()=>{class a{service=(0,i.WQX)(B.o);router=(0,i.WQX)(Jt.Ix);calendarRef;selectedTabIndex=0;selectedRoomId="";selectedDoctorId="";showForm=(0,i.vPA)(!1);formMode=(0,i.vPA)("create");selectedAppointment=(0,i.vPA)(void 0);preSelectedDate=(0,i.vPA)(void 0);showDayDetail=(0,i.vPA)(!1);selectedDayDate=(0,i.vPA)(null);selectedRoomSignal=(0,E.EW)(()=>{if(this.selectedRoomId)return this.rooms().find(e=>e.id===this.selectedRoomId)});selectedDoctorSignal=(0,E.EW)(()=>{if(this.selectedDoctorId)return this.service.doctors().find(e=>e.id===this.selectedDoctorId)});calendarToolbar={left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"};rooms=(0,E.EW)(()=>this.service.rooms());todaySummary=(0,E.EW)(()=>this.service.todaySummary());filteredDoctors=(0,E.EW)(()=>{const e=this.service.doctors();return this.selectedRoomId?e.filter(o=>o.roomIds.includes(this.selectedRoomId)):e});calendarEvents=(0,E.EW)(()=>this.service.calendarSummaryEvents().map(o=>({id:o.id,title:o.title,start:o.start,end:o.end,allDay:o.allDay,color:o.color,backgroundColor:o.backgroundColor,extendedProps:o.extendedProps})));selectedDayAppointments=(0,E.EW)(()=>{const e=this.selectedDayDate();if(!e)return[];let o=this.service.appointmentViews().filter(n=>new Date(n.date).toISOString().split("T")[0]===e&&"cancelled"!==n.status);return this.selectedRoomId&&(o=o.filter(n=>n.roomId===this.selectedRoomId)),this.selectedDoctorId&&(o=o.filter(n=>n.doctorId===this.selectedDoctorId)),o.sort((n,r)=>(n.timeSlot?.startTime||"00:00").localeCompare(r.timeSlot?.startTime||"00:00"))});selectedDaySummary=(0,E.EW)(()=>{const e=this.selectedDayDate();if(!e)return null;const o=this.selectedDayAppointments();if(0===o.length)return{isSummary:!0,total:0,completed:0,confirmed:0,scheduled:0,capacityPercent:0,byRoom:{},date:e};const n=o.length,r=o.filter(d=>"completed"===d.status).length,c=o.filter(d=>"confirmed"===d.status).length,l=o.filter(d=>"scheduled"===d.status).length,p={};o.forEach(d=>{p[d.roomId]=(p[d.roomId]||0)+1});const F=50*(this.selectedRoomId?this.rooms().filter(d=>d.id===this.selectedRoomId):this.rooms()).length;return{isSummary:!0,total:n,completed:r,confirmed:c,scheduled:l,capacityPercent:F>0?Math.min(100,Math.round(n/F*100)):0,byRoom:p,date:e}});filteredRoomsForDetail=(0,E.EW)(()=>this.selectedRoomId?this.rooms().filter(e=>e.id===this.selectedRoomId):this.rooms());ngOnInit(){}onEventClick(e){const o=e.event.id;if(o.startsWith("summary-")){const r=o.replace("summary-","");return this.selectedDayDate.set(r),this.showDayDetail.set(!0),void this.showForm.set(!1)}const n=this.service.appointmentViews().find(r=>r.id===o);n&&(this.selectedAppointment.set(n),this.formMode.set("view"),this.showForm.set(!0),this.showDayDetail.set(!1))}onDateSelect(e){const o=e.start.toISOString().split("T")[0];this.selectedDayDate.set(o),this.showDayDetail.set(!0),this.showForm.set(!1)}onCloseDayDetail(){this.showDayDetail.set(!1),this.selectedDayDate.set(null)}onCreateAppointmentFromDay(){const e=this.selectedDayDate();e&&(this.preSelectedDate.set(new Date(e)),this.selectedAppointment.set(void 0),this.formMode.set("create"),this.showForm.set(!0),this.showDayDetail.set(!1))}onViewAppointmentFromDay(e){this.selectedAppointment.set(e),this.formMode.set("view"),this.showForm.set(!0),this.showDayDetail.set(!1)}onViewAllAppointments(){this.selectedTabIndex=2,this.showDayDetail.set(!1)}onBookSlot(e){this.preSelectedDate.set(new Date),this.selectedAppointment.set(void 0),this.formMode.set("create"),this.showForm.set(!0),this.selectedTabIndex=1}onSelectDateFromWeek(e){this.selectedTabIndex=1,this.selectedDayDate.set(e.toISOString().split("T")[0]),this.showDayDetail.set(!0),this.showForm.set(!1)}onFindNextSlot(){const e=new Date,o=this.service.timeSlots(),n=this.service.appointmentViews();for(let r=0;r<7;r++){const c=new Date(e);c.setDate(e.getDate()+r);for(const l of o)if(!n.some(C=>{const F=new Date(C.date);return this.isSameDay(F,c)&&C.timeSlotId===l.id&&"cancelled"!==C.status&&(!this.selectedRoomId||C.roomId===this.selectedRoomId)&&(!this.selectedDoctorId||C.doctorId===this.selectedDoctorId)}))return this.selectedTabIndex=1,this.selectedDayDate.set(c.toISOString().split("T")[0]),this.showDayDetail.set(!0),void this.showForm.set(!1)}console.log("No available slot found in next 7 days")}onSearchPatientDialog(){console.log("Open patient search dialog")}onFollowUp(e){this.router.navigate(["/his-demo/followup-demo"])}isSameDay(e,o){return e.getFullYear()===o.getFullYear()&&e.getMonth()===o.getMonth()&&e.getDate()===o.getDate()}onDatesChange(e){console.log("Calendar date range changed:",e)}onFilterChange(){if(this.selectedRoomId&&this.selectedDoctorId){const e=this.service.getDoctor(this.selectedDoctorId);e&&!e.roomIds.includes(this.selectedRoomId)&&(this.selectedDoctorId="")}}openNewAppointment(){this.preSelectedDate.set(new Date),this.selectedAppointment.set(void 0),this.formMode.set("create"),this.showForm.set(!0)}onCancelForm(){this.showForm.set(!1),this.selectedAppointment.set(void 0),this.preSelectedDate.set(void 0)}onSaveAppointment(e){"create"===this.formMode()?this.service.createAppointment(e):"edit"===this.formMode()&&this.selectedAppointment()&&this.service.updateAppointment(this.selectedAppointment().id,e),this.onCancelForm()}onSearchPatient(e){const o=this.service.searchPatients(e);console.log("Patient search results:",o)}onViewAppointment(e){this.selectedAppointment.set(e),this.formMode.set("view"),this.showForm.set(!0),this.selectedTabIndex=0}onEditAppointment(e){this.selectedAppointment.set(e),this.formMode.set("edit"),this.showForm.set(!0),this.selectedTabIndex=0}onCancelAppointment(e){this.service.cancelAppointment(e.id,"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e42\u0e14\u0e22\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49")}onChangeStatus(e){this.service.changeStatus(e.apt.id,e.status)}getStatusLabel(e){return A.zN[e]||e}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=t.VBU({type:a,selectors:[["app-appointment-calendar"]],viewQuery:function(o,n){if(1&o&&t.GBs(Wt,5),2&o){let r;t.mGM(r=t.lsd())&&(n.calendarRef=r.first)}},features:[t.Jv_([B.o])],decls:75,vars:23,consts:[["calendar",""],[1,"appointment-calendar-page"],[1,"page-header"],[1,"header-title"],[1,"header-actions"],["mat-flat-button","","color","primary",3,"click"],[1,"appointment-tabs",3,"selectedIndexChange","selectedIndex"],["mat-tab-label",""],[3,"onViewAppointment","onChangeStatus","onBookSlot","onQuickBook","onOpenCalendar","onSelectDate","onFindNextSlot","onSearchPatient","onFollowUp","appointments","timeSlots","selectedRoom","selectedDoctor","doctorLimit"],[1,"tab-content","calendar-tab"],[1,"summary-cards"],["appearance","outlined",1,"summary-card"],[1,"summary-title"],[1,"summary-value"],[1,"split-layout"],[1,"left-panel"],["appearance","outlined",1,"filters-card"],[1,"filters-row"],["appearance","outline",1,"filter-field"],[3,"valueChange","selectionChange","value"],["value",""],[3,"value"],["appearance","outlined",1,"calendar-card"],[3,"eventClick","dateSelect","datesChange","events","initialView","editable","selectable","locale","firstDay","headerToolbar"],[1,"right-panel"],[3,"mode","appointment","preSelectedDate","rooms","doctors","timeSlots","purposes","preparations"],["appearance","outlined",1,"day-detail-panel"],["appearance","outlined",1,"empty-panel"],[1,"tab-content","list-tab"],[3,"viewAppointment","editAppointment","cancelAppointment","changeStatus","appointments","rooms","doctors"],["disabled",""],[1,"room-color-dot"],[3,"save","cancel","searchPatient","mode","appointment","preSelectedDate","rooms","doctors","timeSlots","purposes","preparations"],[1,"day-detail-header"],[1,"day-detail-title"],["mat-icon-button","",3,"click"],[1,"day-appointments"],[1,"appointments-header"],["mat-mini-fab","","color","primary","matTooltip","\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22",3,"click"],[1,"no-appointments"],[1,"day-summary-stats"],[1,"stat-item","total"],[1,"stat-value"],[1,"stat-label"],[1,"stat-item","confirmed"],[1,"stat-item","scheduled"],[1,"stat-item","completed"],[1,"capacity-section"],[1,"capacity-label"],[1,"capacity-percent"],[1,"capacity-bar"],[1,"capacity-fill"],[1,"room-breakdown"],[1,"room-list"],[1,"room-item"],[1,"room-dot"],[1,"room-name"],[1,"room-count"],[1,"appointments-list"],[1,"appointment-item"],["mat-button","","color","primary",1,"view-all-btn"],[1,"appointment-item",3,"click"],[1,"apt-time"],[1,"apt-info"],[1,"apt-patient"],[1,"apt-meta"],[1,"room-dot","small"],[3,"disabled"],["mat-button","","color","primary",1,"view-all-btn",3,"click"]],template:function(o,n){if(1&o){const r=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"mat-icon"),t.EFF(4,"calendar_month"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"\u0e23\u0e30\u0e1a\u0e1a\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22\u0e04\u0e19\u0e44\u0e02\u0e49"),t.k0s()(),t.j41(7,"div",4)(8,"button",5),t.bIt("click",function(){return i.eBV(r),i.Njj(n.openNewAppointment())}),t.j41(9,"mat-icon"),t.EFF(10,"add"),t.k0s(),t.EFF(11," \u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22\u0e43\u0e2b\u0e21\u0e48 "),t.k0s()()(),t.j41(12,"mat-tab-group",6),t.mxI("selectedIndexChange",function(l){return i.eBV(r),t.DH7(n.selectedTabIndex,l)||(n.selectedTabIndex=l),i.Njj(l)}),t.j41(13,"mat-tab"),t.DNE(14,Zt,4,0,"ng-template",7),t.j41(15,"app-today-view",8),t.bIt("onViewAppointment",function(l){return i.eBV(r),i.Njj(n.onViewAppointment(l))})("onChangeStatus",function(l){return i.eBV(r),i.Njj(n.onChangeStatus(l))})("onBookSlot",function(l){return i.eBV(r),i.Njj(n.onBookSlot(l))})("onQuickBook",function(){return i.eBV(r),i.Njj(n.openNewAppointment())})("onOpenCalendar",function(){return i.eBV(r),i.Njj(n.selectedTabIndex=1)})("onSelectDate",function(l){return i.eBV(r),i.Njj(n.onSelectDateFromWeek(l))})("onFindNextSlot",function(){return i.eBV(r),i.Njj(n.onFindNextSlot())})("onSearchPatient",function(){return i.eBV(r),i.Njj(n.onSearchPatientDialog())})("onFollowUp",function(l){return i.eBV(r),i.Njj(n.onFollowUp(l))}),t.k0s()(),t.j41(16,"mat-tab"),t.DNE(17,Qt,4,0,"ng-template",7),t.j41(18,"div",9)(19,"div",10)(20,"mat-card",11)(21,"div",12),t.EFF(22,"\u0e19\u0e31\u0e14\u0e2b\u0e21\u0e32\u0e22\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49"),t.k0s(),t.j41(23,"div",13),t.EFF(24),t.k0s()(),t.j41(25,"mat-card",11)(26,"div",12),t.EFF(27,"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e41\u0e25\u0e49\u0e27"),t.k0s(),t.j41(28,"div",13),t.EFF(29),t.k0s()(),t.j41(30,"mat-card",11)(31,"div",12),t.EFF(32,"\u0e21\u0e32\u0e16\u0e36\u0e07\u0e41\u0e25\u0e49\u0e27"),t.k0s(),t.j41(33,"div",13),t.EFF(34),t.k0s()(),t.j41(35,"mat-card",11)(36,"div",12),t.EFF(37,"\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19"),t.k0s(),t.j41(38,"div",13),t.EFF(39),t.k0s()()(),t.j41(40,"div",14)(41,"div",15)(42,"mat-card",16)(43,"div",17)(44,"mat-form-field",18)(45,"mat-label"),t.EFF(46,"\u0e2b\u0e49\u0e2d\u0e07\u0e15\u0e23\u0e27\u0e08"),t.k0s(),t.j41(47,"mat-select",19),t.mxI("valueChange",function(l){return i.eBV(r),t.DH7(n.selectedRoomId,l)||(n.selectedRoomId=l),i.Njj(l)}),t.bIt("selectionChange",function(){return i.eBV(r),i.Njj(n.onFilterChange())}),t.j41(48,"mat-option",20),t.EFF(49,"\u0e17\u0e38\u0e01\u0e2b\u0e49\u0e2d\u0e07"),t.k0s(),t.Z7z(50,Ut,3,4,"mat-option",21,I),t.k0s()(),t.j41(52,"mat-form-field",18)(53,"mat-label"),t.EFF(54,"\u0e41\u0e1e\u0e17\u0e22\u0e4c"),t.k0s(),t.j41(55,"mat-select",19),t.mxI("valueChange",function(l){return i.eBV(r),t.DH7(n.selectedDoctorId,l)||(n.selectedDoctorId=l),i.Njj(l)}),t.bIt("selectionChange",function(){return i.eBV(r),i.Njj(n.onFilterChange())}),t.j41(56,"mat-option",20),t.EFF(57,"\u0e17\u0e38\u0e01\u0e41\u0e1e\u0e17\u0e22\u0e4c"),t.k0s(),t.Z7z(58,Kt,2,2,"mat-option",21,I),t.k0s()()()(),t.j41(60,"mat-card",22)(61,"ax-calendar",23,0),t.bIt("eventClick",function(l){return i.eBV(r),i.Njj(n.onEventClick(l))})("dateSelect",function(l){return i.eBV(r),i.Njj(n.onDateSelect(l))})("datesChange",function(l){return i.eBV(r),i.Njj(n.onDatesChange(l))}),t.k0s()()(),t.j41(63,"div",24),t.nVh(64,qt,1,8,"app-appointment-form",25)(65,re,21,9,"mat-card",26)(66,se,7,0,"mat-card",27),t.k0s()()()(),t.j41(67,"mat-tab"),t.DNE(68,le,4,0,"ng-template",7),t.j41(69,"div",28)(70,"app-appointment-list",29),t.bIt("viewAppointment",function(l){return i.eBV(r),i.Njj(n.onViewAppointment(l))})("editAppointment",function(l){return i.eBV(r),i.Njj(n.onEditAppointment(l))})("cancelAppointment",function(l){return i.eBV(r),i.Njj(n.onCancelAppointment(l))})("changeStatus",function(l){return i.eBV(r),i.Njj(n.onChangeStatus(l))}),t.k0s()()(),t.j41(71,"mat-tab",30),t.DNE(72,ce,4,0,"ng-template",7),t.k0s(),t.j41(73,"mat-tab",30),t.DNE(74,ue,4,0,"ng-template",7),t.k0s()()()}2&o&&(t.R7$(12),t.R50("selectedIndex",n.selectedTabIndex),t.R7$(3),t.Y8G("appointments",n.service.appointmentViews())("timeSlots",n.service.timeSlots())("selectedRoom",n.selectedRoomSignal)("selectedDoctor",n.selectedDoctorSignal)("doctorLimit",50),t.R7$(9),t.JRh(n.todaySummary().total),t.R7$(5),t.SpI(" ",n.todaySummary().byStatus.confirmed||0," "),t.R7$(5),t.SpI(" ",n.todaySummary().byStatus["checked-in"]||0," "),t.R7$(5),t.SpI(" ",n.todaySummary().byStatus.completed||0," "),t.R7$(8),t.R50("value",n.selectedRoomId),t.R7$(3),t.Dyx(n.rooms()),t.R7$(5),t.R50("value",n.selectedDoctorId),t.R7$(3),t.Dyx(n.filteredDoctors()),t.R7$(3),t.Y8G("events",n.calendarEvents())("initialView","dayGridMonth")("editable",!1)("selectable",!0)("locale","th")("firstDay",0)("headerToolbar",n.calendarToolbar),t.R7$(3),t.vxM(n.showForm()?64:n.showDayDetail()?65:66),t.R7$(6),t.Y8G("appointments",n.service.appointmentViews())("rooms",n.rooms())("doctors",n.service.doctors()))},dependencies:[b.MD,m.YN,m.X1,g.Hu,g.RN,O.RI,O.ES,O.mq,O.T8,x.Ve,h.rl,h.nJ,x.VO,L.wT,V.R,y.Hl,y.$z,y.$0,R.iY,v.m_,v.An,k.YN,k.Jl,k.Jo,N.u,z.oV,H.Y,J.hM,W.h,ut,Nt,Ht,b.vh],styles:[".appointment-calendar-page[_ngcontent-%COMP%]{padding:1.5rem;max-width:1600px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.header-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem;color:var(--ax-primary-default)}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--ax-text-primary)}.appointment-tabs[_ngcontent-%COMP%]     .mat-mdc-tab{min-width:160px}.appointment-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .mdc-tab__content{gap:.5rem}.tab-content[_ngcontent-%COMP%]{min-height:calc(100vh - 250px)}.split-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;gap:1.5rem;padding:1.5rem}@media (max-width: 1200px){.split-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}.left-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.right-panel[_ngcontent-%COMP%]{position:sticky;top:1rem;align-self:start}@media (max-width: 1200px){.right-panel[_ngcontent-%COMP%]{position:static}}.filters-card[_ngcontent-%COMP%]{padding:1rem}.filters-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.filter-field[_ngcontent-%COMP%]{min-width:200px;flex:1}.room-color-dot[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:8px}.calendar-card[_ngcontent-%COMP%]{padding:1rem}.calendar-card[_ngcontent-%COMP%]     .fc{font-family:inherit}.calendar-card[_ngcontent-%COMP%]     .fc-event{cursor:pointer}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;padding:1.5rem 1.5rem 0}@media (max-width: 900px){.summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.summary-card[_ngcontent-%COMP%]{padding:1rem;text-align:center}.summary-card[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:.875rem;color:var(--ax-text-secondary);margin-bottom:.5rem}.summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:var(--ax-text-primary)}.empty-panel[_ngcontent-%COMP%]{padding:3rem 1.5rem;text-align:center;color:var(--ax-text-secondary)}.empty-panel[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;margin-bottom:1rem;color:var(--ax-text-disabled)}.empty-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}.list-tab[_ngcontent-%COMP%]{padding:1.5rem}.day-detail-panel[_ngcontent-%COMP%]{padding:1rem;max-height:calc(100vh - 200px);overflow-y:auto}.day-detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.75rem;border-bottom:1px solid var(--ax-border-subtle)}.day-detail-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.day-detail-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--ax-primary-default)}.day-detail-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.day-summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem;margin-bottom:1rem}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:.5rem;border-radius:8px;background:var(--ax-surface-raised)}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:1.25rem;font-weight:600;color:var(--ax-text-primary)}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.7rem;color:var(--ax-text-secondary)}.stat-item.total[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--ax-primary-default)}.stat-item.confirmed[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#10b981}.stat-item.scheduled[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#6366f1}.stat-item.completed[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#3b82f6}.capacity-section[_ngcontent-%COMP%]{margin-bottom:1rem}.capacity-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.875rem;margin-bottom:.25rem}.capacity-label[_ngcontent-%COMP%]   .capacity-percent[_ngcontent-%COMP%]{font-weight:600}.capacity-bar[_ngcontent-%COMP%]{height:8px;background:var(--ax-surface-raised);border-radius:4px;overflow:hidden}.capacity-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.capacity-fill.low[_ngcontent-%COMP%]{background:#10b981}.capacity-fill.medium[_ngcontent-%COMP%]{background:#3b82f6}.capacity-fill.high[_ngcontent-%COMP%]{background:#f59e0b}.capacity-fill.critical[_ngcontent-%COMP%]{background:#ef4444}.room-breakdown[_ngcontent-%COMP%]{margin-bottom:1rem}.room-breakdown[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.875rem;font-weight:600}.room-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.room-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.25rem 0;font-size:.875rem}.room-item[_ngcontent-%COMP%]   .room-name[_ngcontent-%COMP%]{flex:1;color:var(--ax-text-secondary)}.room-item[_ngcontent-%COMP%]   .room-count[_ngcontent-%COMP%]{font-weight:600;min-width:24px;text-align:right}.room-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.room-dot.small[_ngcontent-%COMP%]{width:8px;height:8px}.day-appointments[_ngcontent-%COMP%]{border-top:1px solid var(--ax-border-subtle);padding-top:1rem}.appointments-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.appointments-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:.875rem;font-weight:600}.appointments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;max-height:300px;overflow-y:auto}.appointment-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem;border-radius:8px;background:var(--ax-surface-raised);cursor:pointer;transition:background .2s ease}.appointment-item[_ngcontent-%COMP%]:hover{background:var(--ax-surface-hover)}.apt-time[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:var(--ax-text-secondary);min-width:80px}.apt-info[_ngcontent-%COMP%]{flex:1;min-width:0}.apt-info[_ngcontent-%COMP%]   .apt-patient[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.apt-info[_ngcontent-%COMP%]   .apt-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.75rem;color:var(--ax-text-secondary);margin-top:.125rem}.no-appointments[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem;color:var(--ax-text-secondary)}.no-appointments[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem;color:var(--ax-text-disabled);margin-bottom:.5rem}.no-appointments[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem}.view-all-btn[_ngcontent-%COMP%]{width:100%;margin-top:.5rem;display:flex;align-items:center;justify-content:center;gap:.25rem}.status-scheduled[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #6366f1}.status-confirmed[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #10b981}.status-checked-in[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #0ea5e9}.status-in-progress[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #f59e0b}.status-completed[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #3b82f6}.status-cancelled[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #6b7280}.status-no-show[_ngcontent-%COMP%]{--mdc-chip-label-text-color: #ef4444}"]})}return a})()}}]);